La asignación de usuarios permite que los usuarios conectados a un sistema de origen envíen consultas como un usuario específico en el sistema de destino. En muchos casos, la asignación de usuarios es opcional.

En el caso de contar con una fuente de datos de destino Hive o Spark sin autorización configurada, la asignación de usuarios es obligatoria para ejecutar consultas. Si el usuario que inicia la consulta no existe en el sistema de destino en un clúster no confiable, las consultas no se ejecutarán.

## Sin autorización


Por ejemplo, cuando no hay autorización, si el usuario "Joe" inicia una consulta utilizando un enlace Teradata a Hive en un clúster no autorizado, Teradata automáticamente convierte el nombre de usuario "Joe" a mayúsculas y envía de forma predeterminada la consulta como el usuario "JOE" al sistema de destino. Los siguientes son los posibles resultados para este caso de uso cuando el conector de destino Hive no está asegurado:

|Caso|Requisito|
|---------|------------|
|El usuario "JOE" no existe en el sistema de destino|Las consultas deben ejecutarse con un usuario existente en el sistema de destino, como "hive". En este caso, la asignación de usuario es necesaria cuando "JOE" en el sistema Teradata está asignado al usuario "hive" en el sistema Hive.|
|El usuario existe en el sistema de destino como "joe"|La asignación de usuario es necesaria cuando "JOE" en el sistema Teradata está asignado a "joe" en el sistema Hive de destino.|
|Existe en el destino como "JOE"|Este caso no requiere asignación de usuarios.|

## Con autorización


Si los conectores Hive y Spark utilizan un método de autenticación **Kerberos**, se puede utilizar la suplantación de los usuarios finales de QueryGrid con una única cuenta de servicio Kerberos. En este caso, la asignación de usuarios es obligatoria.

Con el conector Hive, el usuario suplantado se transmite al sistema de destino utilizando la propiedad JDBC  
    `
    hive.server2.proxy.user
    `
  .

Con el conector Spark, el usuario suplantado se transmite al sistema de destino utilizando el parámetro de comando spark-submit **usuario proxy**.

En ambos casos, el usuario suplantado debe estar en **Usuarios de SO permitidos** para ejecutar consultas en el sistema de destino. El usuario suplantado en Hive o Spark se puede definir usando una de las siguientes opciones:

|Opciones|Descripción|
|--------|------------|
|Usuario en el sistema iniciador (predeterminado)|El usuario del sistema Teradata se transmite al sistema de destino como usuario suplantado, con el nombre de usuario completamente en minúsculas.|
|Asignación de usuarios|La asignación de usuarios puede definir al usuario suplantado con un nombre de usuario que distingue mayúsculas y minúsculas en el sistema de destino para cualquier usuario del sistema iniciador. Un caso de uso típico es cuando el nombre del usuario suplantado no está completamente en minúsculas.|

