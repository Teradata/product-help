Die Benutzerzuordnung ermöglicht es Benutzern, die an einem initiierenden System angemeldet sind, Abfragen als bestimmter Benutzer auf dem Zielsystem zu senden. In vielen Fällen ist die Benutzerzuordnung optional.

Wenn Sie über eine Hive- oder Spark-Zieldatenquelle ohne eingerichtete Autorisierung verfügen, ist für die Ausführung von Abfragen eine Benutzerzuordnung erforderlich. Wenn der Benutzer, der die Abfrage initiiert, auf dem Zielsystem eines nicht vertrauenswürdigen Clusters nicht vorhanden ist, werden die Abfragen nicht ausgeführt.

## Keine Autorisierung


Wenn beispielsweise keine Berechtigung vorliegt und der Benutzer „Joe“ eine Abfrage über eine Teradata-zu-Hive-Verbindung auf einem nicht autorisierten Cluster initiiert, ändert Teradata den Benutzernamen „Joe“ automatisch in Großbuchstaben und sendet die Abfrage standardmäßig als Benutzer „JOE“ an das Zielsystem. Die folgenden Ergebnisse sind für diesen Anwendungsfall möglich, wenn die Hive-Zielverbindung nicht gesichert ist:

|Szenario|Anforderungen|
|---------|------------|
|Benutzer „JOE” ist auf dem Zielsystem nicht vorhanden|Abfragen müssen mit einem vorhandenen Benutzer auf dem Zielsystem ausgeführt werden, beispielsweise „hive“. In diesem Szenario ist eine Benutzerzuordnung erforderlich, bei der „JOE“ auf dem Teradata-System dem Benutzer „hive“ auf dem Hive-System zugeordnet wird.|
|Der Benutzer ist auf dem Zielsystem als „joe” vorhanden|Eine Benutzerzuordnung ist erforderlich, wenn „JOE” im Teradata-System „joe” im Ziel-Hive-System zugeordnet wird.|
|Existiert auf dem Ziel als „JOE“|Dieses Szenario erfordert keine Benutzerzuordnung.|

## Mit Autorisierung


Wenn die Hive- und Spark- Verbindungen eine **Kerberos**-Authentifizierungsmethode verwenden, kann der Identitätswechsel der QueryGrid-Endbenutzer mit einem einzigen Kerberos-Dienstkonto verwendet werden. In diesem Fall ist eine Benutzerzuordnung erforderlich.

Mit der Hive-Verbindung wird der imitierte Benutzer mithilfe der JDBC-Eigenschaft  
    `
    hive.server2.proxy.user
    `
   an das Zielsystem weitergeleitet.

Mit der Spark-Verbindung wird der imitierte Benutzer mithilfe des Befehlsparameters **proxy-user** von spark-submit an das Zielsystem weitergeleitet.

In beiden Fällen muss sich der imitierte Benutzer in **Zulässige Betriebssystem-Benutzer** befinden, um Abfragen auf dem Zielsystem ausführen zu können. Der imitierte Hive- oder Spark-Benutzer kann mit einer der folgenden Optionen definiert werden:

|Optionen|Beschreibung|
|--------|------------|
|Benutzer auf dem initiierenden System (Standard)|Der Teradata-Systembenutzer wird als nachgeahmter Benutzer mit dem Benutzernamen in Kleinbuchstaben an das Zielsystem übergeben.|
|Benutzerzuordnung|Mit der Benutzerzuordnung kann der imitierte Benutzer mit einem groß-/kleinschreibungsabhängigen Benutzernamen auf dem Zielsystem für jeden Benutzer auf dem initiierenden System definiert werden. Ein typischer Anwendungsfall ist, wenn der imitierte Benutzername nicht vollständig aus Kleinbuchstaben besteht.|

