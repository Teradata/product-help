Creating a foreign server involves running SQL statements on both the initiating (source) and target systems to grant permissions and create resources. The status values for each SQL statement run are:

-   **Success:** The SQL statement ran successfully.


-   **Failure:** The SQL statement failed to run. This is indicated by an error.


-   **Skipped:** Either the SQL statement was not needed to run or one of the SQL statements failed which caused the remaining statements to not run.


## Execution stage


The foreign server creation stage.

Actions on the source system include:

-   Grants the permissions needed to create the required resources or access the necessary functions.


-   Creates resources such as authorization objects and foreign servers.


Action on the target system include:

-   Creates a service account user.


-   Grants **connect-through** privileges to the allowed users.


**Note:** Permissions are granted only when they are not already available.

**Failure handling:** If any SQL statement fails during the creation of the foreign server, any remaining SQL statements are skipped and the creation of the foreign server is stopped. If this happens, the Rollback stage is triggered to clean up the actions on both the initiating and target system. Only the SQL statement that ran during this stage are rolled back.

The error message for the failed statement is displayed to help fix the issue. The remaining statements display the status **Skipped**. Fix the issue and re-run the create foreign server script.

## Rollback stage


If the **Execution** stage fails during the creation of the foreign server, then the **Rollback** stage is automatically run to restore the environment to its original state. The **Rollback** stage can only run when both the initiating and target connectors support this stage.

Actions on the initiating and target systems:

-   Revoke any access right granted during the execution stage


-   Delete objects created during the execution stage (such as, authorization, foreign server, service account users)


**Failure handling:** If any SQL statement fails during the rollback stage, any remaining SQL statements are skipped. SQL statements are displayed to help restore the environment to the previous state. Fix the error in the failed SQL statement and run all **Skipped** SQL statements manually.

