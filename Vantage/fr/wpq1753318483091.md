Le mappage d'utilisateur permet aux utilisateurs connectés à un système émetteur de soumettre des requêtes en tant qu'utilisateur spécifique sur le système cible. Dans de nombreux cas, ce mappage est facultatif.

Si vous disposez d'une source de données cible Hive ou Spark sans autorisation configurée, le mappage d'utilisateur est requis pour exécuter les requêtes. Si l'utilisateur à l'origine de la requête n'existe pas sur le système cible d'un cluster non approuvé, les requêtes ne sont pas exécutées.

## Aucune autorisation


Par exemple, en l'absence d'autorisation, si l'utilisateur « Joe » lance une requête via une liaison Teradata-to-Hive sur un cluster non autorisé, Teradata remplace automatiquement le nom d'utilisateur « Joe » par des majuscules et envoie la requête par défaut au système cible en tant qu'utilisateur « JOE ». Les résultats possibles suivants s'appliquent à ce cas d'utilisation lorsque le connecteur cible Hive n'est pas sécurisé :

|Scénario|requis|
|---------|------------|
|L'utilisateur « JOE » n'existe pas sur le système cible|Les requêtes doivent être exécutées avec un utilisateur existant sur le système cible, tel que « hive ». Dans ce scénario, un mappage d'utilisateur est requis , dans lequel « JOE » sur le système Teradata est mappé à l'utilisateur « hive » sur le système Hive.|
|L'utilisateur existe sur le système cible en tant que « joe »|Le mappage d'utilisateur est requis lorsque « JOE » sur le système Teradata est mappé à « joe » sur le système Hive cible.|
|Existe sur la cible en tant que « JOE »|Ce scénario ne nécessite pas de mappage d'utilisateur.|

## Avec une autorisation


Si les connecteurs Hive et Spark utilisent une méthode d'authentification **Kerberos**, l'emprunt d'identité des utilisateurs finaux QueryGrid peut être effectué avec un seul compte de service Kerberos. Dans ce scénario, le mappage d'utilisateur est requis.

Avec le connecteur Hive, l'utilisateur faisant l'objet de l'emprunt d'identité est transmis au système cible à l'aide de la propriété JDBC 
    `
    hive.server2.proxy.user
    `
  .

Avec le connecteur Spark, l'utilisateur faisant l'objet de l'emprunt d'identité est transmis au système cible à l'aide du paramètre de commande spark-submit **proxy-user**.

Dans les deux cas, l'utilisateur faisant l'objet de l'emprunt d'identité doit être dans **Utilisateurs de SE autorisés** pour exécuter des requêtes sur le système cible. L'utilisateur Hive ou Spark faisant l'objet de l'emprunt d'identité peut être défini à l'aide de l'une des options suivantes :

|Description|des options|
|--------|------------|
|Utilisateur sur le système émetteur (par défaut)|L'utilisateur du système Teradata est transmis au système cible en tant qu'utilisateur faisant l'objet de l'emprunt d'identité avec le nom d'utilisateur entièrement en minuscules.|
|Mappage d'utilisateur|Il permet de définir l'utilisateur faisant l'objet de l'emprunt d'identité avec un nom d'utilisateur sensible à la casse sur le système cible pour tout utilisateur du système émetteur. Un nom d'utilisateur faisant l'objet de l'emprunt d'identité qui n'est pas entièrement en minuscules constitue un cas d'utilisation typique.|

