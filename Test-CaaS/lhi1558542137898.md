<html><head></head><body><div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="mdp1507235149305" id="mdp1507235149305"><h1 class="title topictitle1" id="ariaid-title1">TextClassifier</h1><div class="body conbody">
<p class="p">The TextClassifier function classifies input text, using a model output by the function <a href="qqb1558542100825.md#rop1507219165371">TextClassifierTrainer</a>.</p>
<p class="p">TextClassifier uses files that are preinstalled on <span><b>ML Engine</b></span>. For details, see <a href="tzu1557778477026.md">Preinstalled Files That Functions Use</a>.</p></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="srb1507235254090" xml:lang="en-us" lang="en-us" id="srb1507235254090">
<h2 class="title topictitle2" id="ariaid-title2">TextClassifier Syntax</h2><div class="body refbody"><div class="section" id="srb1507235254090__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Version <span>1.4</span></h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM TextClassifier (
  <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span>
  USING
  TextColumn ('<var class="keyword varname">text_column</var>')
  InputModelFile ('<var class="keyword varname">input_model_file</var>')
  <code class="ph codeph">[ Accumulate ({ '<var class="keyword varname">accumulate_column</var>' | <var class="keyword varname">accumulate_column_range</var> }[,...]) ]</code>
) AS <var class="keyword varname">alias</var>;</code></pre></div></div><div class="related-links"><div class="linklistheader"><p></p><b>Related Information</b></div>
<ul class="linklist linklist relinfo"><div class="linklistmember"><a href="ndv1557782188375.md">Column Specification Syntax Elements</a></div></ul></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="tfh1507235310475" xml:lang="en-us" lang="en-us" id="tfh1507235310475">
<h2 class="title topictitle2" id="ariaid-title3">TextClassifier Syntax Elements</h2><div class="body refbody"><div class="section" id="tfh1507235310475__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">TextColumn</dt><dd class="dd pd">Specify the column of the input table that contains the text to use for predicting classification.</dd><dt class="dt pt dlterm">InputModelFile</dt><dd class="dd pd">Specify the model created by TextClassifierTrainer, which is installed on <span><b>ML Engine</b></span> when it is created.</dd><dt class="dt pt dlterm">Accumulate</dt><dd class="dd pd">[Optional] Specify the names of the input columns to copy to the output table.</dd></dl></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title4" topicindex="4" topicid="apg1507235387800" xml:lang="en-us" lang="en-us" id="apg1507235387800">
<h2 class="title topictitle2" id="ariaid-title4">TextClassifier Input</h2><div class="body refbody"><div class="section" id="apg1507235387800__section_jpz_3zc_ycb">
<h3 class="title sectiontitle">Input Table Schema</h3><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="apg1507235387800__table_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:28.57142857142857%" span="1"></col><col style="width:14.285714285714285%" span="1"></col><col style="width:57.14285714285714%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d408583e189" rowspan="1" colspan="1">Column</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d408583e191" rowspan="1" colspan="1">Data Type</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d408583e193" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d408583e189" rowspan="1" colspan="1"><var class="keyword varname">text_column</var></td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d408583e191" rowspan="1" colspan="1">VARCHAR</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d408583e193" rowspan="1" colspan="1">Text to classify.</td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d408583e189" rowspan="1" colspan="1"><var class="keyword varname">accumulate_column</var></td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d408583e191" rowspan="1" colspan="1">Any</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e193" rowspan="1" colspan="1">[Column appears once for each specified <var class="keyword varname">accumulate_column</var>.] <span>Column to copy to output table.</span></td></tr></tbody></table></div></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title5" topicindex="5" topicid="bld1507235501974" xml:lang="en-us" lang="en-us" id="bld1507235501974">
<h2 class="title topictitle2" id="ariaid-title5">TextClassifier Output</h2><div class="body refbody"><div class="section" id="bld1507235501974__section_m2b_hzc_ycb">
<h3 class="title sectiontitle">Output Table Schema</h3><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="bld1507235501974__table_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:20%" span="1"></col><col style="width:13.333333333333334%" span="1"></col><col style="width:66.66666666666666%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d408583e236" rowspan="1" colspan="1">Column</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d408583e238" rowspan="1" colspan="1">Data Type</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d408583e240" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d408583e236" rowspan="1" colspan="1">out_category</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d408583e238" rowspan="1" colspan="1">VARCHAR</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d408583e240" rowspan="1" colspan="1">Predicted category of text. If text is empty or contains no model features, this value is NULL.</td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d408583e236" rowspan="1" colspan="1"><var class="keyword varname">accumulate_column</var></td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d408583e238" rowspan="1" colspan="1"><span>Same as in Input table</span></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e240" rowspan="1" colspan="1">[Column appears once for each specified <var class="keyword varname">accumulate_column</var>.] <span>Column copied from input table.</span></td></tr></tbody></table></div></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title6" topicindex="6" topicid="nid1510348931679" xml:lang="en-us" lang="en-us" id="nid1510348931679">
<h2 class="title topictitle2" id="ariaid-title6">TextClassifier Example</h2><div class="body refbody"><div class="section" id="nid1510348931679__section_ahj_xsl_pdb">
<h3 class="title sectiontitle">Input</h3>
<ul class="ul" id="nid1510348931679__ul_dtd_ctl_pdb">
<li class="li">Input table: textclassifier_input</li>
<li class="li">InputModelFile: knn.bin, output by <a href="qqb1558542100825.md#bvk1507219920237">TextClassifierTrainer Example</a></li></ul><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="nid1510348931679__table_qkd_2tl_pdb" class="table" frame="border" border="1" rules="all"><div class="caption"><span>textclassifier_input</span></div><colgroup span="1"><col style="width:33.33333333333333%" span="1"></col><col style="width:33.33333333333333%" span="1"></col><col style="width:33.33333333333333%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d408583e310" rowspan="1" colspan="1">id</th><th class="entry cellrowborder" style="vertical-align:top;" id="d408583e312" rowspan="1" colspan="1">content</th><th class="entry cellrowborder" style="vertical-align:top;" id="d408583e314" rowspan="1" colspan="1">category</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e310" rowspan="1" colspan="1">16</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e312" rowspan="1" colspan="1">At the beginning of 2004, Federer had a world ranking of No. 2, and that same year, he won the Australian Open, the U.S. Open, the ATP Masters and retained the Wimbledon singles title.</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e314" rowspan="1" colspan="1">sports</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e310" rowspan="1" colspan="1">17</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e312" rowspan="1" colspan="1">Federer held on to his No. 1 ranking from 2004 into 2008. In 2006 and 2007, he won the singles championships at the Australian Open, Wimbledon and the U.S. Open.</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e314" rowspan="1" colspan="1">sports</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e310" rowspan="1" colspan="1">18</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e312" rowspan="1" colspan="1">A paragon of graceful athleticism, Federer was named the Laureus World Sportsman of the Year from 2005-08.</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e314" rowspan="1" colspan="1">sports</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e310" rowspan="1" colspan="1">19</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e312" rowspan="1" colspan="1">Cyclone, tropical cyclone, hurricane, and typhoon are different names for the same phenomenon, which is a cyclonic storm system that forms over the oceans.</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e314" rowspan="1" colspan="1">natural disaster</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e310" rowspan="1" colspan="1">20</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e312" rowspan="1" colspan="1">Drought is the unusual dryness of soil, resulting in crop failure and shortage of water and for other uses which is caused by significant low rainfall than average over a prolonged period.</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e314" rowspan="1" colspan="1">natural disaster</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e310" rowspan="1" colspan="1">21</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e312" rowspan="1" colspan="1">A tornado is a violent, dangerous, rotating column of air that is in contact with both the surface of the earth and a cumulonimbus cloud or, in rare cases, the base of a cumulus cloud.</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d408583e314" rowspan="1" colspan="1">natural disaster</td></tr></tbody></table></div></div><div class="section" id="nid1510348931679__section_vrv_xsl_pdb">
<h3 class="title sectiontitle">SQL Call</h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM TextClassifier (
  ON textclassifier_input
  USING
  TextColumn ('content')
  InputModelFile ('knn.bin')
  Accumulate ('id', 'category')
) AS dt ORDER BY id;</code></pre></div><div class="section" id="nid1510348931679__section_qlf_ysl_pdb">
<h3 class="title sectiontitle">Output</h3><pre class="pre screen" xml:space="preserve"> id category         out_category     
 -- ---------------- ---------------- 
 16 sports           sports          
 17 sports           sports          
 18 sports           natural disaster
 19 natural disaster natural disaster
 20 natural disaster natural disaster
 21 natural disaster natural disaster</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the attachment in the left sidebar.</p></div></div></div></div></body></html>
