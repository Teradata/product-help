<html><head></head><body><div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="ghp1506985023985" id="ghp1506985023985"><h1 class="title topictitle1" id="ariaid-title1">HMMSupervised</h1><div class="body conbody">
<p class="p">The HMMSupervised function runs on the <span><b>SQL-GR</b></span> framework. The function can produce multiple HMM models simultaneously, where each model is learned from a set of sequences and where each sequence represents a vertex.</p></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="mtr1506985077027" xml:lang="en-us" lang="en-us" id="mtr1506985077027">
<h2 class="title topictitle2" id="ariaid-title2">HMMSupervised Syntax</h2><div class="body refbody"><div class="section" id="mtr1506985077027__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Version <span>2.0</span></h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM HMMSupervised (
  <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> AS Vertices
    PARTITION BY [ <var class="keyword varname">model_key</var> [,...]] <var class="keyword varname">sequence_key_column</var> [,...] 
    ORDER BY [ <var class="keyword varname">model_key</var>, ] <var class="keyword varname">time_ordered_sequence_column</var> ASC [,...]
  [ OUT TABLE InitStateTable (<var class="keyword varname">init_state_prob</var>) ]
  [ OUT TABLE StateTransitionTable (<var class="keyword varname">state_transition_prob</var>) ]
  [ OUT TABLE EmissionTable (<var class="keyword varname">emit_prob</var>)]
  USING
  [ ModelColumn ('<var class="keyword varname">model_column</var>') ]
  SeqColumn ('<var class="keyword varname">sequence_column</var>')
  ObservationColumn ('<var class="keyword varname">observed_column</var>')
  StateColumn ('<var class="keyword varname">state_column</var>' [,...])
  [ SkipColumn ('<var class="keyword varname">skip_column</var>') ]
  [ BatchSize (<var class="keyword varname">batch_size</var>) ]
) AS <var class="keyword varname">alias</var>;</code></pre></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="qcj1506985141878" xml:lang="en-us" lang="en-us" id="qcj1506985141878">
<h2 class="title topictitle2" id="ariaid-title3">HMMSupervised Syntax Elements</h2><div class="body refbody"><div class="section" id="qcj1506985141878__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">InitStateTable</dt><dd class="dd pd">[Optional] Specify the name for the initial state probability table that the function outputs.</dd><dd class="dd pd ddexpand">Default: Pi in the current schema</dd><dt class="dt pt dlterm">StateTransitionTable</dt><dd class="dd pd">[Optional] Specify the name for the state transition probability table that the function outputs.</dd><dd class="dd pd ddexpand">Default: A in the current schema</dd><dt class="dt pt dlterm">EmissionTable</dt><dd class="dd pd">[Optional] Specify the name for the emission probability table that the function outputs.</dd><dd class="dd pd ddexpand">Default: B in the current schema</dd><dt class="dt pt dlterm">ModelColumn</dt><dd class="dd pd">[Required if PARTITION BY clause specifies <var class="keyword varname">model_key</var>, disallowed otherwise.] Specify the name of the input column that contains the model attributes. The <var class="keyword varname">model_column</var> must match a <var class="keyword varname">model_key</var> in the PARTITION BY clause. The values in the columns can be either integers or strings.</dd><dt class="dt pt dlterm">SeqColumn</dt><dd class="dd pd">The name of the column that contains the sequence attribute. The <var class="keyword varname">sequence_attribute</var> must be a sequence attribute in the PARTITION BY clause. A sequence must contain more than two observation symbols.</dd><dt class="dt pt dlterm">ObservationColumn</dt><dd class="dd pd">Specify the name of the Vertices column that contains the observed symbols. The function scans the Vertices table to find all possible observed symbols.</dd><dd class="dd pd ddexpand">Observed symbols are case-sensitive.</dd><dt class="dt pt dlterm">StateColumn</dt><dd class="dd pd">Specify the names of the Vertices columns that contain the state attributes. The state attributes are case-sensitive.</dd><dt class="dt pt dlterm">SkipColumn</dt><dd class="dd pd">[Optional] Specify the name of the Vertices column whose value determines whether the function skips the row. Each value in this column must be an INTEGER or VARCHAR that represents the value true or false (INTEGER 1 or 0 or VARCHAR 'true', 't', 'yes', 'y', '1', 'false', 'f', 'no', 'n', or '0'). If the value represents true, the function skips the row; otherwise it does not.</dd><dd class="dd pd ddexpand">Default behavior: The function does not skip any rows.</dd><dt class="dt pt dlterm">BatchSize</dt><dd class="dd pd">[Optional] Specify the number of models to process. The <var class="keyword varname">batch_size</var> must be a positive INTEGER value. If you specify <var class="keyword varname">batch_size</var> and there is insufficient free memory, the function reduces the batch size.</dd><dd class="dd pd ddexpand">Default behavior: The function determines the batch size dynamically, based on memory conditions.</dd></dl></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title4" topicindex="4" topicid="qwl1506985205606" xml:lang="en-us" lang="en-us" id="qwl1506985205606">
<h2 class="title topictitle2" id="ariaid-title4">HMMSupervised Input</h2><div class="body refbody"><div class="section" id="qwl1506985205606__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Vertices Schema</h3><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="qwl1506985205606__table_xrw_sws_dbb" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:33.33333333333333%" span="1"></col><col style="width:33.33333333333333%" span="1"></col><col style="width:33.33333333333333%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d54158e228" rowspan="1" colspan="1">Column</th><th class="entry cellrowborder" style="vertical-align:top;" id="d54158e230" rowspan="1" colspan="1">Data Type</th><th class="entry cellrowborder" style="vertical-align:top;" id="d54158e232" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e228" rowspan="1" colspan="1"><var class="keyword varname">model_column</var></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e230" rowspan="1" colspan="1">Any</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e232" rowspan="1" colspan="1">Model identifier. Observations with same model identifier belong to same model. </td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e228" rowspan="1" colspan="1"><var class="keyword varname">sequence_column</var></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e230" rowspan="1" colspan="1">Any</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e232" rowspan="1" colspan="1">Identifier of a sequence of observed values. Each sequence represents a vertex.
<p class="p">The PARTITION BY clause lists attributes that represent the unique sequence across the entire table.</p>
<p class="p">The ORDER BY clause sorts the observations in each sequence chronologically in ascending order.</p></td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e228" rowspan="1" colspan="1"><var class="keyword varname">observed_column</var></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e230" rowspan="1" colspan="1">Any</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e232" rowspan="1" colspan="1">Observed symbol. Case-sensitive.</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e228" rowspan="1" colspan="1"><var class="keyword varname">skip_column</var></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e230" rowspan="1" colspan="1"> INTEGER or VARCHAR that represents the value true or false (INTEGER 1 or 0 or VARCHAR 'true', 't', 'yes', 'y', '1', 'false', 'f', 'no', 'n', or '0').</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e232" rowspan="1" colspan="1">[Appears only with SkipColumn syntax element.] Whether to skip row: Yes if value represents true; no otherwise.</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e228" rowspan="1" colspan="1"><var class="keyword varname">state_column</var></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e230" rowspan="1" colspan="1">Any</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e232" rowspan="1" colspan="1">Hidden state that creates observation.</td></tr></tbody></table></div></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title5" topicindex="5" topicid="iaa1506985291242" xml:lang="en-us" lang="en-us" id="iaa1506985291242">
<h2 class="title topictitle2" id="ariaid-title5">HMMSupervised Output</h2><div class="body refbody"><div class="section" id="iaa1506985291242__section_N1000E_N1000C_N10001">
<p class="p">The HMMUnsupervised function outputs a message and outputs three tables through JDBC.</p></div><div class="section" id="iaa1506985291242__section_i2n_vyv_xcb">
<h3 class="title sectiontitle">Output Message Schema</h3><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="iaa1506985291242__table_N10014_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:20%" span="1"></col><col style="width:13.333333333333334%" span="1"></col><col style="width:66.66666666666666%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d54158e301" rowspan="1" colspan="1">Column</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d54158e303" rowspan="1" colspan="1">Data Type</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d54158e305" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d54158e301" rowspan="1" colspan="1">message</td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d54158e303" rowspan="1" colspan="1">VARCHAR</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e305" rowspan="1" colspan="1">Reports that the models will be saved to the output tables after the training process successfully completes.</td></tr></tbody></table></div></div><div class="section" id="iaa1506985291242__section_omc_wyv_xcb">
<h3 class="title sectiontitle">InitStateTable Schema</h3>
<p class="p">The function saves this table to <var class="keyword varname">init_state_prob</var>, whose default value is Pi in the current schema.</p><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="iaa1506985291242__table_atj_hfm_nw" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:20%" span="1"></col><col style="width:13.333333333333334%" span="1"></col><col style="width:66.66666666666666%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d54158e330" rowspan="1" colspan="1">Column</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d54158e332" rowspan="1" colspan="1">Data Type</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d54158e334" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e330" rowspan="1" colspan="1"><var class="keyword varname">model_column</var></td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e332" rowspan="1" colspan="1">BIGINT, INTEGER, or VARCHAR</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d54158e334" rowspan="1" colspan="1">[Appears only with ModelColumn syntax element.] Model attribute.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e330" rowspan="1" colspan="1">state</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e332" rowspan="1" colspan="1">VARCHAR</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d54158e334" rowspan="1" colspan="1">Hidden state of learned HMM.</td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d54158e330" rowspan="1" colspan="1">probability</td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d54158e332" rowspan="1" colspan="1">DOUBLE PRECISION</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e334" rowspan="1" colspan="1">Initial state probability determined by function.</td></tr></tbody></table></div></div><div class="section" id="iaa1506985291242__section_c2s_wyv_xcb">
<h3 class="title sectiontitle">StateTransitionTable Schema</h3>
<p class="p">The function saves this table to <var class="keyword varname">state_transition_prob</var>, whose default value is A in the current schema.</p><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="iaa1506985291242__table_btj_hfm_nw" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:20%" span="1"></col><col style="width:13.333333333333334%" span="1"></col><col style="width:66.66666666666666%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d54158e374" rowspan="1" colspan="1">Column</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d54158e376" rowspan="1" colspan="1">Data Type</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d54158e378" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e374" rowspan="1" colspan="1"><var class="keyword varname">model_column</var></td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e376" rowspan="1" colspan="1">BIGINT, INTEGER, or VARCHAR</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d54158e378" rowspan="1" colspan="1">[Appears only with ModelColumn syntax element.] Model attribute.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e374" rowspan="1" colspan="1">from_state</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e376" rowspan="1" colspan="1">VARCHAR</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d54158e378" rowspan="1" colspan="1">Hidden state of learned HMM, from which a transition emanates.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e374" rowspan="1" colspan="1">to_state</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e376" rowspan="1" colspan="1">VARCHAR</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d54158e378" rowspan="1" colspan="1">Hidden state of learned HMM, to which a transition is made.</td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d54158e374" rowspan="1" colspan="1">probability</td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d54158e376" rowspan="1" colspan="1">DOUBLE PRECISION</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e378" rowspan="1" colspan="1">Probability of a transition from from_state to to_state.</td></tr></tbody></table></div></div><div class="section" id="iaa1506985291242__section_sfq_xyv_xcb">
<h3 class="title sectiontitle">EmissionTable Schema</h3>
<p class="p">The function saves this table to <var class="keyword varname">emit_prob</var>, whose default value is B in the current schema.</p><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="iaa1506985291242__table_ctj_hfm_nw" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:28.57142857142857%" span="1"></col><col style="width:14.285714285714285%" span="1"></col><col style="width:57.14285714285714%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d54158e425" rowspan="1" colspan="1">Column</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d54158e427" rowspan="1" colspan="1">Data Type</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d54158e429" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e425" rowspan="1" colspan="1"><var class="keyword varname">model_column</var></td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e427" rowspan="1" colspan="1">BIGINT, INTEGER, or VARCHAR</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d54158e429" rowspan="1" colspan="1">[Appears only with ModelColumn syntax element.] Model attribute.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e425" rowspan="1" colspan="1">state</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e427" rowspan="1" colspan="1">VARCHAR</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d54158e429" rowspan="1" colspan="1">Hidden state of learned HMM.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e425" rowspan="1" colspan="1">observed</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e427" rowspan="1" colspan="1">VARCHAR</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d54158e429" rowspan="1" colspan="1">Symbol in observed_id column of input table.</td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d54158e425" rowspan="1" colspan="1">probability</td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d54158e427" rowspan="1" colspan="1">DOUBLE PRECISION</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e429" rowspan="1" colspan="1">Probability of emitting observed symbol, given that HMM is in hidden state.</td></tr></tbody></table></div></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title6" topicindex="6" topicid="gbb1506985375543" xml:lang="en-us" lang="en-us" id="gbb1506985375543">
<h2 class="title topictitle2" id="ariaid-title6">HMMSupervised Example: Customer Loyalty Prediction</h2><div class="body refbody"><div class="section" id="gbb1506985375543__section_N1000E_N1000C_N10001">
<p class="p">Customer loyalty
        cannot be directly observed or measured, but can be inferred probabilistically. This use
        case shows how to predict the loyalty level of customers to a retailer from customer
        shopping patterns.</p>
<p class="p">Customers who make frequent purchases or costlier
        purchases tend to be more loyal to a brand than infrequent shoppers buying low-value items.
        A customer who makes a purchase each week is more loyal than a customer who makes a purchase
        once a year. Similarly, a customer spending more money is more loyal than a customer
        spending less money.</p>
<p class="p">You can use the shopping patterns of customers
        with extensive purchase histories to build a Hidden Markov Model to analyze the loyalty of
        new customers. Gaining insight about the loyalty levels of customers can help retailers
        devise strategic marketing plans to retain loyal customers and convert low-loyalty customers
        to high-loyalty. Retailers can also take proactive action to turn around the fading
        relationship with customers who show a downward trajectory of loyalty. This is particularly
        important for high-value customers.</p>
<p class="p">The data set for this use case is
        the shopping history of customers. This data set is transformed into observations that can
        be used to train an HMM. Based on the time between purchases and the difference in amount
        spent between purchases, purchases are classified into the following levels:</p><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="gbb1506985375543__table_N1001D_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:50%" span="1"></col><col style="width:50%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d54158e505" rowspan="1" colspan="1">Time between purchases</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d54158e508" rowspan="1" colspan="1">Difference in amount spent</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e505" rowspan="1" colspan="1">Small (S)</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d54158e508" rowspan="1" colspan="1">Less (L)</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d54158e505" rowspan="1" colspan="1">Medium (M)</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d54158e508" rowspan="1" colspan="1">Same (S)</td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d54158e505" rowspan="1" colspan="1">Large (L)</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e508" rowspan="1" colspan="1">More (M)</td></tr></tbody></table></div>
<p class="p">To determine the level that a purchase belongs to, you can use
        K-Means clustering with K=3 to create clusters based on either time difference between
        purchases or difference in amount spent. Purchases clustered using either metric are
        classified into one of the three purchase levels. The observation associated with a purchase
        is the combination of the levels from both metrics.</p><div class="p">From the different
        levels of time difference and spending amount difference between purchases, nine spending
        profiles are possible:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="gbb1506985375543__table_qd5_spb_v1b" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:33.33333333333333%" span="1"></col><col style="width:33.33333333333333%" span="1"></col><col style="width:33.33333333333333%" span="1"></col></colgroup><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" rowspan="1" colspan="1">SL</td><td class="entry cellrowborder" style="vertical-align:top;" rowspan="1" colspan="1">SS</td><td class="entry cellrowborder" style="vertical-align:top;" rowspan="1" colspan="1">SM</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" rowspan="1" colspan="1">ML</td><td class="entry cellrowborder" style="vertical-align:top;" rowspan="1" colspan="1">MS</td><td class="entry cellrowborder" style="vertical-align:top;" rowspan="1" colspan="1">MM</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" rowspan="1" colspan="1">LL</td><td class="entry cellrowborder" style="vertical-align:top;" rowspan="1" colspan="1">LS</td><td class="entry cellrowborder" style="vertical-align:top;" rowspan="1" colspan="1">LM</td></tr></tbody></table></div>
These nine spending profiles serve as the observation symbols for the HMM.</div>
<p class="p">Assuming that a customer has one of three loyalty levels—low (L), normal
        (N), or high (H)—the number of hidden states is three. The business determines the
        definitions of the loyalty levels.</p>
<p class="p">This example uses supervised
        learning, so each purchase in the input data set is labeled with the customer loyalty level.
        You can use these labeled observations to train an HMM which can later be used to assign
        loyalty levels to new, unlabeled purchase data.</p></div><div class="section" id="gbb1506985375543__section_sh5_lgf_n2b">
<h3 class="title sectiontitle">Input</h3><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="gbb1506985375543__table_myx_zgf_n2b" class="table" frame="border" border="1" rules="all"><div class="caption"><span>Vertices: customer_loyalty</span></div><colgroup span="1"><col style="width:16.666666666666664%" span="1"></col><col style="width:16.666666666666664%" span="1"></col><col style="width:16.666666666666664%" span="1"></col><col style="width:16.666666666666664%" span="1"></col><col style="width:16.666666666666664%" span="1"></col><col style="width:16.666666666666664%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d54158e631" rowspan="1" colspan="1">id</th><th class="entry cellrowborder" style="vertical-align:top;" id="d54158e634" rowspan="1" colspan="1">user_id</th><th class="entry cellrowborder" style="vertical-align:top;" id="d54158e637" rowspan="1" colspan="1">seq_id</th><th class="entry cellrowborder" style="vertical-align:top;" id="d54158e640" rowspan="1" colspan="1">purchase_date</th><th class="entry cellrowborder" style="vertical-align:top;" id="d54158e643" rowspan="1" colspan="1">loyalty_level</th><th class="entry cellrowborder" style="vertical-align:top;" id="d54158e647" rowspan="1" colspan="1">observation</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-01</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">L</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">LL</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-02</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">L</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">ML</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-03</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">L</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">SL</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">4</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-04</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">L</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">LM</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">5</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-05</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">L</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">ML</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">6</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-06</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">L</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">LL</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">7</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-07</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">L</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">MM</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">8</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-08</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">L</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">MS</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">9</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-09</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">L</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">ML</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">10</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-10</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">L</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">LM</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">...</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">101</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-01</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">N</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">ML</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">102</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-02</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">L</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">LS</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">103</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-03</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">N</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">ML</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">104</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-04</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">N</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">ML</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">105</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-05</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">N</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">MS</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">106</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-06</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">N</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">ML</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">107</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-07</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">N</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">SM</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">108</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-08</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">N</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">MS</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">109</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-09</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">N</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">LL</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">110</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-10</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">N</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">MM</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">...</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">201</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-01</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">L</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">LL</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">202</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-02</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">L</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">LS</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">203</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-03</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">H</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">SS</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">204</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-04</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">H</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">SM</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">205</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-05</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">H</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">LL</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">206</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-06</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">N</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">ML</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">207</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-07</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">H</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">SS</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">208</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-08</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">H</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">MM</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">209</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-09</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">H</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">MS</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">210</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">2014-01-10</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">H</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">ML</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e631" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e634" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e637" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e640" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e643" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d54158e647" rowspan="1" colspan="1">...</td></tr></tbody></table></div></div><div class="section" id="gbb1506985375543__section_b2d_mgf_n2b">
<h3 class="title sectiontitle">SQL Call</h3>
<p class="p">The following SQL query creates the probabilities with state
        information:</p><pre class="pre codeblock" xml:space="preserve"><code>DROP TABLE pi_loyalty;
DROP TABLE A_loyalty;
DROP TABLE B_loyalty;

SELECT * FROM HMMSupervised (
  ON customer_loyalty AS Vertices
    PARTITION BY user_id, seq_id
    ORDER BY user_id, seq_id, purchase_date ASC
  OUT TABLE InitStateTable (pi_loyalty)
  OUT TABLE StateTransitionTable (A_loyalty)
  OUT TABLE EmissionTable (B_loyalty)
  USING
  ModelColumn ('user_id')
  SeqColumn ('seq_id')
  ObservationColumn ('observation')
  StateColumn ('loyalty_level')
) AS dt;</code></pre><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM HMMSupervised(
ON customer_loyalty AS Vertices PARTITION BY user_id, seq_id
ORDER BY user_id, seq_id, purchase_date ASC
OUT TABLE InitStateTable(pi_loyalty)
OUT TABLE StateTransitionTable(A_loyalty)
OUT TABLE EmissionTable(B_loyalty)
USING
ModelColumn('user_id')
SeqColumn('seq_id')
ObservationColumn('observation')
StateColumn('loyalty_level')
) AS dt ;</code></pre></div><div class="section" id="gbb1506985375543__section_d5n_mgf_n2b">
<h3 class="title sectiontitle">Output</h3><pre class="pre screen" xml:space="preserve"> message                                                                                             
 --------------------------------------------------------------------------------------------------- 
 HMM models will be saved to the  output tables once the training process is successfully completed.</pre><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM pi_loyalty ORDER BY 1, 2;</code></pre><pre class="pre screen" xml:space="preserve"> user_id state probability 
 ------- ----- ----------- 
       1 h             0.0
       1 l             1.0
       1 n             0.0
       2 h             0.0
       2 l             0.0
       2 n             1.0
       3 h             0.0
       3 l             1.0
       3 n             0.0</pre><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM A_loyalty ORDER BY 1, 2, 3;</code></pre><pre class="pre screen" xml:space="preserve"> user_id from_state to_state probability          
 ------- ---------- -------- -------------------- 
       1 h          h         0.16666666666666666
       1 h          l          0.6666666666666666
       1 h          n         0.16666666666666666
       1 l          h        0.044444444444444446
       1 l          l          0.9333333333333333
       1 l          n        0.022222222222222223
       1 n          h          0.3333333333333333
       1 n          l          0.6666666666666666
       1 n          n                         0.0
       2 h          h         0.46153846153846156
       2 h          l         0.23076923076923078
       2 h          n          0.3076923076923077
       2 l          h                         0.2
       2 l          l                         0.1
       2 l          n                         0.7
       2 n          h         0.06578947368421052
       2 n          l         0.07894736842105263
       2 n          n          0.8552631578947368
       3 h          h          0.9213483146067416
       3 h          l         0.02247191011235955
       3 h          n        0.056179775280898875
       3 l          h                        0.75
       3 l          l                        0.25
       3 l          n                         0.0
       3 n          h          0.8333333333333334
       3 n          l                         0.0
       3 n          n         0.16666666666666666</pre><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM B_loyalty ORDER BY 1, 2, 3;</code></pre><pre class="pre screen" xml:space="preserve"> user_id state observed probability          
 ------- ----- -------- -------------------- 
       1 h     ll                        0.0
       1 h     lm                        0.0
       1 h     ls                        0.0
       1 h     ml                        0.0
       1 h     mm        0.16666666666666666
       1 h     ms                        0.5
       1 h     sl        0.16666666666666666
       1 h     sm        0.16666666666666666
       1 h     ss                        0.0
       1 l     ll         0.3076923076923077
       1 l     lm        0.14285714285714285
       1 l     ls        0.13186813186813187
       1 l     ml        0.15384615384615385
       1 l     mm       0.054945054945054944
       1 l     ms        0.08791208791208792
       1 l     sl       0.054945054945054944
       1 l     sm        0.01098901098901099
       1 l     ss       0.054945054945054944
       1 n     ll                        0.0
       1 n     lm                        0.0
       1 n     ls         0.3333333333333333
       1 n     ml         0.3333333333333333
       1 n     mm                        0.0
       1 n     ms         0.3333333333333333
       1 n     sl                        0.0
       1 n     sm                        0.0
       1 n     ss                        0.0
       2 h     ll                        0.0
       2 h     lm        0.07692307692307693
       2 h     ls                        0.0
       2 h     ml        0.15384615384615385
       2 h     mm        0.07692307692307693
       2 h     ms        0.15384615384615385
       2 h     sl        0.15384615384615385
       2 h     sm        0.15384615384615385
       2 h     ss        0.23076923076923078
       2 l     ll                        0.1
       2 l     lm                        0.2
       2 l     ls                        0.3
       2 l     ml                        0.0
       2 l     mm                        0.2
       2 l     ms                        0.0
       2 l     sl                        0.2
       2 l     sm                        0.0
       2 l     ss                        0.0
       2 n     ll        0.09090909090909091
       2 n     lm        0.07792207792207792
       2 n     ls        0.07792207792207792
       2 n     ml         0.2077922077922078
       2 n     mm        0.12987012987012986
       2 n     ms        0.19480519480519481
       2 n     sl        0.05194805194805195
       2 n     sm        0.09090909090909091
       2 n     ss        0.07792207792207792
       3 h     ll        0.05555555555555555
       3 h     lm       0.044444444444444446
       3 h     ls        0.07777777777777778
       3 h     ml        0.06666666666666667
       3 h     mm        0.14444444444444443
       3 h     ms         0.1111111111111111
       3 h     sl        0.05555555555555555
       3 h     sm                        0.2
       3 h     ss        0.24444444444444444
       3 l     ll                       0.25
       3 l     lm                       0.25
       3 l     ls                        0.5
       3 l     ml                        0.0
       3 l     mm                        0.0
       3 l     ms                        0.0
       3 l     sl                        0.0
       3 l     sm                        0.0
       3 l     ss                        0.0
       3 n     ll                        0.0
       3 n     lm                        0.0
       3 n     ls        0.16666666666666666
       3 n     ml         0.3333333333333333
       3 n     mm        0.16666666666666666
       3 n     ms                        0.0
       3 n     sl                        0.0
       3 n     sm        0.16666666666666666
       3 n     ss        0.16666666666666666</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the attachment in the left sidebar.</p></div></div></div></div></body></html>
