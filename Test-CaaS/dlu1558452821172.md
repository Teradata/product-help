<html><head></head><body><div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="uif1507834592989" id="uif1507834592989"><h1 class="title topictitle1" id="ariaid-title1">MurmurHash (ML Engine)</h1><div class="body conbody">
<p class="p">The MurmurHash function computes the hash values of the input columns.</p>
<p class="p">MurmurHash is a noncryptographic hash function suitable for hash-based searching. The function computes the MurmurHash value of each column value in each row of the input table.</p></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="iwu1507834640667" xml:lang="en-us" lang="en-us" id="iwu1507834640667">
<h2 class="title topictitle2" id="ariaid-title2">MurmurHash Syntax</h2><div class="body refbody"><div class="section" id="iwu1507834640667__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Version 1.4</h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM MurmurHash (
  <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span>
  USING
  TargetColumns ( { '<var class="keyword varname">target_column</var>' | <var class="keyword varname">target_column_range</var> }[,...] )
  [ HashBits ({ 32 | 64 }) ]
  <code class="ph codeph">[ Accumulate ({ '<var class="keyword varname">accumulate_column</var>' | <var class="keyword varname">accumulate_column_range</var> }[,...]) ]</code>
) AS <var class="keyword varname">alias</var>;</code></pre></div></div><div class="related-links"><div class="linklistheader"><p></p><b>Related Information</b></div>
<ul class="linklist linklist relinfo"><div class="linklistmember"><a href="ndv1557782188375.md">Column Specification Syntax Elements</a></div></ul></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="zle1507834645332" xml:lang="en-us" lang="en-us" id="zle1507834645332">
<h2 class="title topictitle2" id="ariaid-title3">MurmurHash Syntax Elements</h2><div class="body refbody"><div class="section" id="zle1507834645332__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">TargetColumns</dt><dd class="dd pd">Specify the names of the input table columns for which to calculate hash values.</dd><dd class="dd pd ddexpand">NULL values in the input columns are output as NULL.</dd><dt class="dt pt dlterm">HashBits</dt><dd class="dd pd">[Optional] Specify whether the function creates 32-bit or 64-bit hash values.</dd><dd class="dd pd ddexpand">Default: 32-bit hash values</dd><dt class="dt pt dlterm">Accumulate</dt><dd class="dd pd">[Optional] Specify the names of the input table columns to copy to the output table.</dd></dl></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title4" topicindex="4" topicid="vlj1507834655398" xml:lang="en-us" lang="en-us" id="vlj1507834655398">
<h2 class="title topictitle2" id="ariaid-title4">MurmurHash Input</h2><div class="body refbody"><div class="section" id="vlj1507834655398__section_idf_tjs_ycb">
<h3 class="title sectiontitle">Input Table Schema</h3><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="vlj1507834655398__table_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:28.57142857142857%" span="1"></col><col style="width:14.285714285714285%" span="1"></col><col style="width:57.14285714285714%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d138308e165" rowspan="1" colspan="1">Column</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d138308e167" rowspan="1" colspan="1">Data Type</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d138308e169" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d138308e165" rowspan="1" colspan="1"><var class="keyword varname">target_column</var></td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d138308e167" rowspan="1" colspan="1">Any</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d138308e169" rowspan="1" colspan="1">Column for which to calculate hash values.</td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d138308e165" rowspan="1" colspan="1"><var class="keyword varname">accumulate_column</var></td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d138308e167" rowspan="1" colspan="1">Any</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e169" rowspan="1" colspan="1">[Column appears once for each specified <var class="keyword varname">accumulate_column</var>.] <span>Column to copy to output table.</span></td></tr></tbody></table></div></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title5" topicindex="5" topicid="ohl1507834659964" xml:lang="en-us" lang="en-us" id="ohl1507834659964">
<h2 class="title topictitle2" id="ariaid-title5">MurmurHash Output</h2><div class="body refbody"><div class="section" id="ohl1507834659964__section_cyk_rjs_ycb">
<h3 class="title sectiontitle">Output Table Schema</h3><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="ohl1507834659964__table_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:33.33333333333333%" span="1"></col><col style="width:33.33333333333333%" span="1"></col><col style="width:33.33333333333333%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d138308e212" rowspan="1" colspan="1">Column</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d138308e214" rowspan="1" colspan="1">Data Type</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d138308e216" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d138308e212" rowspan="1" colspan="1"><var class="keyword varname">accumulate_column</var></td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d138308e214" rowspan="1" colspan="1"><span>Same as in Input table</span></td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d138308e216" rowspan="1" colspan="1">[Column appears once for each specified <var class="keyword varname">accumulate_column</var>.] <span>Column copied from input table.</span></td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d138308e212" rowspan="1" colspan="1"><var class="keyword varname">column</var>_murmurhash</td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d138308e214" rowspan="1" colspan="1">For HashBits (32): INTEGER
<p class="p">For HashBits (64): BIGINT</p></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e216" rowspan="1" colspan="1">Hash value for <var class="keyword varname">target_column</var>.</td></tr></tbody></table></div></div></div></div><div class="topic concept nested1" aria-labelledby="ariaid-title6" topicindex="6" topicid="iap1510711076520" xml:lang="en-us" lang="en-us" id="iap1510711076520">
<h2 class="title topictitle2" id="ariaid-title6">MurmurHash Examples</h2><div class="topic reference nested2" aria-labelledby="ariaid-title7" topicindex="7" topicid="tld1527017758167" xml:lang="en-us" lang="en-us" id="tld1527017758167">
<h3 class="title topictitle3" id="ariaid-title7">MurmurHash Example: 32-Bit Hash Value (by Default)</h3><div class="body refbody"><div class="section" id="tld1527017758167__section_md3_srr_t2b">
<h4 class="title sectiontitle">Input</h4>
<p class="p">The input table, murmurhash_input, is a log of midnight temperatures (in degrees Fahrenheit) for five consecutive nights in five cities. The rows of all columns except id and city_varchar are converted to hash values. Because the hash value depends on data type, the input table has three columns each, with different data types, for the time period and temperature:</p><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="tld1527017758167__table_rh1_wrr_t2b" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:33.33333333333333%" span="1"></col><col style="width:33.33333333333333%" span="1"></col><col style="width:33.33333333333333%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d138308e289" rowspan="1" colspan="1">Columns</th><th class="entry cellrowborder" style="vertical-align:top;" id="d138308e291" rowspan="1" colspan="1">Content</th><th class="entry cellrowborder" style="vertical-align:top;" id="d138308e293" rowspan="1" colspan="1">Data Types</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e289" rowspan="1" colspan="1">3-5</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e291" rowspan="1" colspan="1">Time period</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e293" rowspan="1" colspan="1">TIMESTAMP, VARCHAR, DATE</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e289" rowspan="1" colspan="1">6-8</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e291" rowspan="1" colspan="1">Temperature</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e293" rowspan="1" colspan="1">DOUBLE PRECISION, INTEGER, VARCHAR</td></tr></tbody></table></div><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="tld1527017758167__table_ypg_bsr_t2b" class="table" frame="border" border="1" rules="all"><div class="caption"><span>Input table: murmurhash_input</span></div><colgroup span="1"><col style="width:12.5%" span="1"></col><col style="width:12.5%" span="1"></col><col style="width:12.5%" span="1"></col><col style="width:12.5%" span="1"></col><col style="width:12.5%" span="1"></col><col style="width:12.5%" span="1"></col><col style="width:12.5%" span="1"></col><col style="width:12.5%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d138308e324" rowspan="1" colspan="1">id</th><th class="entry cellrowborder" style="vertical-align:top;" id="d138308e326" rowspan="1" colspan="1">city_varchar</th><th class="entry cellrowborder" style="vertical-align:top;" id="d138308e328" rowspan="1" colspan="1">period_timestamp</th><th class="entry cellrowborder" style="vertical-align:top;" id="d138308e330" rowspan="1" colspan="1">period_text</th><th class="entry cellrowborder" style="vertical-align:top;" id="d138308e332" rowspan="1" colspan="1">period_date</th><th class="entry cellrowborder" style="vertical-align:top;" id="d138308e334" rowspan="1" colspan="1">temp_f_real</th><th class="entry cellrowborder" style="vertical-align:top;" id="d138308e336" rowspan="1" colspan="1">temp_f_integer</th><th class="entry cellrowborder" style="vertical-align:top;" id="d138308e338" rowspan="1" colspan="1">temp_f_text</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e324" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e326" rowspan="1" colspan="1">Asheville</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e328" rowspan="1" colspan="1">2008-10-10 00:00:00</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e330" rowspan="1" colspan="1">10-10-2008 00:00:00</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e332" rowspan="1" colspan="1">2008-10-10</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e334" rowspan="1" colspan="1">34.9</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e336" rowspan="1" colspan="1">35</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e338" rowspan="1" colspan="1">34.9</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e324" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e326" rowspan="1" colspan="1">Brownsville</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e328" rowspan="1" colspan="1">2008-10-12 00:00:00</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e330" rowspan="1" colspan="1">10-12-2008 00:00:00</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e332" rowspan="1" colspan="1">2008-10-12</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e334" rowspan="1" colspan="1">34</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e336" rowspan="1" colspan="1">34</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e338" rowspan="1" colspan="1">34</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e324" rowspan="1" colspan="1">5</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e326" rowspan="1" colspan="1">Knoxville</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e328" rowspan="1" colspan="1">2008-10-14 00:00:00</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e330" rowspan="1" colspan="1">10-14-2008 00:00:00</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e332" rowspan="1" colspan="1">2008-10-14</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e334" rowspan="1" colspan="1">32</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e336" rowspan="1" colspan="1">32</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e338" rowspan="1" colspan="1">32</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e324" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e326" rowspan="1" colspan="1">Greenville</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e328" rowspan="1" colspan="1">2008-10-11 00:00:00</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e330" rowspan="1" colspan="1">10-11-2008 00:00:00</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e332" rowspan="1" colspan="1">2008-10-11</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e334" rowspan="1" colspan="1">34.4</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e336" rowspan="1" colspan="1">34</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e338" rowspan="1" colspan="1">34.4</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e324" rowspan="1" colspan="1">4</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e326" rowspan="1" colspan="1">Nashville</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e328" rowspan="1" colspan="1">2008-10-13 00:00:00</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e330" rowspan="1" colspan="1">10-13-2008 00:00:00</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e332" rowspan="1" colspan="1">2008-10-13</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e334" rowspan="1" colspan="1">35.6</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e336" rowspan="1" colspan="1">36</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d138308e338" rowspan="1" colspan="1">35.6</td></tr></tbody></table></div></div><div class="section" id="tld1527017758167__section_lfl_yg3_xdb">
<h4 class="title sectiontitle">SQL Call</h4><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM MurmurHash (
  ON murmurhash_input
  USING
  TargetColumns ('[2:7]')
  Accumulate ('id')
) AS dt ORDER BY 1;</code></pre>
<p class="p">For the TargetColumns syntax element, columns are numbered 0, 1, 2, and so on (not 1, 2, 3 and so on, as in the id column of the table murmurhash_input.</p></div><div class="section" id="tld1527017758167__section_ugw_yg3_xdb">
<h4 class="title sectiontitle">Output</h4>
<p class="p">The hash values for each time period are different for each data type. When the temperature value in the input table is an integer, the hash values are the same for INTEGER and VARCHAR, but different for REAL. When the temperature value in the input table is real, the hash values are the same for REAL and VARCHAR, but different for INTEGER.</p><pre class="pre screen" xml:space="preserve"> id period_timestamp_murmurhash period_text_murmurhash period_date_murmurhash temp_f_real_murmurhash temp_f_integer_murmurhash temp_f_text_murmurhash 
 -- --------------------------- ---------------------- ---------------------- ---------------------- ------------------------- ---------------------- 
  1                  1962681181             -463297848              557349452              491855154               -2026295078              491855154
  2                 -1741097193             1584740227            -1509759604             -499861358               -2026295078             -499861358
  3                  1530898040             1693067691             -122411470             -141326552               -2026295078            -2026295078
  4                 -1426854377            -2116413651             1981218164              138771797                -392240485              138771797
  5                 -1560585364             2011908706             1085005088             1047067045                -902858061             -902858061</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the attachment in the left sidebar.</p></div></div></div><div class="topic reference nested2" aria-labelledby="ariaid-title8" topicindex="8" topicid="xdv1507834685120" xml:lang="en-us" lang="en-us" id="xdv1507834685120">
<h3 class="title topictitle3" id="ariaid-title8">MurmurHash Example: 64-Bit Value (Specified)</h3><div class="body refbody"><div class="section" id="xdv1507834685120__section_N10011_N1000E_N10001">
<p class="p">This example shows how specifying HashBits('64') affects the hash values. As in the 32-bit value example, when the temperature value in the input table is an integer, the hash values are the same for INTEGER and VARCHAR, but different for REAL. When the temperature value in the input table is real, the hash values are the same for REAL and VARCHAR, but different for INTEGER.</p></div><div class="section" id="xdv1507834685120__section_md3_srr_t2b">
<h4 class="title sectiontitle">Input</h4>
<ul class="ul" id="xdv1507834685120__ul_cjs_jsr_t2b">
<li class="li">Input table: murmurhash_input, as in <a href="dlu1558452821172.md#tld1527017758167">MurmurHash Example: 32-Bit Hash Value (by Default)</a></li></ul></div><div class="section" id="xdv1507834685120__section_lfl_yg3_xdb">
<h4 class="title sectiontitle">SQL Call</h4><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM MurmurHash(
  ON murmurhash_input
  USING
  TargetColumns('[2:7]')
  HashBits(64)
  Accumulate('id')
) AS dt ORDER BY 1;</code></pre></div><div class="section" id="xdv1507834685120__section_ugw_yg3_xdb">
<h4 class="title sectiontitle">Output</h4><pre class="pre screen" xml:space="preserve"> id period_timestamp_murmurhash period_text_murmurhash period_date_murmurhash temp_f_real_murmurhash temp_f_integer_murmurhash temp_f_text_murmurhash 
 -- --------------------------- ---------------------- ---------------------- ---------------------- ------------------------- ---------------------- 
  1         2081499398607021206    1892844779878238375   -3374208292985920001    1293995461165576289       2118418006307321788    1293995461165576289
  2          515846716270079702   -7113059074592314425    7968959960480043948   -3815305352492785825       2118418006307321788   -3815305352492785825
  3        -1513387057007090709    5003897662396662390    1794743325310104289    1044130231958811690       2118418006307321788    2118418006307321788
  4         5181116076770007143   -3056768082299206123    6786124399480028630    1386486412937455134       6315281623848420264    1386486412937455134
  5         7275307893407845346    2474048315384364200    1414589266172155885    8029796110320680006      -5952800379241158136   -5952800379241158136
</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the attachment in the left sidebar.</p></div></div></div></div></div></body></html>
