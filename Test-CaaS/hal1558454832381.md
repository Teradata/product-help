<html><head></head><body><div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="zzl1507825806540" id="zzl1507825806540"><h1 class="title topictitle1" id="ariaid-title1">Scale</h1><div class="body conbody"><div class="section" id="zzl1507825806540__section_N1000E_N1000C_N10001">
<p class="p">The Scale function uses statistical information from the <a href="aga1558454791029.md#fna1507827820130">ScaleMap</a> function to scale the input data set.</p>
<p class="p">To scale the sequences in each partition independently, use the function <a href="kge1558454904371.md#fcl1507824491377">ScaleByPartition</a>.</p></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="dkq1507825813210" xml:lang="en-us" lang="en-us" id="dkq1507825813210">
<h2 class="title topictitle2" id="ariaid-title2">Scale Syntax</h2><div class="body refbody"><div class="section" id="dkq1507825813210__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Version <span>1.7</span></h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM Scale (
  <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> AS InputTable PARTITION BY ANY
  ON (
    SELECT * FROM ScaleMap (
    ...
    ) AS <var class="keyword varname">alias_1</var>
  ) AS Statistic DIMENSION
  USING
  ScaleMethod ('<var class="keyword varname">method</var>' [,...])
  [ GlobalScale (<span><b>{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</b></span>) ]
  [ TargetColumns ( { '<var class="keyword varname">target_column</var>' | <var class="keyword varname">target_column_range</var> }[,...] ) ]
  <code class="ph codeph">[ Accumulate ({ '<var class="keyword varname">accumulate_column</var>' | <var class="keyword varname">accumulate_column_range</var> }[,...]) ]</code>
  [ Multiplier (<var class="keyword varname">multiplier</var> [,...]) ]
  [ Intercept (<var class="keyword varname">intercept</var> [,...]) ]
) AS <var class="keyword varname">alias_2</var>;</code></pre></div></div><div class="related-links"><div class="linklistheader"><p></p><b>Related Information</b></div>
<ul class="linklist linklist relinfo"><div class="linklistmember"><a href="ndv1557782188375.md">Column Specification Syntax Elements</a></div></ul></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="ebw1507825817022" xml:lang="en-us" lang="en-us" id="ebw1507825817022">
<h2 class="title topictitle2" id="ariaid-title3">Scale Syntax Elements</h2><div class="body refbody"><div class="section" id="ebw1507825817022__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">ScaleMethod</dt><dd class="dd pd">Specify one or more statistical methods to use to scale the data set. For <var class="keyword varname">method</var> values and descriptions, see <a href="hal1558454832381.md#pxc1522254582043">Location and Scale for Statistical Methods</a>.</dd><dd class="dd pd ddexpand">If you specify multiple methods, the output table includes the column scalemethod (which contains the method name) and a row for each input-row/method combination.</dd><dt class="dt pt dlterm">GlobalScale</dt><dd class="dd pd">[Optional] Specify whether all InputTable columns are scaled to the same location and scale. For a description of location and scale and the values that are used with each ScaleMethod, see <a href="hal1558454832381.md#pxc1522254582043">Location and Scale for Statistical Methods</a>.</dd><dd class="dd pd ddexpand">Default: 'false' (Each InputTable column is scaled separately.)</dd><dt class="dt pt dlterm">TargetColumns</dt><dd class="dd pd">[Optional] Specify the InputTable columns that contain the values to scale. The columns must contain numeric values between -1e<span><sup>308</sup></span> and 1e<span><sup>308</sup></span>.</dd><dd class="dd pd ddexpand">Default: All columns of the Statistic table (the output of the ScaleMap function in the Scale syntax) except stattype</dd><dt class="dt pt dlterm">Accumulate</dt><dd class="dd pd">[Optional] Specify the InputTable columns to copy to the output table.</dd><dt class="dt pt dlterm">Multiplier</dt><dd class="dd pd">[Optional] Specify one or more multiplying factors to apply to the input variables—<var class="keyword varname">multiplier</var> in this formula:
<p class="p"><var class="keyword varname">X'</var> = <var class="keyword varname">intercept</var> + <var class="keyword varname">multiplier</var> * (<var class="keyword varname">X</var> - <var class="keyword varname">location</var>)/<var class="keyword varname">scale</var></p>
<p class="p">If you specify only one <var class="keyword varname">multiplier</var>, it applies to all columns specified by the TargetColumns syntax element. If you specify multiple multiplying factors, each <var class="keyword varname">multiplier</var> applies to the corresponding input column. For example, the first <var class="keyword varname">multiplier</var> applies to the first column specified by the TargetColumns syntax element, the second <var class="keyword varname">multiplier</var> applies to the second input column, and so on.</p>
<p class="p">Default: <var class="keyword varname">multiplier</var> is 1.</p></dd><dt class="dt pt dlterm">Intercept</dt><dd class="dd pd">[Optional] Specify one or more addition factors incrementing the scaled results—<var class="keyword varname">intercept</var> in this formula:
<p class="p"><var class="keyword varname">X'</var> = <var class="keyword varname">intercept</var> + <var class="keyword varname">multiplier</var> * (<var class="keyword varname">X</var> - <var class="keyword varname">location</var>)/<var class="keyword varname">scale</var></p></dd><dd class="dd pd ddexpand">If you specify only one <var class="keyword varname">intercept</var>, it applies to all columns specified by the TargetColumns syntax element. If you specify multiple addition factors, each <var class="keyword varname">intercept</var> applies to the corresponding input column.</dd><dd class="dd pd ddexpand">This is the syntax of <var class="keyword varname">intercept</var>:<pre class="pre codeblock" xml:space="preserve"><code>[-]{<var class="keyword varname">number</var> | min | mean | max }</code></pre>
<p class="p">where <code class="ph codeph">min</code>, <code class="ph codeph">mean</code>, and <code class="ph codeph">max</code> are the scaled global minimum, mean, and maximum values of the corresponding columns.</p></dd><dd class="dd pd ddexpand">This is the formula for computing the scaled global minimum:
<p class="p"><var class="keyword varname">scaledmin</var> = (minX - <var class="keyword varname">location</var>)/<var class="keyword varname">scale</var></p></dd><dd class="dd pd ddexpand">The formulas for computing the scaled global mean and maximum are analogous to the preceding formula. For example, if <var class="keyword varname">intercept</var> is <code class="ph codeph">'- min'</code> and <var class="keyword varname">multiplier</var> is 1, this is the formula for computing the scaled result X' from the original value X:
<p class="p">X' = -<var class="keyword varname">scaledmin</var> + 1 * (X - <var class="keyword varname">location</var>/<var class="keyword varname">scale</var>)</p></dd><dd class="dd pd ddexpand">Default: <var class="keyword varname">intercept</var> is 0.</dd></dl></div></div><div class="topic reference nested2" aria-labelledby="ariaid-title4" topicindex="4" topicid="pxc1522254582043" xml:lang="en-us" lang="en-us" id="pxc1522254582043">
<h3 class="title topictitle3" id="ariaid-title4">Location and Scale for Statistical Methods</h3><div class="body refbody"><div class="section" id="pxc1522254582043__section_N10127_N1000C_N10001">
<p class="p">Two important parameters in scaling are location and scale. The values that the function uses for location and scale depend on the ScaleMethod syntax element value, as the following table shows. In the table, <var class="keyword varname">X</var> represents an input column, and <var class="keyword varname">X</var>mean, min<var class="keyword varname">X</var>, and max<var class="keyword varname">X</var> are the mean, minimum, and maximum values of the column <var class="keyword varname">X</var>.</p><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="pxc1522254582043__table_N1012E_N10128_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:14.285714285714285%" span="1"></col><col style="width:28.57142857142857%" span="1"></col><col style="width:57.14285714285714%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d280898e377" rowspan="1" colspan="1">ScaleMethod</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d280898e379" rowspan="1" colspan="1">Location</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d280898e381" rowspan="1" colspan="1">Scale</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e377" rowspan="1" colspan="1">mean</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e379" rowspan="1" colspan="1"><var class="keyword varname">X</var><span><sub><var class="keyword varname">mean</var></sub></span></td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d280898e381" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e377" rowspan="1" colspan="1">sum</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e379" rowspan="1" colspan="1">0</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d280898e381" rowspan="1" colspan="1">Σ <var class="keyword varname">X</var></td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e377" rowspan="1" colspan="1">ustd</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e379" rowspan="1" colspan="1">0</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d280898e381" rowspan="1" colspan="1">Standard deviation, calculated according to biased estimator of variance.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e377" rowspan="1" colspan="1">std</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e379" rowspan="1" colspan="1"><var class="keyword varname">X</var><span><sub><var class="keyword varname">mean</var></sub></span></td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d280898e381" rowspan="1" colspan="1">Standard deviation, calculated according to unbiased estimator of variance.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e377" rowspan="1" colspan="1">range</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e379" rowspan="1" colspan="1">min<var class="keyword varname">X</var></td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d280898e381" rowspan="1" colspan="1">max<var class="keyword varname">X</var> - min<var class="keyword varname">X</var></td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e377" rowspan="1" colspan="1">midrange</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e379" rowspan="1" colspan="1">(max<var class="keyword varname">X</var>+min<var class="keyword varname">X</var>)/2</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d280898e381" rowspan="1" colspan="1">(max<var class="keyword varname">X</var> - min<var class="keyword varname">X</var>)/2</td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d280898e377" rowspan="1" colspan="1">maxabs</td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d280898e379" rowspan="1" colspan="1">0</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e381" rowspan="1" colspan="1">Maximum of absolute value of X.</td></tr></tbody></table></div></div></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title5" topicindex="5" topicid="vns1507825822609" xml:lang="en-us" lang="en-us" id="vns1507825822609">
<h2 class="title topictitle2" id="ariaid-title5">Scale Input</h2><div class="body refbody"><div class="section" id="vns1507825822609__section_N10011_N1000E_N10001"><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="vns1507825822609__table_tjg_2ns_ycb" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:50%" span="1"></col><col style="width:50%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e479" rowspan="1" colspan="1">Table</th><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e481" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e479" rowspan="1" colspan="1">InputTable</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e481" rowspan="1" colspan="1">Has the same schema as <a href="aga1558454791029.md#zsy1507827835796">ScaleMap Input</a> table.</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e479" rowspan="1" colspan="1">Statistic</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e481" rowspan="1" colspan="1">Has the same schema as <a href="aga1558454791029.md#npl1507827847321">ScaleMap Output</a>.</td></tr></tbody></table></div></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title6" topicindex="6" topicid="xjh1507825829761" xml:lang="en-us" lang="en-us" id="xjh1507825829761">
<h2 class="title topictitle2" id="ariaid-title6">Scale Output</h2><div class="body refbody"><div class="section" id="xjh1507825829761__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Output Table Schema</h3>
<p class="p">If you specify multiple methods, the output table has a row for each input-row/method combination.</p><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="xjh1507825829761__table_N10014_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:20%" span="1"></col><col style="width:13.333333333333334%" span="1"></col><col style="width:66.66666666666666%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d280898e524" rowspan="1" colspan="1">Column</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d280898e526" rowspan="1" colspan="1">Data Type</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d280898e528" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e524" rowspan="1" colspan="1"><var class="keyword varname">accumulate_column</var></td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e526" rowspan="1" colspan="1">Any</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d280898e528" rowspan="1" colspan="1">[Column appears once for each specified <var class="keyword varname">accumulate_column</var>.] Column copied from InputTable.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e524" rowspan="1" colspan="1"><var class="keyword varname">target_column</var></td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d280898e526" rowspan="1" colspan="1">DOUBLE PRECISION</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d280898e528" rowspan="1" colspan="1">[Column appears once for each specified <var class="keyword varname">target_column</var>.] Normalized value.</td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d280898e524" rowspan="1" colspan="1">scalemethod</td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d280898e526" rowspan="1" colspan="1">VARCHAR</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e528" rowspan="1" colspan="1">[Column appears only if you specify multiple methods.] Scale method used to compute <var class="keyword varname">target_column</var> value. For possible values, see <a href="hal1558454832381.md#ebw1507825817022">Scale Syntax Elements</a>.</td></tr></tbody></table></div></div></div></div><div class="topic concept nested1" aria-labelledby="ariaid-title7" topicindex="7" topicid="vze1510711979876" xml:lang="en-us" lang="en-us" id="vze1510711979876">
<h2 class="title topictitle2" id="ariaid-title7">Scale Examples</h2><div class="topic reference nested2" aria-labelledby="ariaid-title8" topicindex="8" topicid="vgd1507825836871" xml:lang="en-us" lang="en-us" id="vgd1507825836871">
<h3 class="title topictitle3" id="ariaid-title8">Scale Example: ScaleMethod ('midrange')</h3><div class="body refbody"><div class="section" id="vgd1507825836871__section_N10011_N1000E_N10001">
<p class="p">This example scales (normalizes) input data using the midrange method and the default values for the syntax elements Intercept and Multiplier (0 and 1, respectively).</p></div><div class="section" id="vgd1507825836871__section_chl_vwn_xdb">
<h4 class="title sectiontitle">Input</h4>
<ul class="ul" id="vgd1507825836871__ul_d2x_cmq_j2b">
<li class="li">InputTable: scale_housing, which has data about houses
<p class="p">The type column has categorical data; the other columns have numerical data. The id column identifies the rows. The table has some NULL values.</p></li>
<li class="li">Statistic: created by calling the ScaleMap function inside the Scale call</li></ul><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="vgd1507825836871__table_xsm_2xn_xdb" class="table" frame="border" border="1" rules="all"><div class="caption"><span>InputTable: scale_housing</span></div><colgroup span="1"><col style="width:14.285714285714285%" span="1"></col><col style="width:14.285714285714285%" span="1"></col><col style="width:14.285714285714285%" span="1"></col><col style="width:14.285714285714285%" span="1"></col><col style="width:14.285714285714285%" span="1"></col><col style="width:14.285714285714285%" span="1"></col><col style="width:14.285714285714285%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e620" rowspan="1" colspan="1">type</th><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e622" rowspan="1" colspan="1">id</th><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e624" rowspan="1" colspan="1">price</th><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e626" rowspan="1" colspan="1">lotsize</th><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e628" rowspan="1" colspan="1">bedrooms</th><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e630" rowspan="1" colspan="1">bathrms</th><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e632" rowspan="1" colspan="1">stories</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e620" rowspan="1" colspan="1">classic</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e622" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e624" rowspan="1" colspan="1">42000</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e626" rowspan="1" colspan="1">5850</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e628" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e630" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e632" rowspan="1" colspan="1">2</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e620" rowspan="1" colspan="1">classic</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e622" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e624" rowspan="1" colspan="1"> </td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e626" rowspan="1" colspan="1">4000</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e628" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e630" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e632" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e620" rowspan="1" colspan="1">classic</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e622" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e624" rowspan="1" colspan="1">49500</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e626" rowspan="1" colspan="1">3060</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e628" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e630" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e632" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e620" rowspan="1" colspan="1">classic</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e622" rowspan="1" colspan="1">4</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e624" rowspan="1" colspan="1">60500</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e626" rowspan="1" colspan="1">6650</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e628" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e630" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e632" rowspan="1" colspan="1">2</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e620" rowspan="1" colspan="1">classic</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e622" rowspan="1" colspan="1">5</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e624" rowspan="1" colspan="1">61000</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e626" rowspan="1" colspan="1">6360</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e628" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e630" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e632" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e620" rowspan="1" colspan="1">bungalow</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e622" rowspan="1" colspan="1">6</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e624" rowspan="1" colspan="1">66000</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e626" rowspan="1" colspan="1">4160</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e628" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e630" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e632" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e620" rowspan="1" colspan="1">bungalow</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e622" rowspan="1" colspan="1">7</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e624" rowspan="1" colspan="1">66000</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e626" rowspan="1" colspan="1">3880</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e628" rowspan="1" colspan="1"> </td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e630" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e632" rowspan="1" colspan="1">2</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e620" rowspan="1" colspan="1">bungalow</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e622" rowspan="1" colspan="1">8</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e624" rowspan="1" colspan="1">69000</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e626" rowspan="1" colspan="1">4160</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e628" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e630" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e632" rowspan="1" colspan="1">3</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e620" rowspan="1" colspan="1">bungalow</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e622" rowspan="1" colspan="1">9</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e624" rowspan="1" colspan="1">83800</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e626" rowspan="1" colspan="1">4800</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e628" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e630" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e632" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e620" rowspan="1" colspan="1">bungalow</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e622" rowspan="1" colspan="1">10</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e624" rowspan="1" colspan="1">88500</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e626" rowspan="1" colspan="1">5500</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e628" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e630" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e632" rowspan="1" colspan="1">4</td></tr></tbody></table></div></div><div class="section" id="vgd1507825836871__section_xzw_vwn_xdb">
<h4 class="title sectiontitle">SQL Call</h4><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM Scale (
  ON ScaleMap (
  ON scale_housing
  USING
  TargetColumns ('[2:6]')
  MissValue ('omit')
  ) AS statistic DIMENSION
  ON scale_housing AS InputTable PARTITION BY ANY
  USING
  ScaleMethod ('midrange')
  Accumulate ('id')
) AS dt ORDER BY id,price,lotsize;</code></pre></div><div class="section" id="vgd1507825836871__section_e3n_wwn_xdb">
<h4 class="title sectiontitle">Output</h4>
<p class="p">The values in the Output Table are calculated as follows. As shown in the descriptions of the syntax elements Multiplier and Intercept, the formula for computing the scaled value X' from the input value X is: </p>
<p class="p"><var class="keyword varname">X'</var> = <var class="keyword varname">intercept</var> + <var class="keyword varname">multiplier</var> * (<var class="keyword varname">X</var> - <var class="keyword varname">location</var>)/<var class="keyword varname">scale</var></p>
<p class="p">In this example, ScaleMethod is “midrange”, so location and scale are calculated as shown (see <a href="hal1558454832381.md#pxc1522254582043">Location and Scale for Statistical Methods</a>):</p>
<ul class="ul" id="vgd1507825836871__ul_ur2_qxn_xdb">
<li class="li"><var class="keyword varname">location</var> = (max<var class="keyword varname">X</var>+min<var class="keyword varname">X</var>)/2</li>
<li class="li"><var class="keyword varname">scale</var> = (max<var class="keyword varname">X</var>-min<var class="keyword varname">X</var>)/2</li></ul>
<p class="p">In the equations above, max<var class="keyword varname">X</var> and min<var class="keyword varname">X</var> are the maximum and minimum values of column <var class="keyword varname">X</var> respectively.</p><div class="p">For example, consider row 1 of the price column in InputTable and the following output table:
<ul class="ul" id="vgd1507825836871__ul_gbv_qyt_fhb">
<li class="li">The value in the input table is 49500.</li>
<li class="li">In this example, <var class="keyword varname">intercept</var> and <var class="keyword varname">multiplier</var> take their default values, 0 and 1 respectively.</li>
<li class="li">max<var class="keyword varname">X</var> and min<var class="keyword varname">X</var> are the maximum and minimum values in the Price column of the input table. These values are 88500 and 42000 respectively.</li>
<li class="li">Location and scale are calculated using the equations shown above:
<ul class="ul" id="vgd1507825836871__ul_uws_qzt_fhb">
<li class="li"><var class="keyword varname">location</var> = (88500+42000)/2=65250</li>
<li class="li"><var class="keyword varname">scale</var> = (88500-42000)/2=23250</li></ul></li>
<li class="li">The scaled value shown in the output table is calculated as follows:
<p class="p"><var class="keyword varname">X'</var>=0 + 1 * (42000-65250)/23250 = -0.67741935</p></li></ul></div><pre class="pre screen" xml:space="preserve"> id price                lotsize              bedrooms bathrms stories             
 -- -------------------- -------------------- -------- ------- ------------------- 
  1                 -1.0   0.5543175487465181      1.0    -1.0 -0.3333333333333333
  3  -0.6774193548387096                 -1.0      1.0    -1.0                -1.0
  4 -0.20430107526881722                  1.0      1.0    -1.0 -0.3333333333333333
  5  -0.1827956989247312   0.8384401114206128     -1.0    -1.0                -1.0
  6  0.03225806451612903  -0.3871866295264624      1.0    -1.0                -1.0
  8  0.16129032258064516  -0.3871866295264624      1.0    -1.0  0.3333333333333333
  9   0.7978494623655914 -0.03064066852367688      1.0    -1.0                -1.0
 10                  1.0   0.3593314763231198      1.0     1.0                 1.0</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the attachment in the left sidebar.</p></div></div></div><div class="topic reference nested2" aria-labelledby="ariaid-title9" topicindex="9" topicid="cdp1507825856111" xml:lang="en-us" lang="en-us" id="cdp1507825856111">
<h3 class="title topictitle3" id="ariaid-title9">Scale Example: ScaleMethod ('midrange'), Intercept (-min)</h3><div class="body refbody"><div class="section" id="cdp1507825856111__section_N10011_N1000E_N10001">
<p class="p">This example is like <a href="hal1558454832381.md#vgd1507825836871">Scale Example: ScaleMethod ('midrange')</a> except that the Intercept syntax element has the value -min (where min is the global minimum value). This example also specifies a Multiplier value, but it is the default, as in <a href="hal1558454832381.md#vgd1507825836871">Scale Example: ScaleMethod ('midrange')</a>.</p></div><div class="section" id="cdp1507825856111__section_chl_vwn_xdb">
<h4 class="title sectiontitle">Input</h4>
<ul class="ul" id="cdp1507825856111__ul_h2c_ldd_kdb">
<li class="li">InputTable: scale_housing, as in <a href="hal1558454832381.md#vgd1507825836871">Scale Example: ScaleMethod ('midrange')</a></li>
<li class="li">Statistic: scale2, created with this statement:<pre class="pre codeblock" xml:space="preserve"><code>CREATE MULTISET table scale2 AS (
  SELECT * FROM ScaleMap (
  ON scale_housing
  USING
  TargetColumns ('[2:6]')
  MissValue ('omit')
) AS dt ) WITH DATA;</code></pre></li></ul></div><div class="section" id="cdp1507825856111__section_xzw_vwn_xdb">
<h4 class="title sectiontitle">SQL Call</h4><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM Scale (
  ON scale_housing AS InputTable PARTITION BY ANY
  ON scale2 AS statistic DIMENSION
  USING
  ScaleMethod ('midrange')
  Accumulate ('id')
  Intercept ('-min')
  Multiplier (1)
) AS dt ORDER BY id,price,lotsize;
</code></pre></div><div class="section" id="cdp1507825856111__section_e3n_wwn_xdb">
<h4 class="title sectiontitle">Output</h4>
<p class="p">In this example, the intercept syntax element is “-min”. As shown in the description of the Intercept syntax element, in this case the intercept is calculated as:</p>
<p class="p"><var class="keyword varname">scaledmin</var>=(min<var class="keyword varname">X</var>- <var class="keyword varname">location</var>)/<var class="keyword varname">scale</var></p>
<p class="p">The formula for computing the scaled value <var class="keyword varname">X'</var> from the input value <var class="keyword varname">X</var> becomes:</p>
<p class="p"><var class="keyword varname">X'</var>=-<var class="keyword varname">scaledmin</var>+<var class="keyword varname">multiplier</var>*(<var class="keyword varname">X</var>-<var class="keyword varname">location</var>)/<var class="keyword varname">scale</var></p>
<p class="p">ScaleMethod is “midrange”, so location and scale are the same as shown in <a href="hal1558454832381.md#vgd1507825836871">Scale Example: ScaleMethod ('midrange')</a>.</p><div class="p">For example, consider the value in the Price column in row id = 3:
<ul class="ul" id="cdp1507825856111__ul_hfr_dk5_fhb">
<li class="li">The value in the input table is 49500.</li>
<li class="li">In this example, <var class="keyword varname">multiplier</var> has its default value, 1.</li>
<li class="li"><var class="keyword varname">scaledmin</var> is calculated using the above equation:
<p class="p"><var class="keyword varname">scaledmin</var>= (min<var class="keyword varname">X</var>-<var class="keyword varname">location</var>)/<var class="keyword varname">scale</var>= (42000-65250)/23250= -1</p></li>
<li class="li">The scaled value shown in the output table is calculated as follows:
<p class="p"><var class="keyword varname">X'</var>=-<var class="keyword varname">scaledmin</var>+<var class="keyword varname">multiplier</var>*(<var class="keyword varname">X</var>-<var class="keyword varname">location</var>)/<var class="keyword varname">scale</var>= -(-1)+1* (49500-65250)/23250= 0.3225806</p></li></ul></div>
<p class="p"></p><pre class="pre screen" xml:space="preserve"> id price               lotsize            bedrooms bathrms stories            
 -- ------------------- ------------------ -------- ------- ------------------ 
  1                 0.0 1.5543175487465182      2.0     0.0 0.6666666666666667
  3 0.32258064516129037                0.0      2.0     0.0                0.0
  4  0.7956989247311828                2.0      2.0     0.0 0.6666666666666667
  5  0.8172043010752688 1.8384401114206128      0.0     0.0                0.0
  6   1.032258064516129 0.6128133704735377      2.0     0.0                0.0
  8  1.1612903225806452 0.6128133704735377      2.0     0.0 1.3333333333333333
  9  1.7978494623655914 0.9693593314763231      2.0     0.0                0.0
 10                 2.0 1.3593314763231197      2.0     2.0                2.0</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the attachment in the left sidebar.</p></div></div></div><div class="topic reference nested2" aria-labelledby="ariaid-title10" topicindex="10" topicid="zgm1507825887728" xml:lang="en-us" lang="en-us" id="zgm1507825887728">
<h3 class="title topictitle3" id="ariaid-title10">Scale Example: Use Training Data to Scale Test Data</h3><div class="body refbody"><div class="section" id="zgm1507825887728__section_N10011_N1000E_N10001">
<p class="p">This example creates statistics using ScaleMap on a training data set and then
                uses these statistics to scale a similar test data set.</p></div><div class="section" id="zgm1507825887728__section_chl_vwn_xdb">
<h4 class="title sectiontitle">Input</h4>
<ul class="ul" id="zgm1507825887728__ul_jv3_xzn_xdb">
<li class="li">Training data: scale_housing, as in <a href="hal1558454832381.md#vgd1507825836871">Scale Example: ScaleMethod ('midrange')</a></li>
<li class="li">Test data: scale_housing_test</li></ul><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="zgm1507825887728__table_usd_114_xdb" class="table" frame="border" border="1" rules="all"><div class="caption"><span>scale_housing_test</span></div><colgroup span="1"><col style="width:14.285714285714285%" span="1"></col><col style="width:14.285714285714285%" span="1"></col><col style="width:14.285714285714285%" span="1"></col><col style="width:14.285714285714285%" span="1"></col><col style="width:14.285714285714285%" span="1"></col><col style="width:14.285714285714285%" span="1"></col><col style="width:14.285714285714285%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e1118" rowspan="1" colspan="1">type</th><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e1120" rowspan="1" colspan="1">id</th><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e1122" rowspan="1" colspan="1">price</th><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e1124" rowspan="1" colspan="1">lotsize</th><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e1126" rowspan="1" colspan="1">bedrooms</th><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e1128" rowspan="1" colspan="1">bathrms</th><th class="entry cellrowborder" style="vertical-align:top;" id="d280898e1130" rowspan="1" colspan="1">stories</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1118" rowspan="1" colspan="1">bungalow</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1120" rowspan="1" colspan="1">11</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1122" rowspan="1" colspan="1">90000</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1124" rowspan="1" colspan="1">7200</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1126" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1128" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1130" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1118" rowspan="1" colspan="1">classic</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1120" rowspan="1" colspan="1">12</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1122" rowspan="1" colspan="1">30500</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1124" rowspan="1" colspan="1">3000</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1126" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1128" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1130" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1118" rowspan="1" colspan="1">classic</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1120" rowspan="1" colspan="1">13</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1122" rowspan="1" colspan="1">27000</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1124" rowspan="1" colspan="1">1700</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1126" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1128" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1130" rowspan="1" colspan="1">2</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1118" rowspan="1" colspan="1">classic</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1120" rowspan="1" colspan="1">14</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1122" rowspan="1" colspan="1">36000</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1124" rowspan="1" colspan="1">2880</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1126" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1128" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1130" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1118" rowspan="1" colspan="1">classic</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1120" rowspan="1" colspan="1">15</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1122" rowspan="1" colspan="1">37000</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1124" rowspan="1" colspan="1">3600</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1126" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1128" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d280898e1130" rowspan="1" colspan="1">1</td></tr></tbody></table></div></div><div class="section" id="zgm1507825887728__section_xzw_vwn_xdb">
<h4 class="title sectiontitle">SQL Call to Create Statistics Table from Training Data</h4><pre class="pre codeblock" xml:space="preserve"><code>CREATE multiset table scale_stat AS (
SELECT * FROM ScaleMap (
	ON scale_housing
	USING
	TargetColumns('[2:6]')
	MissValue ('omit')
  ) AS dt
) WITH DATA;</code></pre></div><div class="section" id="zgm1507825887728__section_nlf_wwn_xdb">
<h4 class="title sectiontitle">SQL Call to Scale Test Data</h4><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM Scale (
  ON scale_housing_test AS InputTable PARTITION BY ANY
  ON scale_stat AS statistic DIMENSION
  USING
  ScaleMethod ('midrange')
  Accumulate ('id')
) AS dt ORDER BY id,price,lotsize;</code></pre></div><div class="section" id="zgm1507825887728__section_e3n_wwn_xdb">
<h4 class="title sectiontitle">Output</h4><pre class="pre screen" xml:space="preserve"> id price               lotsize             bedrooms bathrms stories             
 -- ------------------- ------------------- -------- ------- ------------------- 
 11   1.064516129032258  1.3064066852367688      1.0     1.0                -1.0
 12 -1.4946236559139785  -1.033426183844011     -1.0    -1.0                -1.0
 13 -1.6451612903225807 -1.7576601671309193      1.0    -1.0 -0.3333333333333333
 14 -1.2580645161290323 -1.1002785515320335      1.0    -1.0                -1.0
 15 -1.2150537634408602 -0.6991643454038997     -1.0    -1.0                -1.0</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the attachment in the left sidebar.</p></div></div></div><div class="topic reference nested2" aria-labelledby="ariaid-title11" topicindex="11" topicid="qij1507825918896" xml:lang="en-us" lang="en-us" id="qij1507825918896">
<h3 class="title topictitle3" id="ariaid-title11">Scale Example: Multiple Methods</h3><div class="body refbody"><div class="section" id="qij1507825918896__section_N10011_N1000E_N10001">
<p class="p">This example scales input data using multiple methods—midrange, mean, maxabs, and range—in the same function call.</p></div><div class="section" id="qij1507825918896__section_chl_vwn_xdb">
<h4 class="title sectiontitle">Input</h4>
<ul class="ul" id="qij1507825918896__ul_oc3_rfd_kdb">
<li class="li">Training data: scale_housing, as in <a href="hal1558454832381.md#vgd1507825836871">Scale Example: ScaleMethod ('midrange')</a></li>
<li class="li">Test data: tmpScale, created with this statement:<pre class="pre codeblock" xml:space="preserve"><code>CREATE MULTISET table tmpScale AS (
  SELECT * FROM ScaleMap (
  ON scale_housing
  USING
  TargetColumns ('[2:6]')
  MissValue ('omit')
  ) AS dt 
) WITH DATA;</code></pre></li></ul></div><div class="section" id="qij1507825918896__section_xzw_vwn_xdb">
<h4 class="title sectiontitle">SQL Call</h4><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM Scale (
  ON scale_housing AS InputTable PARTITION BY ANY
  ON tmpScale AS statistic DIMENSION
  USING
  ScaleMethod ('midrange','mean','maxabs','range')
  Accumulate ('id')
) AS dt ORDER BY id,price,lotsize;</code></pre></div><div class="section" id="qij1507825918896__section_e3n_wwn_xdb">
<h4 class="title sectiontitle">Output</h4><pre class="pre screen" xml:space="preserve"> id price                lotsize              bedrooms           bathrms stories             scalemethod 
 -- -------------------- -------------------- ------------------ ------- ------------------- ----------- 
  1             -23037.5                782.5              0.125  -0.125               0.125 mean       
  1                 -1.0   0.5543175487465181                1.0    -1.0 -0.3333333333333333 midrange   
  1                  0.0   0.7771587743732591                1.0     0.0  0.3333333333333333 range      
  1   0.4745762711864407   0.8796992481203008                1.0     0.5                 0.5 maxabs     
  3             -15537.5              -2007.5              0.125  -0.125              -0.875 mean       
  3  -0.6774193548387096                 -1.0                1.0    -1.0                -1.0 midrange   
  3  0.16129032258064516                  0.0                1.0     0.0                 0.0 range      
  3    0.559322033898305  0.46015037593984964                1.0     0.5                0.25 maxabs     
  4              -4537.5               1582.5              0.125  -0.125               0.125 mean       
  4 -0.20430107526881722                  1.0                1.0    -1.0 -0.3333333333333333 midrange   
  4   0.3978494623655914                  1.0                1.0     0.0  0.3333333333333333 range      
  4   0.6836158192090396                  1.0                1.0     0.5                 0.5 maxabs     
  5              -4037.5               1292.5             -0.875  -0.125              -0.875 mean       
  5  -0.1827956989247312   0.8384401114206128               -1.0    -1.0                -1.0 midrange   
  5  0.40860215053763443   0.9192200557103064                0.0     0.0                 0.0 range      
  5   0.6892655367231638    0.956390977443609 0.6666666666666666     0.5                0.25 maxabs     
  6  0.03225806451612903  -0.3871866295264624                1.0    -1.0                -1.0 midrange   
  6   0.5161290322580645   0.3064066852367688                1.0     0.0                 0.0 range      
  6   0.7457627118644068   0.6255639097744361                1.0     0.5                0.25 maxabs     
  6                962.5               -907.5              0.125  -0.125              -0.875 mean       
  8  0.16129032258064516  -0.3871866295264624                1.0    -1.0  0.3333333333333333 midrange   
  8   0.5806451612903226   0.3064066852367688                1.0     0.0  0.6666666666666666 range      
  8   0.7796610169491526   0.6255639097744361                1.0     0.5                0.75 maxabs     
  8               3962.5               -907.5              0.125  -0.125               1.125 mean       
  9   0.7978494623655914 -0.03064066852367688                1.0    -1.0                -1.0 midrange   
  9   0.8989247311827957  0.48467966573816157                1.0     0.0                 0.0 range      
  9   0.9468926553672317   0.7218045112781954                1.0     0.5                0.25 maxabs     
  9              18762.5               -267.5              0.125  -0.125              -0.875 mean       
 10                  1.0   0.3593314763231198                1.0     1.0                 1.0 midrange   
 10                  1.0   0.6796657381615598                1.0     1.0                 1.0 range      
 10                  1.0   0.8270676691729323                1.0     1.0                 1.0 maxabs     
 10              23462.5                432.5              0.125   0.875               2.125 mean</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the attachment in the left sidebar.</p></div></div></div><div class="topic reference nested2" aria-labelledby="ariaid-title12" topicindex="12" topicid="rqs1507825946446" xml:lang="en-us" lang="en-us" id="rqs1507825946446">
<h3 class="title topictitle3" id="ariaid-title12">Scale Example: Use Scale Output in KMeans</h3><div class="body refbody"><div class="section" id="rqs1507825946446__section_N10011_N1000E_N10001">
<p class="p">This example uses the Scale function to scale data (using the maxabs method) before inputting it to the function KMeans, which outputs the centroids of the clusters in the data set. (<a href="gdl1558461123604.md#vqm1507162150338">KMeans</a> explains the reason for scaling data before inputting it to a distance-based analysis function like KMeans.)</p>
<p class="p">For an example of using Scale functions to convert input variables into z-scores for use with the Principal Components Analysis (PCA) functions, see <a href="cjv1558122294011.md#cpt1507736164224">PCA Example</a>.</p></div><div class="section" id="rqs1507825946446__section_chl_vwn_xdb">
<h4 class="title sectiontitle">Input</h4>
<ul class="ul" id="rqs1507825946446__ul_d2x_cmq_j2b">
<li class="li">InputTable: computers_train1, as in <a href="gdl1558461123604.md#mxc1525724133141">KMeans Example: NumClusters, UnpackColumns ('false')</a></li>
<li class="li">Statistic: created by calling the ScaleMap function inside the Scale call</li></ul></div><div class="section" id="rqs1507825946446__section_xzw_vwn_xdb">
<h4 class="title sectiontitle">SQL Call to Create Table of Scaled Data</h4><pre class="pre codeblock" xml:space="preserve"><code>CREATE MULTISET TABLE computers_normalized AS (
  SELECT * FROM Scale (
    ON computers_train1 AS InputTable PARTITION BY ANY
    ON (
      SELECT * FROM ScaleMap (
        ON computers_train1
        USING
        TargetColumns ('[1:5]')
        MissValue ('omit')
     ) AS dt1
   ) AS statistic DIMENSION
   USING
   ScaleMethod ('maxabs')
   Accumulate ('id')
  ) AS dt2
) WITH DATA;</code></pre></div><div class="section" id="rqs1507825946446__section_nlf_wwn_xdb">
<h4 class="title sectiontitle">SQL Call to Input Scaled Data to KMeans</h4><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM KMeans (
  ON computers_normalized AS InputTable
  OUT TABLE OutputTable (computers_centroid)
  USING
  NumClusters ('8')
  StopThreshold ('0.05')
  MaxIterNum ('10')
) AS dt;</code></pre>
<p class="p">The result of this query varies with each run. For repeatability, use the InitialSeeds syntax element instead of the NumClusters syntax element.</p></div><div class="section" id="rqs1507825946446__section_e3n_wwn_xdb">
<h4 class="title sectiontitle">Output</h4><pre class="pre screen" xml:space="preserve"> clusterid mean                                                                                       size withinss         
 --------- ------------------------------------------------------------------------------------------ ---- ---------------- 
 0         0.520659010288158 0.603350604490499 0.175562135044001 0.236183074265976 0.880829015544038  579  11.895719506972 
 1         0.305714191782829 0.306566440349176 0.0933333333333337 0.114997575169738 0.838135448165681 1031 6.96675718192228
 2         0.427463261652133 0.415340136054421 0.103356009070295 0.120535714285714 0.85734293717487   294  4.56252016477447
 3         0.509765433827703 0.371402439024389 0.323603368176539 0.558434959349594 0.859995217599231  492  18.7512162682813
 4         0.3816394266286 0.777139208173692 0.251070972450283 0.234594508301405 0.866877019006832    783  32.2577148011592
 5         0.333863472659545 0.593407407407406 0.137674074074075 0.131944444444444 0.846623093681913  675  12.2440968832223
 6         0.53893810202189 0.759645868465428 0.36271982654782 0.561129848229342 0.885031246900105    593  42.2744605421735
 7         0.404013881226436 0.32103386809269 0.195777947542653 0.247994652406417 0.854147006396138   561  7.9886712185662 
 --------- ------------------------------------------------------------------------------------------ ---- ----------------
           Converged : False                                                                                               
           Number of Iterations : 10                                                                                       
           Number of clusters : 8                                                                                          
           Successfully created Output table                                                                               
           Total_WithinSS : 136.94115656707123                                                                             
           Between_SS : 395.39586320118275</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the attachment in the left sidebar.</p></div></div></div></div></div></body></html>
