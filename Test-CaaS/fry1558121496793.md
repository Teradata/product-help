<html><head></head><body><div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="vio1507671576104" id="vio1507671576104"><h1 class="title topictitle1" id="ariaid-title1">LikelihoodRatioTest (ML Engine)</h1><div class="body conbody">
<p class="p">The LikelihoodRatioTest function performs the likelihood ratio test for two GLM models, output by the function <a href="eej1558472403086.md#hrv1507149150084">GLM</a>.</p>
<p class="p">A likelihood ratio test is useful for comparing the fit of a null model and an alternative model. The null model is a special case of the alternative model. The likelihood ratio expresses how many times more likely the data are under one model than the other. You can use the likelihood ratio or its logarithm to compute a p-value, or compare it to a critical value to decide whether to reject the null model in favor of the alternative model.</p></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="syw1507671736070" xml:lang="en-us" lang="en-us" id="syw1507671736070">
<h2 class="title topictitle2" id="ariaid-title2">LikelihoodRatioTest Syntax</h2><div class="body refbody"><div class="section" id="syw1507671736070__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Version <span>1.3</span></h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM LikelihoodRatioTest (
  ON (SELECT * FROM <var class="keyword varname">glm_output1</var> WHERE attribute = -1) AS FirstModel PARTITION BY 1
  ON (SELECT * FROM <var class="keyword varname">glm_output2</var> WHERE attribute = -1) AS SecondModel PARTITION BY 1
  USING
  Statistic ('<var class="keyword varname">predictor_column</var>')
  LogLik ('<var class="keyword varname">estimate_column</var>')
  ObsNum ('<var class="keyword varname">std_err_column</var>')
  ParamNum ('<var class="keyword varname">z_score_column</var>')
) AS <var class="keyword varname">alias</var>;</code></pre></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="fzk1507671747363" xml:lang="en-us" lang="en-us" id="fzk1507671747363">
<h2 class="title topictitle2" id="ariaid-title3">LikelihoodRatioTest Syntax Elements</h2><div class="body refbody"><div class="section" id="fzk1507671747363__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">Statistic</dt><dd class="dd pd">Specify the name of the input column that contains the name of the statistic. This column corresponds to the GLM output column predictor.</dd><dt class="dt pt dlterm">LogLik</dt><dd class="dd pd">Specify the name of the input column that contains the log-likelihood of the GLM model. This column corresponds to the GLM output column estimate.</dd><dt class="dt pt dlterm">ObsNum</dt><dd class="dd pd">Specify the name of the input column that contains the number of observations. This column corresponds to the GLM output column std_err.</dd><dt class="dt pt dlterm">ParamNum</dt><dd class="dd pd">Specify the name of the input column that contains the number of parameters (excluding the intercept). This column corresponds to the GLM output column z_score.</dd></dl></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title4" topicindex="4" topicid="ymd1507671766460" xml:lang="en-us" lang="en-us" id="ymd1507671766460">
<h2 class="title topictitle2" id="ariaid-title4">LikelihoodRatioTest Input</h2><div class="body refbody"><div class="section" id="ymd1507671766460__section_N1000E_N1000C_N10001">
<p class="p">The LikelihoodRatioTest requires two model tables, output by the function <a href="eej1558472403086.md#hrv1507149150084">GLM</a>. For their schema, see <a href="eej1558472403086.md#mbl1507149903431">GLM Output Table</a>.</p></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title5" topicindex="5" topicid="xho1507671782989" xml:lang="en-us" lang="en-us" id="xho1507671782989">
<h2 class="title topictitle2" id="ariaid-title5">LikelihoodRatioTest Output</h2><div class="body refbody"><div class="section" id="xho1507671782989__section_nym_qhw_xcb">
<h3 class="title sectiontitle">Output Table Schema</h3><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="xho1507671782989__table_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:20%" span="1"></col><col style="width:30%" span="1"></col><col style="width:50%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d323265e176" rowspan="1" colspan="1">Column</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d323265e178" rowspan="1" colspan="1">Data Type</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d323265e180" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d323265e176" rowspan="1" colspan="1">distribution</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d323265e178" rowspan="1" colspan="1">VARCHAR</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d323265e180" rowspan="1" colspan="1">Type of Chi-squared distribution used for test.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d323265e176" rowspan="1" colspan="1">statistic</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d323265e178" rowspan="1" colspan="1">DOUBLE PRECISION</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d323265e180" rowspan="1" colspan="1">Value of Chi-squared statistic.</td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d323265e176" rowspan="1" colspan="1">p_value</td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d323265e178" rowspan="1" colspan="1">DOUBLE PRECISION</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e180" rowspan="1" colspan="1">Corresponding p-value for Chi-squared statistic.</td></tr></tbody></table></div></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title6" topicindex="6" topicid="lnx1507671972960" xml:lang="en-us" lang="en-us" id="lnx1507671972960">
<h2 class="title topictitle2" id="ariaid-title6">LikelihoodRatioTest Example</h2><div class="body refbody"><div class="section" id="lnx1507671972960__section_N10011_N1000E_N10001">
<p class="p">This example uses the GLM function to create two models and then compares them with the LikelihoodRatioTest function.</p>
<p class="p">The first model, damage_glm1, is built using the independent variable "temp" and is the alternative hypothesis. </p>
<p class="p">The second model, damage_glm2, is the null model. It includes no independent variables and is built using only the intercept.</p>
<p class="p">The LikelihoodRatioTest query compares the two models to test whether "temp" is significant in the model.</p></div><div class="section" id="lnx1507671972960__section_xrv_lcg_n2b">
<h3 class="title sectiontitle">Input</h3>
<p class="p">This is the input table for the two GLM calls:</p><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="lnx1507671972960__table_prh_3dg_n2b" class="table" frame="border" border="1" rules="all"><div class="caption"><span>glm_tempdamage</span></div><colgroup span="1"><col style="width:33.33333333333333%" span="1"></col><col style="width:33.33333333333333%" span="1"></col><col style="width:33.33333333333333%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d323265e247" rowspan="1" colspan="1">id</th><th class="entry cellrowborder" style="vertical-align:top;" id="d323265e249" rowspan="1" colspan="1">temp</th><th class="entry cellrowborder" style="vertical-align:top;" id="d323265e251" rowspan="1" colspan="1">damage</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">53</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">2</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">57</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">3</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">58</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">4</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">63</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">5</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">66</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">6</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">67</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">7</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">67</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">8</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">67</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">9</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">68</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">10</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">69</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">11</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">70</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">12</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">70</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">13</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">70</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">14</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">70</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">15</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">72</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">16</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">73</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">17</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">75</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">18</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">75</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">19</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">76</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">20</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">76</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">21</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">78</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e247" rowspan="1" colspan="1">22</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e249" rowspan="1" colspan="1">79</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d323265e251" rowspan="1" colspan="1">0</td></tr></tbody></table></div>
<p class="p">This GLM call creates a model, damage_glm1, using the predictor variable temp (in the second row of damage_glm1):</p><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM GLM (
  ON glm_tempdamage AS InputTable
  <span>OUT TABLE OutputTable (damage_glm1)</span>
  USING
  TargetColumns ('damage','temp')
  Family ('LOGISTIC')
  Link ('CANONICAL')
  StopThreshold ('0.01')
  MaxIterNum ('10')
) AS dt;</code></pre><pre class="pre screen" xml:space="preserve"> predictor               estimate             std_error           z_score             p_value              significance                            
 ----------------------- -------------------- ------------------- ------------------- -------------------- --------------------------------------- 
 (Intercept)               14.805399894714355    7.44366979598999  1.9889899492263794  0.04670250043272972 *                                      
 temp                    -0.22856199741363525 0.10932400077581406 -2.0906898975372314 0.036556001752614975 *                                      
 ITERATIONS #                             4.0                 0.0                 0.0                  0.0 Number of Fisher Scoring iterations    
 ROWS #                                  22.0                 0.0                 0.0                  0.0 Number of rows                         
 Residual deviance          20.26799964904785                 0.0                 0.0                  0.0 on 20 degrees of freedom               
 Pearson goodness of fit   22.771900177001953                 0.0                 0.0                  0.0 on 20 degrees of freedom               
 AIC                        24.26799964904785                 0.0                 0.0                  0.0 Akaike information criterion           
 BIC                       26.450084686279297                 0.0                 0.0                  0.0 Bayesian information criterion         
 Wald Test                  6.039470195770264                 0.0                 0.0  0.04881415143609047 *                                      
 Dispersion parameter                     1.0                 0.0                 0.0                  0.0 Taken to be 1 for BINOMIAL and POISSON.
</pre><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM damage_glm1 ORDER BY 1;</code></pre><pre class="pre screen" xml:space="preserve"> attribute predictor   category estimate             std_err             z_score             p_value              significance family   
 --------- ----------- -------- -------------------- ------------------- ------------------- -------------------- ------------ -------- 
        -1 Loglik      NULL      -10.133999824523926                22.0                 1.0                  0.0 NULL         LOGISTIC
         0 (Intercept) NULL       14.805399894714355    7.44366979598999  1.9889899492263794  0.04670250043272972 *            LOGISTIC
         1 temp        NULL     -0.22856199741363525 0.10932400077581406 -2.0906898975372314 0.036556001752614975 *            LOGISTIC</pre>
<p class="p">This GLM call creates the null model, produced with only the intercept:</p><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM GLM (
  ON glm_tempdamage AS InputTable
  <span>OUT TABLE OutputTable(damage_glm2)
</span>
  USING
  InputColumns ('damage')
  Family ('LOGISTIC')
  LinkFunction ('CANONICAL')
  StopThreshold ('0.01')
  MaxIterNum ('10')
) AS dt;</code></pre><pre class="pre screen" xml:space="preserve"> predictor               estimate            std_error          z_score             p_value             significance                            
 ----------------------- ------------------- ------------------ ------------------- ------------------- --------------------------------------- 
 (Intercept)             -0.7621399760246277 0.4577380120754242 -1.6650199890136719 0.09590969979763031 .                                      
 ITERATIONS #                            3.0                0.0                 0.0                 0.0 Number of Fisher Scoring iterations    
 ROWS #                                 22.0                0.0                 0.0                 0.0 Number of rows                         
 Residual deviance          27.5216007232666                0.0                 0.0                 0.0 on 21 degrees of freedom               
 Pearson goodness of fit                22.0                0.0                 0.0                 0.0 on 21 degrees of freedom               
 AIC                        29.5216007232666                0.0                 0.0                 0.0 Akaike information criterion           
 BIC                      30.612642288208008                0.0                 0.0                 0.0 Bayesian information criterion         
 Wald Test                 2.772279977798462                0.0                 0.0 0.09590946137905121 .                                      
 Dispersion parameter                    1.0                0.0                 0.0                 0.0 Taken to be 1 for BINOMIAL and POISSON.</pre><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM damage_glm2 ORDER BY 1;</code></pre><pre class="pre screen" xml:space="preserve"> attribute predictor   category estimate            std_err            z_score             p_value             significance family   
 --------- ----------- -------- ------------------- ------------------ ------------------- ------------------- ------------ -------- 
        -1 Loglik      NULL       -13.7608003616333               22.0                 0.0                 0.0 NULL         LOGISTIC
         0 (Intercept) NULL     -0.7621399760246277 0.4577380120754242 -1.6650199890136719 0.09590969979763031 .            LOGISTIC</pre></div><div class="section" id="lnx1507671972960__section_drf_mcg_n2b">
<h3 class="title sectiontitle">SQL Call</h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM LikelihoodRatioTest (
  ON (SELECT * FROM damage_glm1 WHERE attribute = -1) AS FirstModel 
    PARTITION BY 1
  ON (SELECT * FROM damage_glm2 WHERE attribute = -1) AS SecondModel 
    PARTITION BY 1
  USING
  statistic('predictor')
  loglik('estimate')
  ObsNum('std_err')
  ParamNum('z_score')
) AS dt;</code></pre></div><div class="section" id="lnx1507671972960__section_zhq_mcg_n2b">
<h3 class="title sectiontitle">Output</h3><pre class="pre screen" xml:space="preserve"> distribution       statistic        p_value              
 ------------------ ---------------- -------------------- 
 Chi-squared 1 d.f. 7.25360107421875 0.007075897417962551</pre>
<p class="p">The reported chi square value (7.2536) corresponds to a p-value of 0.007, which is statistically significant at the 95% confidence level (p-value < 0.05). This shows that "temp" is significant in the model; that is, the alternative model, damage_glm1, cannot be rejected in favor of the null hypothesis model.</p>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the attachment in the left sidebar.</p></div></div></div></div></body></html>
