<html><head></head><body><div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="ybu1506532985988" id="ybu1506532985988"><h1 class="title topictitle1" id="ariaid-title1">DecisionForestEvaluator</h1><div class="body conbody">
<p class="p">The DecisionForestEvaluator function analyzes the model output by the <a href="nxn1558013161027.md#kmu1509310050627">DecisionForest</a> function and gives weights to the variables in the model. This function shows variable/attribute counts in each tree level, helping you to understand the importance of different variables in the decision-making process.</p></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="nox1506533036300" xml:lang="en-us" lang="en-us" id="nox1506533036300">
<h2 class="title topictitle2" id="ariaid-title2">DecisionForestEvaluator Syntax</h2><div class="body refbody"><div class="section" id="nox1506533036300__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Version <span>1.6</span></h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM DecisionForestEvaluator (
  <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span>
  [ USING NumLevels (<var class="keyword varname">number_of_levels</var>) ]
) AS <var class="keyword varname">alias</var>;</code></pre></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="tks1506533103890" xml:lang="en-us" lang="en-us" id="tks1506533103890">
<h2 class="title topictitle2" id="ariaid-title3">DecisionForestEvaluator Syntax Elements</h2><div class="body refbody"><div class="section" id="tks1506533103890__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">NumLevels</dt><dd class="dd pd">[Optional] Specify the number of levels to analyze.</dd><dd class="dd pd ddexpand">Default: 5</dd></dl></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title4" topicindex="4" topicid="wda1506533241362" xml:lang="en-us" lang="en-us" id="wda1506533241362">
<h2 class="title topictitle2" id="ariaid-title4">DecisionForestEvaluator Input</h2><div class="body refbody"><div class="section" id="wda1506533241362__section_N1000E_N1000C_N10001">
<p class="p">The input is the <a href="nxn1558013161027.md#pvm1506112840178">DecisionForest Output</a> OutputTable.</p></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title5" topicindex="5" topicid="oxl1506533304042" xml:lang="en-us" lang="en-us" id="oxl1506533304042">
<h2 class="title topictitle2" id="ariaid-title5">DecisionForestEvaluator Output</h2><div class="body refbody"><div class="section" id="oxl1506533304042__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Output Table Schema</h3><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="oxl1506533304042__table_N10014_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:17.543859649122805%" span="1"></col><col style="width:17.543859649122805%" span="1"></col><col style="width:64.91228070175438%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d277708e147" rowspan="1" colspan="1">Column</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d277708e149" rowspan="1" colspan="1">Data Type</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d277708e151" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d277708e147" rowspan="1" colspan="1">worker_ip</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d277708e149" rowspan="1" colspan="1">VARCHAR</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d277708e151" rowspan="1" colspan="1">IP address of worker that produced decision tree.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d277708e147" rowspan="1" colspan="1">task_index</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d277708e149" rowspan="1" colspan="1">INTEGER</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d277708e151" rowspan="1" colspan="1">Identifier of worker that produced decision tree.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d277708e147" rowspan="1" colspan="1">tree_num</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d277708e149" rowspan="1" colspan="1">INTEGER</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d277708e151" rowspan="1" colspan="1">Decision tree identifier.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d277708e147" rowspan="1" colspan="1">variable_col</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d277708e149" rowspan="1" colspan="1">VARCHAR</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d277708e151" rowspan="1" colspan="1">String representation of decision tree.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d277708e147" rowspan="1" colspan="1">level</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d277708e149" rowspan="1" colspan="1">INTEGER</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d277708e151" rowspan="1" colspan="1">Highest level of decision tree at which variable appears.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d277708e147" rowspan="1" colspan="1">cnt</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d277708e149" rowspan="1" colspan="1">INTEGER</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d277708e151" rowspan="1" colspan="1">Number of times variable is used as split node in decision tree.</td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d277708e147" rowspan="1" colspan="1">importance</td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d277708e149" rowspan="1" colspan="1">DOUBLE PRECISION</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d277708e151" rowspan="1" colspan="1">Importance statistics for each decision tree. To calculate overall importance of each variable, you must group by variable and then take average over all trees. Use this query, where <var class="keyword varname">n</var> is number of trees:<pre class="pre codeblock" xml:space="preserve"><code>SELECT <var class="keyword varname">variable</var>, sum(<var class="keyword varname">importance</var>)/<var class="keyword varname">n</var>
  FROM DecisionForestEvaluator (
    ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }
    [ NumLevels (<var class="keyword varname">number_of_levels</var>) ]
  ) GROUP BY <var class="keyword varname">variable</var>;</code></pre>
<p class="p">For classification tree:</p>
<p class="p">Function measures importance by Gini impurity decrease. For each split, this is the formula for decrease in Gini impurity:</p>
<p class="p"><var class="keyword varname">parent_node_Gini</var> - <var class="keyword varname">left_node_Gini</var> - <var class="keyword varname">right_node_Gini</var></p>
<p class="p">Function records decrease in Gini impurity resulting from each split and accumulates these values for all nodes in all trees in forest, individually for all variables. Specific algorithm for calculating importance is described in <cite class="cite">"A comparison of random forest and its Gini importance with standard chemometric methods for the feature selection and classification of spectral data," Bjoern H Menze, B Michael Kelm, Ralf Masuch, Uwe Himmelreich, Peter Bachert, Wolfgang Petrich and Fred A Hamprecht, 2009</cite> (<a class="xref" href="http://bmcbioinformatics.biomedcentral.com/articles/10.1186/1471-2105-10-213" target="_blank" title="" shape="rect">http://bmcbioinformatics.biomedcentral.com/articles/10.1186/1471-2105-10-213</a>).</p>
<p class="p">For regression tree:</p>
<p class="p">Function calculates importance using mean squared error, described in <cite class="cite">"Variable Importance Assessment in Regression: Linear Regression versus Random Forest," Ulrike GRÖMPING 2009</cite> (<a class="xref" href="https://prof.beuth-hochschule.de/fileadmin/prof/groemp/downloads/tast_2E2009_2E08199.pdf" target="_blank" title="" shape="rect">https://prof.beuth-hochschule.de/fileadmin/prof/groemp/downloads/tast_2E2009_2E08199.pdf</a>).</p></td></tr></tbody></table></div></div></div></div><div class="topic concept nested1" aria-labelledby="ariaid-title6" topicindex="6" topicid="fim1510618330509" xml:lang="en-us" lang="en-us" id="fim1510618330509">
<h2 class="title topictitle2" id="ariaid-title6">DecisionForestEvaluator Examples</h2><div class="body conbody">
<p class="p">These examples show how to use the DecisionForestEvaluator function to analyze the sample model output by DecisionForest.</p></div><div class="topic reference nested2" aria-labelledby="ariaid-title7" topicindex="7" topicid="jjo1510768527449" xml:lang="en-us" lang="en-us" id="jjo1510768527449">
<h3 class="title topictitle3" id="ariaid-title7">DecisionForestEvaluator Example: Evaluate Model</h3><div class="body refbody"><div class="section" id="jjo1510768527449__section_rjt_dm2_p2b">
<h4 class="title sectiontitle">Input</h4>
<ul class="ul" id="jjo1510768527449__ul_qkm_2m2_p2b">
<li class="li">Input table: rft_model, output by any of the <a href="nxn1558013161027.md#wxg1510615981946">DecisionForest Examples</a></li></ul></div><div class="section" id="jjo1510768527449__section_t5b_kzj_tdb">
<h4 class="title sectiontitle">SQL Call</h4><pre class="pre codeblock" xml:space="preserve"><code>SELECT task_index, tree_num, variable_col, level_col, cnt
  FROM DecisionForestEvaluator (
    ON rft_model
  ) AS dt ORDER BY 1,2;</code></pre></div><div class="section" id="jjo1510768527449__section_zjq_kzj_tdb">
<h4 class="title sectiontitle">Output</h4>
<p class="p">Two worker nodes construct 25 trees each. The function outputs the level and count of variables for each tree and worker at each node.</p><pre class="pre screen" xml:space="preserve"> task_index tree_num variable_col level_col cnt  
 ---------- -------- ------------ --------- ---- 
          1        0 gashw                4    1
          1        0 recroom              1    1
          1        0 stories              2    1
          1        0 prefarea             4    1
          1        0 bedrooms             3    1
          1        0 gashw             NULL NULL
          1        0 lotsize           NULL NULL
          1        0 bathrms           NULL NULL
          1        0 price             NULL NULL
          1        0 price                3    1
          1        0 stories           NULL NULL
          1        0 price                4    1
          1        0 lotsize              2    1
          1        0 price                0    1
          1        0 bathrms              4    1
          1        0 garagepl          NULL NULL
          1        0 recroom           NULL NULL
          1        0 prefarea          NULL NULL
          1        0 garagepl             3    2
          1        0 bedrooms          NULL NULL
          1        1 garagepl             1    1
          1        1 price             NULL NULL
          1        1 stories              0    1
          1        1 lotsize              1    1
          1        1 driveway             3    1
          1        1 lotsize              4    1
          1        1 prefarea          NULL NULL
          1        1 driveway          NULL NULL
          1        1 price                2    1
          1        1 garagepl          NULL NULL
          1        1 airco                4    1
          1        1 price                4    1
          1        1 stories           NULL NULL
          1        1 gashw                2    1
          1        1 lotsize              2    1
          1        1 lotsize              3    1
          1        1 airco             NULL NULL
          1        1 prefarea             4    1
          1        1 gashw             NULL NULL
          1        1 lotsize           NULL NULL
          1        2 price                0    1
          1        2 price                2    1
          1        2 price                3    1
          1        2 price             NULL NULL
          1        2 airco             NULL NULL
          1        2 garagepl          NULL NULL
          1        2 airco                1    1
          1        2 garagepl             2    1
          1        3 stories              2    1
          1        3 lotsize           NULL NULL
          1        3 prefarea             0    1
          1        3 price                4    1
          1        3 recroom           NULL NULL
          1        3 bedrooms             3    1
          1        3 price                3    2
          1        3 airco             NULL NULL
          1        3 price                2    1
          1        3 price                1    1
          1        3 price             NULL NULL
          1        3 prefarea          NULL NULL
          1        3 recroom              3    1
          1        3 lotsize              4    1
          1        3 bathrms           NULL NULL
          1        3 stories           NULL NULL
          1        3 bathrms              2    1
          1        3 airco                1    1
          1        3 bedrooms          NULL NULL
          1        4 fullbase             2    1
          1        4 stories           NULL NULL
          1        4 gashw             NULL NULL
          1        4 price                3    1
          1        4 lotsize           NULL NULL
          1        4 fullbase          NULL NULL
          1        4 gashw                1    1
          1        4 price                1    1
          1        4 bathrms           NULL NULL
          1        4 stories              4    1
          1        4 lotsize              0    1
          1        4 price                2    1
          1        4 bathrms              3    1
          1        4 price             NULL NULL
          1        5 airco             NULL NULL
          1        5 airco                4    1
          1        5 fullbase          NULL NULL
          1        5 lotsize           NULL NULL
          1        5 stories              4    1
          1        5 driveway             3    1
          1        5 price                4    1
          1        5 fullbase             1    1
          1        5 price             NULL NULL
          1        5 stories           NULL NULL
          1        5 prefarea             4    1
          1        5 prefarea          NULL NULL
          1        5 stories              1    1
          1        5 garagepl             2    1
          1        5 garagepl             3    1
          1        5 lotsize              0    1
          1        5 garagepl          NULL NULL
          1        5 driveway          NULL NULL
          1        5 price                2    3
          1        6 prefarea          NULL NULL
          1        6 price             NULL NULL
          1        6 price                4    2
          1        6 lotsize              3    1
          1        6 garagepl             2    1
          1        6 garagepl             0    1
          1        6 airco             NULL NULL
          1        6 bathrms           NULL NULL
          1        6 stories              2    1
          1        6 airco                4    1
          1        6 lotsize              4    1
          1        6 bedrooms          NULL NULL
          1        6 prefarea             4    1
          1        6 price                1    1
          1        6 prefarea             2    1
          1        6 bedrooms             3    1
          1        6 gashw             NULL NULL
          1        6 gashw                3    1
          1        6 garagepl          NULL NULL
          1        6 fullbase             3    2
          1        6 recroom              4    1
          1        6 fullbase          NULL NULL
          1        6 bathrms              4    2
          1        6 bathrms              1    1
          1        6 stories           NULL NULL
          1        6 lotsize           NULL NULL
          1        6 recroom           NULL NULL
          1        7 price                4    1
          1        7 stories              3    1
          1        7 airco                2    1
          1        7 fullbase             4    1
          1        7 bathrms              0    1
          1        7 price                2    2
          1        7 bathrms           NULL NULL
          1        7 stories           NULL NULL
          1        7 fullbase          NULL NULL
          1        7 price             NULL NULL
          1        7 bathrms              1    1
          1        7 price                3    2
          1        7 price                1    1
          1        7 airco             NULL NULL
          1        8 bedrooms             3    1
          1        8 airco                0    1
          1        8 lotsize              2    1
          1        8 bathrms              4    1
          1        8 stories              1    1
          1        8 garagepl             4    1
          1        8 recroom              2    1
          1        8 airco             NULL NULL
          1        8 garagepl             2    1
          1        8 driveway             1    1
          1        8 bathrms           NULL NULL
          1        8 garagepl          NULL NULL
          1        8 price             NULL NULL
          1        8 price                2    1
          1        8 gashw             NULL NULL
          1        8 recroom           NULL NULL
          1        8 stories           NULL NULL
          1        8 driveway          NULL NULL
          1        8 lotsize           NULL NULL
          1        8 price                3    1
          1        8 price                4    3
          1        8 bedrooms          NULL NULL
          1        8 recroom              4    1
          1        8 gashw                3    1
          1        8 lotsize              3    2
          1        9 gashw             NULL NULL
          1        9 airco             NULL NULL
          1        9 recroom              3    1
          1        9 garagepl             4    1
          1        9 garagepl          NULL NULL
          1        9 lotsize              3    2
          1        9 lotsize              4    2
          1        9 price                4    1
          1        9 bedrooms             2    1
          1        9 stories              1    1
          1        9 recroom           NULL NULL
          1        9 price             NULL NULL
          1        9 fullbase          NULL NULL
          1        9 stories           NULL NULL
          1        9 bedrooms          NULL NULL
          1        9 fullbase             4    1
          1        9 price                3    1
          1        9 airco                2    1
          1        9 lotsize              2    1
          1        9 gashw                1    1
          1        9 lotsize              0    1
          1        9 lotsize           NULL NULL
          1       10 price                2    1
          1       10 price                1    1
          1       10 garagepl             0    1
          1       10 lotsize              3    1
          1       10 driveway             2    1
          1       10 prefarea             2    1
          1       10 bedrooms             3    2
          1       10 driveway          NULL NULL
          1       10 bedrooms          NULL NULL
          1       10 bathrms           NULL NULL
          1       10 garagepl          NULL NULL
          1       10 stories           NULL NULL
          1       10 price             NULL NULL
          1       10 bathrms              1    1
          1       10 lotsize           NULL NULL
          1       10 prefarea          NULL NULL
          1       10 price                4    2
          1       10 stories              4    2
          1       10 lotsize              4    1
          1       11 price                3    1
          1       11 garagepl             2    1
          1       11 airco                2    1
          1       11 prefarea          NULL NULL
          1       11 airco             NULL NULL
          1       11 garagepl          NULL NULL
          1       11 price             NULL NULL
          1       11 stories           NULL NULL
          1       11 lotsize              1    1
          1       11 price                0    1
          1       11 stories              3    1
          1       11 lotsize              4    2
          1       11 prefarea             3    1
          1       11 lotsize           NULL NULL
          1       12 prefarea             3    1
          1       12 fullbase             2    1
          1       12 price                4    1
          1       12 stories              4    1
          1       12 stories           NULL NULL
          1       12 garagepl          NULL NULL
          1       12 price                0    1
          1       12 price             NULL NULL
          1       12 lotsize              1    1
          1       12 airco             NULL NULL
          1       12 garagepl             4    1
          1       12 prefarea          NULL NULL
          1       12 fullbase          NULL NULL
          1       12 lotsize           NULL NULL
          1       12 airco                3    1
          1       12 price                3    1
          1       12 lotsize              2    1
          1       13 price             NULL NULL
          1       13 price                4    3
          1       13 fullbase          NULL NULL
          1       13 bedrooms          NULL NULL
          1       13 prefarea             4    1
          1       13 garagepl          NULL NULL
          1       13 stories           NULL NULL
          1       13 prefarea          NULL NULL
          1       13 lotsize           NULL NULL
          1       13 lotsize              4    3
          1       13 price                3    1
          1       13 lotsize              3    2
          1       13 garagepl             2    1
          1       13 stories              2    1
          1       13 lotsize              1    2
          1       13 stories              3    1
          1       13 fullbase             2    1
          1       13 bedrooms             0    1
          1       13 garagepl             3    1
          1       14 lotsize              1    1
          1       14 garagepl             2    1
          1       14 bathrms              3    1
          1       14 bedrooms             4    3
          1       14 bedrooms          NULL NULL
          1       14 lotsize              4    2
          1       14 airco                0    1
          1       14 garagepl          NULL NULL
          1       14 bathrms           NULL NULL
          1       14 price             NULL NULL
          1       14 lotsize              2    1
          1       14 lotsize              3    1
          1       14 airco             NULL NULL
          1       14 lotsize           NULL NULL
          1       14 prefarea             3    1
          1       14 price                3    3
          1       14 prefarea             2    1
          1       14 bedrooms             1    1
          1       14 prefarea          NULL NULL
          1       15 airco             NULL NULL
          1       15 bathrms           NULL NULL
          1       15 bathrms              0    1
          1       15 lotsize              3    1
          1       15 recroom              4    1
          1       15 lotsize              2    1
          1       15 garagepl          NULL NULL
          1       15 price             NULL NULL
          1       15 recroom           NULL NULL
          1       15 driveway          NULL NULL
          1       15 lotsize           NULL NULL
          1       15 lotsize              4    1
          1       15 airco                3    1
          1       15 garagepl             3    1
          1       15 airco                2    1
          1       15 price                1    1
          1       15 driveway             1    1
          1       16 garagepl          NULL NULL
          1       16 lotsize              1    1
          1       16 price                3    1
          1       16 price             NULL NULL
          1       16 price                2    1
          1       16 price                0    1
          1       16 lotsize           NULL NULL
          1       16 garagepl             2    1
          1       17 price                4    2
          1       17 driveway             2    1
          1       17 lotsize           NULL NULL
          1       17 bedrooms          NULL NULL
          1       17 lotsize              3    1
          1       17 airco                4    1
          1       17 airco                1    1
          1       17 fullbase             4    1
          1       17 price                2    1
          1       17 fullbase             3    1
          1       17 airco             NULL NULL
          1       17 fullbase          NULL NULL
          1       17 garagepl             3    1
          1       17 price             NULL NULL
          1       17 garagepl          NULL NULL
          1       17 bedrooms             2    2
          1       17 garagepl             0    1
          1       17 driveway          NULL NULL
          1       17 price                3    2
          1       17 lotsize              1    1
          1       18 driveway             2    1
          1       18 lotsize              0    1
          1       18 price                2    1
          1       18 lotsize              3    3
          1       18 lotsize              4    4
          1       18 bedrooms             3    1
          1       18 fullbase             3    1
          1       18 fullbase             4    1
          1       18 bathrms           NULL NULL
          1       18 stories           NULL NULL
          1       18 driveway          NULL NULL
          1       18 lotsize           NULL NULL
          1       18 bathrms              4    1
          1       18 bedrooms             4    1
          1       18 price                3    1
          1       18 stories              2    1
          1       18 bedrooms             2    1
          1       18 airco                1    1
          1       18 bathrms              1    1
          1       18 prefarea             4    1
          1       18 bedrooms          NULL NULL
          1       18 prefarea          NULL NULL
          1       18 fullbase          NULL NULL
          1       18 airco             NULL NULL
          1       18 price             NULL NULL
          1       19 airco                3    1
          1       19 price                2    1
          1       19 price             NULL NULL
          1       19 lotsize           NULL NULL
          1       19 bedrooms          NULL NULL
          1       19 airco             NULL NULL
          1       19 bathrms           NULL NULL
          1       19 bedrooms             4    1
          1       19 price                3    1
          1       19 lotsize              2    1
          1       19 price                0    1
          1       19 bathrms              1    1
          1       20 garagepl             2    1
          1       20 stories              2    1
          1       20 garagepl             3    1
          1       20 lotsize              4    2
          1       20 prefarea             3    1
          1       20 price                4    1
          1       20 stories           NULL NULL
          1       20 prefarea          NULL NULL
          1       20 price             NULL NULL
          1       20 airco             NULL NULL
          1       20 fullbase          NULL NULL
          1       20 bathrms           NULL NULL
          1       20 garagepl          NULL NULL
          1       20 recroom           NULL NULL
          1       20 lotsize           NULL NULL
          1       20 recroom              4    1
          1       20 airco                3    1
          1       20 price                2    1
          1       20 fullbase             1    1
          1       20 bathrms              0    1
          1       20 price                1    1
          1       21 airco             NULL NULL
          1       21 prefarea          NULL NULL
          1       21 garagepl             1    1
          1       21 bathrms           NULL NULL
          1       21 price                3    1
          1       21 driveway          NULL NULL
          1       21 airco                4    2
          1       21 bathrms              3    1
          1       21 lotsize              2    1
          1       21 price                0    1
          1       21 stories              3    1
          1       21 prefarea             2    1
          1       21 lotsize           NULL NULL
          1       21 stories           NULL NULL
          1       21 garagepl          NULL NULL
          1       21 driveway             4    1
          1       21 price             NULL NULL
          1       22 airco             NULL NULL
          1       22 fullbase          NULL NULL
          1       22 bathrms           NULL NULL
          1       22 garagepl          NULL NULL
          1       22 price             NULL NULL
          1       22 stories           NULL NULL
          1       22 driveway          NULL NULL
          1       22 lotsize           NULL NULL
          1       22 bedrooms          NULL NULL
          1       22 fullbase             4    1
          1       22 price                4    1
          1       22 driveway             4    1
          1       22 bathrms              3    1
          1       22 price                3    4
          1       22 stories              3    1
          1       22 airco                2    1
          1       22 fullbase             2    1
          1       22 garagepl             2    1
          1       22 lotsize              2    1
          1       22 lotsize              1    1
          1       22 bedrooms             1    1
          1       22 lotsize              0    1
          1       23 fullbase          NULL NULL
          1       23 stories           NULL NULL
          1       23 bathrms              4    1
          1       23 price                4    2
          1       23 bathrms              3    2
          1       23 bedrooms             2    1
          1       23 stories              0    1
          1       23 bedrooms          NULL NULL
          1       23 price                2    1
          1       23 garagepl             1    1
          1       23 fullbase             2    1
          1       23 airco             NULL NULL
          1       23 airco                1    1
          1       23 price             NULL NULL
          1       23 garagepl          NULL NULL
          1       23 price                3    2
          1       23 bathrms           NULL NULL
          1       24 stories              2    1
          1       24 recroom              3    1
          1       24 bathrms              2    1
          1       24 stories              4    1
          1       24 airco             NULL NULL
          1       24 prefarea             4    1
          1       24 airco                3    1
          1       24 recroom           NULL NULL
          1       24 stories           NULL NULL
          1       24 prefarea          NULL NULL
          1       24 bathrms           NULL NULL
          1       24 price             NULL NULL
          1       24 price                4    2
          1       24 prefarea             3    1
          1       24 price                3    1
          1       24 garagepl             1    1
          1       24 price                0    1
          1       24 garagepl          NULL NULL
          2        0 fullbase          NULL NULL
          2        0 garagepl          NULL NULL
          2        0 price             NULL NULL
          2        0 stories           NULL NULL
          2        0 driveway          NULL NULL
          2        0 lotsize           NULL NULL
          2        0 price                4    2
          2        0 stories              4    1
          2        0 fullbase             3    1
          2        0 garagepl             3    1
          2        0 lotsize              2    1
          2        0 driveway             1    1
          2        0 price                0    1
          2        1 airco             NULL NULL
          2        1 prefarea          NULL NULL
          2        1 fullbase          NULL NULL
          2        1 garagepl          NULL NULL
          2        1 price             NULL NULL
          2        1 stories           NULL NULL
          2        1 recroom           NULL NULL
          2        1 garagepl             3    1
          2        1 lotsize           NULL NULL
          2        1 bedrooms          NULL NULL
          2        1 prefarea             4    1
          2        1 price                4    1
          2        1 stories              4    1
          2        1 bedrooms             4    1
          2        1 airco                3    1
          2        1 prefarea             3    1
          2        1 price                3    1
          2        1 price                2    2
          2        1 stories              2    1
          2        1 fullbase             1    1
          2        1 bedrooms             1    1
          2        1 recroom              0    1
          2        1 lotsize              4    1
          2        2 prefarea          NULL NULL
          2        2 fullbase          NULL NULL
          2        2 bathrms           NULL NULL
          2        2 garagepl          NULL NULL
          2        2 price             NULL NULL
          2        2 stories           NULL NULL
          2        2 recroom           NULL NULL
          2        2 driveway          NULL NULL
          2        2 lotsize           NULL NULL
          2        2 bedrooms          NULL NULL
          2        2 fullbase             4    1
          2        2 garagepl             4    2
          2        2 stories              4    2
          2        2 lotsize              4    1
          2        2 bedrooms             4    1
          2        2 prefarea             3    1
          2        2 price                3    1
          2        2 recroom              3    1
          2        2 lotsize              3    1
          2        2 bathrms              2    1
          2        2 price                2    1
          2        2 bedrooms             2    2
          2        2 bathrms              1    1
          2        2 driveway             1    1
          2        2 lotsize              0    1
          2        3 price             NULL NULL
          2        3 driveway          NULL NULL
          2        3 bedrooms          NULL NULL
          2        3 price                4    1
          2        3 bedrooms             3    1
          2        3 price                2    2
          2        3 price                1    1
          2        3 bedrooms             1    1
          2        3 driveway             0    1
          2        4 price             NULL NULL
          2        4 price                1    1
          2        4 price                0    1
          2        5 prefarea          NULL NULL
          2        5 fullbase          NULL NULL
          2        5 bathrms           NULL NULL
          2        5 price             NULL NULL
          2        5 stories           NULL NULL
          2        5 recroom           NULL NULL
          2        5 lotsize           NULL NULL
          2        5 prefarea             4    1
          2        5 price                4    2
          2        5 price                3    2
          2        5 stories              3    2
          2        5 lotsize              3    1
          2        5 bathrms              2    2
          2        5 price                2    1
          2        5 lotsize              2    1
          2        5 stories              1    1
          2        5 recroom              1    1
          2        5 fullbase             0    1
          2        6 fullbase          NULL NULL
          2        6 bathrms           NULL NULL
          2        6 garagepl          NULL NULL
          2        6 price             NULL NULL
          2        6 driveway          NULL NULL
          2        6 gashw             NULL NULL
          2        6 price                4    2
          2        6 garagepl             4    1
          2        6 bathrms              3    2
          2        6 price                3    1
          2        6 price                2    2
          2        6 gashw                2    1
          2        6 fullbase             1    2
          2        6 driveway             0    1
          2        7 airco             NULL NULL
          2        7 fullbase          NULL NULL
          2        7 bathrms           NULL NULL
          2        7 garagepl          NULL NULL
          2        7 price             NULL NULL
          2        7 stories           NULL NULL
          2        7 recroom           NULL NULL
          2        7 driveway          NULL NULL
          2        7 gashw             NULL NULL
          2        7 lotsize           NULL NULL
          2        7 bedrooms          NULL NULL
          2        7 airco                4    1
          2        7 fullbase             4    1
          2        7 stories              4    1
          2        7 driveway             4    1
          2        7 bathrms              3    1
          2        7 price                3    1
          2        7 gashw                3    1
          2        7 lotsize              3    1
          2        7 price                2    2
          2        7 lotsize              2    1
          2        7 bedrooms             2    1
          2        7 garagepl             1    1
          2        7 lotsize              1    1
          2        7 recroom              0    1
          2        8 price             NULL NULL
          2        8 price                1    1
          2        8 price                0    1
          2        9 price             NULL NULL
          2        9 price                1    1
          2        9 price                0    1
          2       10 garagepl             4    1
          2       10 stories              4    1
          2       10 lotsize              4    2
          2       10 fullbase             3    2
          2       10 bathrms              3    1
          2       10 garagepl             3    1
          2       10 price                3    1
          2       10 lotsize              3    1
          2       10 airco                2    1
          2       10 garagepl             2    2
          2       10 lotsize              2    1
          2       10 prefarea             1    1
          2       10 lotsize              1    1
          2       10 bedrooms             0    1
          2       10 airco             NULL NULL
          2       10 prefarea          NULL NULL
          2       10 fullbase          NULL NULL
          2       10 bathrms           NULL NULL
          2       10 garagepl          NULL NULL
          2       10 price             NULL NULL
          2       10 stories           NULL NULL
          2       10 lotsize           NULL NULL
          2       10 bedrooms          NULL NULL
          2       10 prefarea             4    1
          2       10 bathrms              4    1
          2       10 price                4    2
          2       11 airco             NULL NULL
          2       11 bathrms           NULL NULL
          2       11 price             NULL NULL
          2       11 stories           NULL NULL
          2       11 lotsize           NULL NULL
          2       11 price                4    1
          2       11 stories              4    1
          2       11 bathrms              3    1
          2       11 stories              3    1
          2       11 price                2    1
          2       11 lotsize              2    1
          2       11 airco                1    1
          2       11 price                0    1
          2       12 fullbase          NULL NULL
          2       12 garagepl          NULL NULL
          2       12 price             NULL NULL
          2       12 lotsize           NULL NULL
          2       12 bedrooms          NULL NULL
          2       12 price                4    2
          2       12 garagepl             4    1
          2       12 lotsize              4    1
          2       12 garagepl             3    1
          2       12 lotsize              3    1
          2       12 bedrooms             3    1
          2       12 price                2    1
          2       12 lotsize              2    2
          2       12 fullbase             1    1
          2       12 price                1    1
          2       12 bedrooms             0    1
          2       13 airco             NULL NULL
          2       13 fullbase          NULL NULL
          2       13 bathrms           NULL NULL
          2       13 garagepl          NULL NULL
          2       13 price             NULL NULL
          2       13 stories           NULL NULL
          2       13 gashw             NULL NULL
          2       13 lotsize           NULL NULL
          2       13 price                4    2
          2       13 stories              4    1
          2       13 gashw                4    1
          2       13 airco                3    1
          2       13 fullbase             3    1
          2       13 price                3    2
          2       13 garagepl             2    1
          2       13 price                2    1
          2       13 lotsize              2    2
          2       13 fullbase             1    1
          2       13 bathrms              1    1
          2       13 lotsize              0    1
          2       14 price             NULL NULL
          2       14 price                1    1
          2       14 price                0    1
          2       15 price                0    1
          2       15 fullbase          NULL NULL
          2       15 garagepl          NULL NULL
          2       15 price             NULL NULL
          2       15 stories           NULL NULL
          2       15 lotsize           NULL NULL
          2       15 price                4    1
          2       15 garagepl             4    1
          2       15 price                3    1
          2       15 stories              3    1
          2       15 fullbase             2    1
          2       15 lotsize              2    1
          2       15 lotsize              1    1
          2       16 airco             NULL NULL
          2       16 prefarea          NULL NULL
          2       16 fullbase          NULL NULL
          2       16 garagepl          NULL NULL
          2       16 price             NULL NULL
          2       16 stories           NULL NULL
          2       16 recroom           NULL NULL
          2       16 lotsize           NULL NULL
          2       16 bedrooms          NULL NULL
          2       16 airco                4    1
          2       16 prefarea             4    1
          2       16 price                4    2
          2       16 stories              4    2
          2       16 garagepl             3    1
          2       16 price                3    1
          2       16 lotsize              3    1
          2       16 bedrooms             3    1
          2       16 prefarea             2    1
          2       16 fullbase             2    1
          2       16 price                2    1
          2       16 stories              2    1
          2       16 lotsize              1    2
          2       16 recroom              0    1
          2       17 airco             NULL NULL
          2       17 prefarea          NULL NULL
          2       17 fullbase          NULL NULL
          2       17 bathrms           NULL NULL
          2       17 garagepl          NULL NULL
          2       17 price             NULL NULL
          2       17 gashw             NULL NULL
          2       17 lotsize           NULL NULL
          2       17 bedrooms          NULL NULL
          2       17 prefarea             4    1
          2       17 garagepl             4    2
          2       17 price                4    2
          2       17 lotsize              4    1
          2       17 airco                3    1
          2       17 prefarea             3    1
          2       17 price                3    2
          2       17 bedrooms             3    1
          2       17 bathrms              2    1
          2       17 lotsize              2    1
          2       17 gashw                2    1
          2       17 fullbase             1    1
          2       17 lotsize              1    1
          2       17 lotsize              0    1
          2       18 airco             NULL NULL
          2       18 bathrms           NULL NULL
          2       18 garagepl          NULL NULL
          2       18 price             NULL NULL
          2       18 recroom           NULL NULL
          2       18 stories           NULL NULL
          2       18 lotsize           NULL NULL
          2       18 gashw             NULL NULL
          2       18 recroom              4    1
          2       18 stories              4    1
          2       18 lotsize              4    1
          2       18 airco                3    1
          2       18 price                3    1
          2       18 gashw                3    1
          2       18 garagepl             2    1
          2       18 recroom              2    1
          2       18 bathrms              1    1
          2       18 price                0    1
          2       19 airco             NULL NULL
          2       19 bathrms           NULL NULL
          2       19 garagepl          NULL NULL
          2       19 price             NULL NULL
          2       19 recroom           NULL NULL
          2       19 gashw             NULL NULL
          2       19 lotsize           NULL NULL
          2       19 bedrooms          NULL NULL
          2       19 bathrms              4    1
          2       19 price                4    1
          2       19 gashw                4    1
          2       19 garagepl             3    1
          2       19 price                3    2
          2       19 lotsize              3    2
          2       19 bedrooms             3    1
          2       19 airco                2    1
          2       19 garagepl             2    1
          2       19 price                2    1
          2       19 bedrooms             2    1
          2       19 bathrms              1    1
          2       19 recroom              1    1
          2       19 lotsize              0    1
          2       20 airco                4    1
          2       20 price                4    1
          2       20 airco                2    1
          2       20 lotsize              4    1
          2       20 garagepl             2    1
          2       20 fullbase             1    1
          2       20 prefarea             0    1
          2       20 bedrooms             4    1
          2       20 airco             NULL NULL
          2       20 prefarea          NULL NULL
          2       20 fullbase          NULL NULL
          2       20 bathrms              3    1
          2       20 bathrms           NULL NULL
          2       20 garagepl          NULL NULL
          2       20 garagepl             3    1
          2       20 price                2    1
          2       20 price             NULL NULL
          2       20 lotsize           NULL NULL
          2       20 price                3    1
          2       20 gashw             NULL NULL
          2       20 bedrooms          NULL NULL
          2       20 lotsize              3    1
          2       20 gashw                2    1
          2       20 bathrms              1    1
          2       21 fullbase             3    1
          2       21 stories              3    1
          2       21 lotsize              3    2
          2       21 bedrooms             3    1
          2       21 bathrms              2    1
          2       21 stories              2    1
          2       21 lotsize              2    1
          2       21 bedrooms             2    1
          2       21 garagepl             1    1
          2       21 lotsize              1    1
          2       21 prefarea          NULL NULL
          2       21 fullbase          NULL NULL
          2       21 bathrms           NULL NULL
          2       21 driveway             0    1
          2       21 price             NULL NULL
          2       21 garagepl          NULL NULL
          2       21 stories           NULL NULL
          2       21 driveway          NULL NULL
          2       21 lotsize           NULL NULL
          2       21 bedrooms          NULL NULL
          2       21 prefarea             4    2
          2       21 price                4    1
          2       21 garagepl             4    1
          2       21 stories              4    1
          2       22 prefarea          NULL NULL
          2       22 airco             NULL NULL
          2       22 fullbase          NULL NULL
          2       22 bathrms           NULL NULL
          2       22 garagepl          NULL NULL
          2       22 price             NULL NULL
          2       22 stories           NULL NULL
          2       22 recroom           NULL NULL
          2       22 driveway          NULL NULL
          2       22 lotsize           NULL NULL
          2       22 bedrooms          NULL NULL
          2       22 garagepl             4    1
          2       22 price                4    2
          2       22 recroom              4    2
          2       22 bedrooms             4    1
          2       22 prefarea             3    2
          2       22 airco                3    1
          2       22 price                3    1
          2       22 driveway             3    2
          2       22 fullbase             2    1
          2       22 stories              2    1
          2       22 lotsize              2    2
          2       22 bathrms              1    1
          2       22 driveway             1    1
          2       22 bedrooms             0    1
          2       23 bathrms           NULL NULL
          2       23 garagepl          NULL NULL
          2       23 price             NULL NULL
          2       23 driveway          NULL NULL
          2       23 lotsize           NULL NULL
          2       23 fullbase             4    1
          2       23 price                4    3
          2       23 driveway             4    1
          2       23 lotsize              4    2
          2       23 prefarea             3    1
          2       23 bathrms              3    1
          2       23 garagepl             3    1
          2       23 price                3    1
          2       23 lotsize              3    1
          2       23 bathrms              2    1
          2       23 garagepl             2    1
          2       23 lotsize              2    2
          2       23 lotsize              1    2
          2       23 airco                0    1
          2       23 prefarea          NULL NULL
          2       23 airco             NULL NULL
          2       23 fullbase          NULL NULL
          2       24 price             NULL NULL
          2       24 stories           NULL NULL
          2       24 bedrooms          NULL NULL
          2       24 price                3    1
          2       24 price                2    1
          2       24 bedrooms             2    1
          2       24 stories              1    1
          2       24 price                0    1</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the attachment in the left sidebar.</p></div></div></div><div class="topic reference nested2" aria-labelledby="ariaid-title8" topicindex="8" topicid="qsi1525803057217" xml:lang="en-us" lang="en-us" id="qsi1525803057217">
<h3 class="title topictitle3" id="ariaid-title8">DecisionForestEvaluator Example: Variable Importance</h3><div class="body refbody"><div class="section" id="qsi1525803057217__section_qwc_yxd_ygb">
<p class="p">To calculate overall importance of each variable, you must group the importance reported in the output table by variable and then sum it over all trees. This query in this example shows how to make that calculation.</p></div><div class="section" id="qsi1525803057217__section_rjt_dm2_p2b">
<h4 class="title sectiontitle">Input</h4>
<ul class="ul" id="qsi1525803057217__ul_qkm_2m2_p2b">
<li class="li">Input table: rft_model, output by any of the <a href="nxn1558013161027.md#wxg1510615981946">DecisionForest Examples</a></li></ul></div><div class="section" id="qsi1525803057217__section_sn1_v1k_tdb">
<h4 class="title sectiontitle">SQL Call</h4>
<p class="p">In the DecisionForest call that output rft_model, the value of NumTrees was 50; therefore, to calculate the average importance over all trees, you divide by 50 in this SQL call.</p><pre class="pre codeblock" xml:space="preserve"><code>SELECT variable_col, SUM(importance)/<span>50</span>
  FROM DecisionForestEvaluator (
   ON rft_model
  ) AS dt GROUP BY variable_col ORDER BY 2 DESC;</code></pre></div><div class="section" id="qsi1525803057217__section_chp_v1k_tdb">
<h4 class="title sectiontitle">Output</h4>
<p class="p">Variable importance is in descending order. The top three variables for modeling and prediction are price, lotsize, and bedrooms.</p><pre class="pre screen" xml:space="preserve"> variable_col IMPORTANCE            
 ------------ --------------------- 
 price           1.1017219750593588
 lotsize        0.19450014830967055
 stories        0.07803449640626983
 garagepl        0.0707099673003008
 bathrms        0.05317959159771956
 bedrooms       0.03751879285236206
 fullbase      0.016919484930740327
 recroom       0.013867229822064479
 prefarea      0.013447400310153186
 gashw         0.006672653654901577
 airco        -0.016537859271588122
 driveway     -0.048091065686165085
</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the attachment in the left sidebar.</p></div></div></div></div></div></body></html>
