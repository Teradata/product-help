<html><head></head><body><div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="usr1507669357350" id="usr1507669357350"><h1 class="title topictitle1" id="ariaid-title1">Linear Regression</h1><div class="body conbody">
<p class="p">The Linear Regression function is composed of the functions LinReg and LinRegInternal. LinRegInternal takes a data set and outputs a linear regression model. LinReg takes the linear regression model and outputs its coefficients. The 0th coefficient corresponds to the slope intercept.</p>
<p class="p">The output of the Linear Regression function can be input to the <a href="lds1558531774578.md#vol1507670147308">LinRegPredict</a> function (as the model table).</p></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="lzg1507669513896" xml:lang="en-us" lang="en-us" id="lzg1507669513896">
<h2 class="title topictitle2" id="ariaid-title2">Linear Regression Syntax</h2><div class="body refbody"><div class="section" id="lzg1507669513896__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">LinReg version 1.5, LinRegInternal version 2.4</h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM LinReg (
  ON LinRegInternal (
    <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span>
  ) AS <var class="keyword varname">alias_1</var> PARTITION BY 1
) AS <var class="keyword varname">alias_2</var>;</code></pre>
<p class="p">PARTITION BY 1 is required because all input data must be submitted to one worker.</p></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="jmr1507669528089" xml:lang="en-us" lang="en-us" id="jmr1507669528089">
<h2 class="title topictitle2" id="ariaid-title3">Linear Regression Input</h2><div class="body refbody"><div class="section" id="jmr1507669528089__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">LinRegInternal Input Table Schema</h3><div class="note note" id="jmr1507669528089__note_N10068_N10024_N10001"><span><b>Note</b></span><div class="notebody">It is important to normalize the input variables before calling this function. For details, see <a href="qnw1570800778984.md">Normalized Input</a>.</div></div><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="jmr1507669528089__table_N10014_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:17.24137931034483%" span="1"></col><col style="width:13.793103448275861%" span="1"></col><col style="width:68.96551724137932%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d200195e119" rowspan="1" colspan="1">Column</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d200195e121" rowspan="1" colspan="1">Data Type</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d200195e123" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d200195e119" rowspan="1" colspan="1"><var class="keyword varname">x_component_i</var></td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d200195e121" rowspan="1" colspan="1">SMALLINT, INTEGER, BIGINT, or DOUBLE PRECISION</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d200195e123" rowspan="1" colspan="1">[Column appears once for each x component.] Value of <var class="keyword varname">i</var>th data point component.</td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d200195e119" rowspan="1" colspan="1"><var class="keyword varname">y_component</var></td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d200195e121" rowspan="1" colspan="1">SMALLINT, INTEGER, BIGINT, or DOUBLE PRECISION</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e123" rowspan="1" colspan="1">Values of y component of data point. This column must be last.</td></tr></tbody></table></div>
<p class="p"><span>The function ignores input rows with NULL values.</span></p></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title4" topicindex="4" topicid="yrs1507669547158" xml:lang="en-us" lang="en-us" id="yrs1507669547158">
<h2 class="title topictitle2" id="ariaid-title4">Linear Regression Output</h2><div class="body refbody"><div class="section" id="yrs1507669547158__section_f4v_f3w_xcb">
<h3 class="title sectiontitle">LinReg Output Table Schema</h3><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="yrs1507669547158__table_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:20%" span="1"></col><col style="width:13.333333333333334%" span="1"></col><col style="width:66.66666666666666%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d200195e168" rowspan="1" colspan="1">Column</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d200195e170" rowspan="1" colspan="1">Data Type</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d200195e172" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d200195e168" rowspan="1" colspan="1">coefficient_name</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d200195e170" rowspan="1" colspan="1">INTEGER</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d200195e172" rowspan="1" colspan="1">Name of created coefficient of linear regression model.</td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d200195e168" rowspan="1" colspan="1">value_col</td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d200195e170" rowspan="1" colspan="1">DOUBLE PRECISION</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e172" rowspan="1" colspan="1">Value of created coefficient of linear regression model.</td></tr></tbody></table></div></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title5" topicindex="5" topicid="dpf1507669699844" xml:lang="en-us" lang="en-us" id="dpf1507669699844">
<h2 class="title topictitle2" id="ariaid-title5">Linear Regression Example</h2><div class="body refbody"><div class="section" id="dpf1507669699844__section_N10011_N1000E_N10001">
<p class="p">This example uses the LinRegInternal and LinReg functions to find the coefficients of the variables that determine the selling price of a home in a given neighborhood. The response variable, SellingPrice (the selling price of the house in dollars) is modeled on these independent (predictor) variables:</p>
<ul class="ul">
<li class="li">House size (in square feet)</li>
<li class="li">Lot size (in square feet)</li>
<li class="li">Number of bedrooms</li>
<li class="li">Whether the kitchen counter is granite (0 or 1)</li>
<li class="li">Whether the bathrooms are upgraded (0 or 1)</li></ul></div><div class="section" id="dpf1507669699844__section_jsq_khj_4db">
<h3 class="title sectiontitle">Input</h3><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="dpf1507669699844__table_mcf_shj_4db" class="table" frame="border" border="1" rules="all"><div class="caption"><span>housing_data</span></div><colgroup span="1"><col style="width:16.666666666666664%" span="1"></col><col style="width:16.666666666666664%" span="1"></col><col style="width:16.666666666666664%" span="1"></col><col style="width:16.666666666666664%" span="1"></col><col style="width:16.666666666666664%" span="1"></col><col style="width:16.666666666666664%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d200195e237" rowspan="1" colspan="1">housesize</th><th class="entry cellrowborder" style="vertical-align:top;" id="d200195e239" rowspan="1" colspan="1">lotsize</th><th class="entry cellrowborder" style="vertical-align:top;" id="d200195e241" rowspan="1" colspan="1">bedrooms</th><th class="entry cellrowborder" style="vertical-align:top;" id="d200195e243" rowspan="1" colspan="1">granite</th><th class="entry cellrowborder" style="vertical-align:top;" id="d200195e245" rowspan="1" colspan="1">upgradedbathroom</th><th class="entry cellrowborder" style="vertical-align:top;" id="d200195e247" rowspan="1" colspan="1">sellingprice</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e237" rowspan="1" colspan="1">2397</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e239" rowspan="1" colspan="1">14156</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e241" rowspan="1" colspan="1">4</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e243" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e245" rowspan="1" colspan="1">0</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e247" rowspan="1" colspan="1">189900</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e237" rowspan="1" colspan="1">2200</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e239" rowspan="1" colspan="1">9600</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e241" rowspan="1" colspan="1">4</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e243" rowspan="1" colspan="1">0</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e245" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e247" rowspan="1" colspan="1">195000</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e237" rowspan="1" colspan="1">4032</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e239" rowspan="1" colspan="1">10150</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e241" rowspan="1" colspan="1">5</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e243" rowspan="1" colspan="1">0</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e245" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e247" rowspan="1" colspan="1">197900</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e237" rowspan="1" colspan="1">3529</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e239" rowspan="1" colspan="1">9191</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e241" rowspan="1" colspan="1">6</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e243" rowspan="1" colspan="1">0</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e245" rowspan="1" colspan="1">0</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e247" rowspan="1" colspan="1">205000</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e237" rowspan="1" colspan="1">3247</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e239" rowspan="1" colspan="1">10061</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e241" rowspan="1" colspan="1">5</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e243" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e245" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e247" rowspan="1" colspan="1">224900</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e237" rowspan="1" colspan="1">2983</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e239" rowspan="1" colspan="1">9365</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e241" rowspan="1" colspan="1">5</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e243" rowspan="1" colspan="1">0</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e245" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e247" rowspan="1" colspan="1">230000</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e237" rowspan="1" colspan="1">3536</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e239" rowspan="1" colspan="1">19994</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e241" rowspan="1" colspan="1">6</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e243" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e245" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e247" rowspan="1" colspan="1">325000</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e237" rowspan="1" colspan="1">3198</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e239" rowspan="1" colspan="1">9669</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e241" rowspan="1" colspan="1">5</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e243" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e245" rowspan="1" colspan="1">1</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d200195e247" rowspan="1" colspan="1"> </td></tr></tbody></table></div>
<p class="p">The LinRegInternal function skips the last row of housing_data because it contains a NULL value.</p></div><div class="section" id="dpf1507669699844__section_hr1_lhj_4db">
<h3 class="title sectiontitle">SQL Call</h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM LinReg (
  ON LinRegInternal (
  ON housing_data
  ) PARTITION BY 1
) AS dt;</code></pre></div><div class="section" id="dpf1507669699844__section_b1n_lhj_4db">
<h3 class="title sectiontitle">Output</h3><pre class="pre screen" xml:space="preserve"> coefficient_name value_col           
 ---------------- ------------------- 
 Intercept        -21739.296665036818
 housesize        -26.930783509145726
 lotsize             6.33452410459345
 bedrooms           44293.76058418322
 granite            7140.676293495372
 upgradedbathroom   43179.19988882635</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the attachment in the left sidebar.</p></div></div></div></div></body></html>
