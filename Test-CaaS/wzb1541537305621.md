<html><head></head><body><div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="guu1507914686828" id="guu1507914686828"><h1 class="title topictitle1" id="ariaid-title1">SVMSparsePredict_MLE</h1><div class="body conbody">
<p class="p">The SVMSparsePredict_MLE function takes the model output by the function <a href="kjz1558533259127.md#swn1507915086903">SVMSparse</a> and a set of test samples (in sparse format) and outputs a prediction for each sample.</p></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="gpz1507914838043" xml:lang="en-us" lang="en-us" id="gpz1507914838043">
<h2 class="title topictitle2" id="ariaid-title2">SVMSparsePredict_MLE Syntax</h2><div class="body refbody"><div class="section" id="gpz1507914838043__section_N10024_N10021_N10001">
<h3 class="title sectiontitle">Version 1.3</h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM SVMSparsePredict_MLE (
  ON <var class="keyword varname">sample_table</var> AS InputTable PARTITION BY <var class="keyword varname">id_column</var> 
  ON <var class="keyword varname">model_table</var> AS Model DIMENSION
  USING
  IDColumn ('<var class="keyword varname">id_column</var>')
  AttributeNameColumn ('<var class="keyword varname">attribute_name_column</var>')
  [ AttributeValueColumn ('<var class="keyword varname">attribute_value_column</var>') ]
  <code class="ph codeph">[ Accumulate ({ '<var class="keyword varname">accumulate_column</var>' | <var class="keyword varname">accumulate_column_range</var> }[,...]) ]</code>
  [ OutputClassNum (<var class="keyword varname">output_class_number</var>) ]
) AS <var class="keyword varname">alias</var>;</code></pre></div></div><div class="related-links"><div class="linklistheader"><p></p><b>Related Information</b></div>
<ul class="linklist linklist"><div class="linklistmember"><a href="ndv1557782188375.md">Column Specification Syntax Elements</a></div><div class="linklistmember"><a href="eta1543514041091.md">Comments in Queries</a></div></ul></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="qth1507914842941" xml:lang="en-us" lang="en-us" id="qth1507914842941">
<h2 class="title topictitle2" id="ariaid-title3">SVMSparsePredict_MLE Syntax Elements</h2><div class="body refbody"><div class="section" id="qth1507914842941__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">IDColumn</dt><dd class="dd pd">Specify the name of the InputTable column that contains the identifiers of the test samples. The <var class="keyword varname">sample_table</var> must be partitioned by this column.</dd><dt class="dt pt dlterm">AttributeNameColumn</dt><dd class="dd pd">Specify the name of the InputTable column that contains the attributes of the test samples.</dd><dt class="dt pt dlterm">AttributeValueColumn</dt><dd class="dd pd">[Optional] Specify the name of the InputTable column that contains the attribute values.</dd><dd class="dd pd ddexpand">Default behavior: Each attribute has the value 1.</dd><dt class="dt pt dlterm">Accumulate</dt><dd class="dd pd">[Optional] Specify the names of the InputTable columns to copy to the output table.</dd><dt class="dt pt dlterm">OutputClassNum</dt><dd class="dd pd">[Optional] Valid only for multiple-class models. Specify the number of class labels to appear in the output table, with its corresponding prediction confidence.</dd><dd class="dd pd ddexpand">Default: 1</dd></dl></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title4" topicindex="4" topicid="ryw1507914846654" xml:lang="en-us" lang="en-us" id="ryw1507914846654">
<h2 class="title topictitle2" id="ariaid-title4">SVMSparsePredict_MLE Input</h2><div class="body refbody"><div class="section" id="ryw1507914846654__section_N1000E_N1000C_N10001"><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="ryw1507914846654__table_usy_pxw_xcb" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:50%" span="1"></col><col style="width:50%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d60246e196" rowspan="1" colspan="1">Table</th><th class="entry cellrowborder" style="vertical-align:top;" id="d60246e198" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e196" rowspan="1" colspan="1">InputTable</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e198" rowspan="1" colspan="1">Sample table. Contains test data.</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e196" rowspan="1" colspan="1">Model</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e198" rowspan="1" colspan="1"><a href="kjz1558533259127.md#lhs1507915494399">SVMSparse Output</a> table.</td></tr></tbody></table></div></div><div class="section" id="ryw1507914846654__section_ktl_wxw_xcb">
<h3 class="title sectiontitle">InputTable Schema</h3><div class="note note" id="ryw1507914846654__note_N10068_N10024_N10001"><span><b>Note</b></span><div class="notebody">It is important to normalize the input variables before calling this function. For details, see <a href="qnw1570800778984.md">Normalized Input</a>.</div></div>
<p class="p"><span>The table can have additional columns, but the function ignores them.</span></p><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="ryw1507914846654__table_jsg_nqs_nw" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:20%" span="1"></col><col style="width:40%" span="1"></col><col style="width:40%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d60246e239" rowspan="1" colspan="1">Column</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d60246e241" rowspan="1" colspan="1">Data Type</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d60246e243" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d60246e239" rowspan="1" colspan="1"><var class="keyword varname">id_column</var></td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d60246e241" rowspan="1" colspan="1">INTEGER, SMALLINT, BIGINT, NUMERIC, VARCHAR, VARBYTE(<var class="keyword varname">n</var>), or BLOB</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d60246e243" rowspan="1" colspan="1">Test sample identifier.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d60246e239" rowspan="1" colspan="1"><var class="keyword varname">attribute_name_column</var></td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d60246e241" rowspan="1" colspan="1">INTEGER, SMALLINT, BIGINT, or VARCHAR</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d60246e243" rowspan="1" colspan="1">Test sample attribute.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d60246e239" rowspan="1" colspan="1"><var class="keyword varname">attribute_value_column</var></td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d60246e241" rowspan="1" colspan="1">INTEGER, SMALLINT, BIGINT, or NUMERIC</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d60246e243" rowspan="1" colspan="1">Attribute value.</td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d60246e239" rowspan="1" colspan="1"><var class="keyword varname">accumulate_column</var></td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d60246e241" rowspan="1" colspan="1">Any</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e243" rowspan="1" colspan="1">[Column appears once for each specified <var class="keyword varname">accumulate_column</var>.] <span>Column to copy to output table.</span></td></tr></tbody></table></div></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title5" topicindex="5" topicid="jdr1507914850116" xml:lang="en-us" lang="en-us" id="jdr1507914850116">
<h2 class="title topictitle2" id="ariaid-title5">SVMSparsePredict_MLE Output</h2><div class="body refbody"><div class="section" id="jdr1507914850116__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Output Table Schema</h3>
<p class="p">The table has the predicted class of each test sample.</p><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="jdr1507914850116__table_N10014_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:22.22222222222222%" span="1"></col><col style="width:33.33333333333333%" span="1"></col><col style="width:44.44444444444444%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d60246e307" rowspan="1" colspan="1">Column</th><th class="entry nocellnorowborder" style="vertical-align:top;" id="d60246e309" rowspan="1" colspan="1">Data Type</th><th class="entry cell-norowborder" style="vertical-align:top;" id="d60246e311" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d60246e307" rowspan="1" colspan="1"><var class="keyword varname">id_column</var></td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d60246e309" rowspan="1" colspan="1">INTEGER, SMALLINT, BIGINT, NUMERIC, VARCHAR, or BLOB</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d60246e311" rowspan="1" colspan="1">Test sample identifier.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d60246e307" rowspan="1" colspan="1">predict_value</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d60246e309" rowspan="1" colspan="1">VARCHAR</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d60246e311" rowspan="1" colspan="1">Predicted class of test sample.</td></tr><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d60246e307" rowspan="1" colspan="1">predict_confidence</td><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d60246e309" rowspan="1" colspan="1">DOUBLE PRECISION</td><td class="entry cell-norowborder" style="vertical-align:top;" headers="d60246e311" rowspan="1" colspan="1">Prediction confidence, a value between 0 and 1, computed by formula that follows this table. The higher the value, the more dependable the prediction.</td></tr><tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d60246e307" rowspan="1" colspan="1"><var class="keyword varname">accumulate_column</var></td><td class="entry row-nocellborder" style="vertical-align:top;" headers="d60246e309" rowspan="1" colspan="1">Any</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e311" rowspan="1" colspan="1">[Column appears once for each specified <var class="keyword varname">accumulate_column</var>.] Column copied from InputTable.</td></tr></tbody></table></div></div><div class="section" id="jdr1507914850116__section_nc3_kyw_xcb">
<h3 class="title sectiontitle">Formula for predict_confidence</h3><div class="fig fignone" id="jdr1507914850116__fig_p5v_wzb_tw"><div class="caption"></div><br clear="none"></br><img class="image" id="jdr1507914850116__image_okd_xzb_tw" src="zkd1466005487590.png" alt="Formula for predict_confidence, used by Machine Learning Engine function SVMSparsePredict_MLE"></img><br clear="none"></br></div>
<p class="p">where <var class="keyword varname">i</var> is the attribute id, <var class="keyword varname">x</var><span><sub>i</sub></span> is the value of attributes in the sample, and <var class="keyword varname">w</var><span><sub>i</sub></span> is the weight of attribute <var class="keyword varname">i</var>.</p></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title6" topicindex="6" topicid="ccl1510769296925" xml:lang="en-us" lang="en-us" id="ccl1510769296925">
<h2 class="title topictitle2" id="ariaid-title6">SVMSparsePredict_MLE Example</h2><div class="body refbody"><div class="section" id="ccl1510769296925__section_pvc_mph_zdb">
<h3 class="title sectiontitle">Input</h3>
<ul class="ul" id="ccl1510769296925__ul_ybv_qph_zdb">
<li class="li">InputTable: svm_iris_input_test</li>
<li class="li">Model: svm_iris_model, the <a href="kjz1558533259127.md#vhr1510769089605">SVMSparse Example</a> output table</li></ul><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="ccl1510769296925__table_tyz_wph_zdb" class="table" frame="border" border="1" rules="all"><div class="caption"><span>svm_iris_input_test</span></div><colgroup span="1"><col style="width:25%" span="1"></col><col style="width:25%" span="1"></col><col style="width:25%" span="1"></col><col style="width:25%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d60246e423" rowspan="1" colspan="1">id</th><th class="entry cellrowborder" style="vertical-align:top;" id="d60246e425" rowspan="1" colspan="1">species</th><th class="entry cellrowborder" style="vertical-align:top;" id="d60246e427" rowspan="1" colspan="1">attribute</th><th class="entry cellrowborder" style="vertical-align:top;" id="d60246e429" rowspan="1" colspan="1">value1</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e423" rowspan="1" colspan="1">5</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e425" rowspan="1" colspan="1">setosa</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e427" rowspan="1" colspan="1">sepal_length</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e429" rowspan="1" colspan="1">5.0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e423" rowspan="1" colspan="1">5</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e425" rowspan="1" colspan="1">setosa</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e427" rowspan="1" colspan="1">sepal_width</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e429" rowspan="1" colspan="1">3.6</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e423" rowspan="1" colspan="1">5</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e425" rowspan="1" colspan="1">setosa</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e427" rowspan="1" colspan="1">petal_length</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e429" rowspan="1" colspan="1">1.4</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e423" rowspan="1" colspan="1">5</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e425" rowspan="1" colspan="1">setosa</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e427" rowspan="1" colspan="1">petal_width</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e429" rowspan="1" colspan="1">0.2</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e423" rowspan="1" colspan="1">10</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e425" rowspan="1" colspan="1">setosa</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e427" rowspan="1" colspan="1">sepal_length</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e429" rowspan="1" colspan="1">4.9</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e423" rowspan="1" colspan="1">10</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e425" rowspan="1" colspan="1">setosa</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e427" rowspan="1" colspan="1">sepal_width</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e429" rowspan="1" colspan="1">3.1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e423" rowspan="1" colspan="1">10</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e425" rowspan="1" colspan="1">setosa</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e427" rowspan="1" colspan="1">petal_length</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e429" rowspan="1" colspan="1">1.5</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e423" rowspan="1" colspan="1">10</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e425" rowspan="1" colspan="1">setosa</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e427" rowspan="1" colspan="1">petal_width</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e429" rowspan="1" colspan="1">0.1</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e423" rowspan="1" colspan="1">15</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e425" rowspan="1" colspan="1">setosa</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e427" rowspan="1" colspan="1">sepal_length</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e429" rowspan="1" colspan="1">5.8</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e423" rowspan="1" colspan="1">15</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e425" rowspan="1" colspan="1">setosa</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e427" rowspan="1" colspan="1">sepal_width</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e429" rowspan="1" colspan="1">4.0</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e423" rowspan="1" colspan="1">15</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e425" rowspan="1" colspan="1">setosa</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e427" rowspan="1" colspan="1">petal_length</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e429" rowspan="1" colspan="1">1.2</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e423" rowspan="1" colspan="1">15</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e425" rowspan="1" colspan="1">setosa</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e427" rowspan="1" colspan="1">petal_width</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e429" rowspan="1" colspan="1">0.2</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e423" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e425" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e427" rowspan="1" colspan="1">...</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d60246e429" rowspan="1" colspan="1">...</td></tr></tbody></table></div></div><div class="section" id="ccl1510769296925__section_v1n_mph_zdb">
<h3 class="title sectiontitle">SQL Call</h3><pre class="pre codeblock" xml:space="preserve"><code>CREATE MULTISET TABLE svm_iris_predict_out AS (
  SELECT * FROM SVMSparsePredict_MLE (
    ON svm_iris_input_test AS InputTable PARTITION BY id
    ON svm_iris_model AS Model DIMENSION
    USING
    IDColumn ('id')
    AttributeNameColumn ('attribute')
    AttributeValueColumn ('value1')
    Accumulate ('species')
  ) AS dt
) WITH DATA;</code></pre></div><div class="section" id="ccl1510769296925__section_hvw_mph_zdb">
<h3 class="title sectiontitle">Output</h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM svm_iris_predict_out ORDER BY id;</code></pre><pre class="pre screen" xml:space="preserve"> id  predict_value predict_confidence  species    
 --- ------------- ------------------- ---------- 
   5 setosa         0.8673981408992447 setosa    
  10 setosa          0.819661754676374 setosa    
  15 setosa         0.9278832083866889 setosa    
  20 setosa         0.8649163062718142 setosa    
  25 setosa         0.7625677261575177 setosa    
  30 setosa         0.7938337387742732 setosa    
  35 setosa         0.8112536447044499 setosa    
  40 setosa         0.8437537095300566 setosa    
  45 setosa         0.7972425982898538 setosa    
  50 setosa         0.8466420177017054 setosa    
  55 versicolor     0.5047066884921864 versicolor
  60 versicolor     0.2719532556321491 versicolor
  65 versicolor     0.2612175692631059 versicolor
  70 versicolor     0.5714861810659234 versicolor
  75 versicolor     0.5087806077752018 versicolor
  80 versicolor     0.5284039049251765 versicolor
  85 virginica     0.35781510053880333 versicolor
  90 versicolor      0.457613698073775 versicolor
  95 versicolor     0.4377497946313431 versicolor
 100 versicolor     0.3965425149191664 versicolor
 105 virginica       0.871426508573154 virginica 
 110 virginica       0.785585474251325 virginica 
 115 virginica      0.9296744769374718 virginica 
 120 versicolor     0.7188677884044353 virginica 
 125 virginica      0.6698284675290832 virginica 
 130 versicolor     0.7089506437472127 virginica 
 135 versicolor     0.7527003336230892 virginica 
 140 virginica      0.5135151359537093 virginica 
 145 virginica      0.8569579553464065 virginica 
 150 virginica      0.6269248083310807 virginica</pre></div><div class="section" id="ccl1510769296925__section_kd5_kqh_zdb">
<h3 class="title sectiontitle">Prediction Accuracy</h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT (SELECT count(id)
  FROM svm_iris_predict_out
  WHERE predict_value = species)/(1.00 * (
  SELECT count(id) FROM svm_iris_predict_out) )
AS prediction_accuracy;</code></pre><pre class="pre screen" xml:space="preserve"> prediction_accuracy 
 ------------------- 
                0.83</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the attachment in the left sidebar.</p></div></div></div></div></body></html>
