<div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="vfj1507567716845" id="vfj1507567716845"><h1 class="title topictitle1" id="ariaid-title1">TextParser (ML Engine)</h1><div class="body conbody">
<p class="p">The TextParser function tokenizes an input stream of words, optionally <dfn class="term">stems</dfn> them (reduces them to their root forms), and then outputs them. The function can either output all words in one row or output each word in its own row with (optionally) the number of times that the word appears.</p>
<p class="p">The TextParser function uses Porter2 as the stemming algorithm.</p>
<p class="p">The TextParser function reads a document into a memory buffer and creates a hash table. The dictionary for the document must not exceed available memory; however, a million-word dictionary with an average word length of ten bytes requires only 10 MB of memory.</p>
<p class="p">TextParser uses files that are preinstalled on <span><b>ML Engine</b></span>. For details, see <a href="tzu1557778477026.md">Preinstalled Files That Functions Use</a>.</p></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="fke1507567887907" xml:lang="en-us" lang="en-us" id="fke1507567887907">
<h2 class="title topictitle2" id="ariaid-title2">TextParser Syntax</h2><div class="body refbody"><div class="section" id="fke1507567887907__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Version <span>1.14</span></h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM TextParser (
  <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> [ PARTITION BY <var class="keyword varname">expression</var> [,...] ]
  USING
  TextColumn ('<var class="keyword varname">text_column</var>')
  [ ConvertToLowerCase (<span><b>{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</b></span>) ]
  [ StemTokens (<span><b>{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</b></span>) ]
  [ Delimiter ('<var class="keyword varname">delimiter_regular_expression</var>') ]
  [ OutputTotalWords (<span><b>{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</b></span>) ]
  [ Punctuation ('<var class="keyword varname">punctuation_regular_expression</var>') ]
  <code class="ph codeph">[ Accumulate ({ '<var class="keyword varname">accumulate_column</var>' | <var class="keyword varname">accumulate_column_range</var> }[,...]) ]</code>
  [ TokenColName ('<var class="keyword varname">token_column</var>') ]
  [ FrequencyColName ('<var class="keyword varname">frequency_column</var>') ]
  [ TotalColName ('<var class="keyword varname">total_column</var>') ]
  [ RemoveStopWords (<span><b>{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</b></span>) ]
  [ PositionColName ('<var class="keyword varname">position_column</var>') ]
  [ ListPositions (<span><b>{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</b></span>) ]
  [ OutputByWord (<span><b>{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</b></span>) ]
  [ StemExceptions ('<var class="keyword varname">exception_rule_file</var>') ]
  [ StopWordsList ('<var class="keyword varname">stop_word_file</var>') ]
) AS <var class="keyword varname">alias</var>;</code></pre>
<p class="p">If you include the PARTITION BY clause, the function treats all rows in the same partition as a single document. If you omit the PARTITION BY clause, the function treats each row as a single document.</p></div></div><div class="related-links"><div class="linklistheader"><p></p><b>Related Information</b></div>
<ul class="linklist linklist"><div class="linklistmember"><a href="ndv1557782188375.md">Column Specification Syntax Elements</a></div><div class="linklistmember"><a href="dsd1557781660424.md">Regular Expressions in Syntax Elements</a></div></ul></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="uou1507567974435" xml:lang="en-us" lang="en-us" id="uou1507567974435">
<h2 class="title topictitle2" id="ariaid-title3">TextParser Syntax Elements</h2><div class="body refbody"><div class="section" id="uou1507567974435__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">TextColumn</dt><dd class="dd pd">Specify the name of the input column with contents to tokenize.</dd><dt class="dt pt dlterm">ConvertToLowerCase</dt><dd class="dd pd">[Optional] Specify whether to convert input text to lowercase.</dd><dd class="dd pd ddexpand">The function ignores this syntax element if the StemTokens syntax element has the value 'true'.</dd><dd class="dd pd ddexpand">Default: 'true'</dd><dt class="dt pt dlterm">StemTokens</dt><dd class="dd pd">[Optional] Specify whether to stem the tokens—that is, whether to apply the Porter2 stemming algorithm to each token to reduce it to its root form. Before stemming, the function converts the input text to lowercase and applies the RemoveStopWords syntax element.</dd><dd class="dd pd ddexpand">Default: 'false'</dd><dt class="dt pt dlterm">Delimiter</dt><dd class="dd pd">[Optional] Specify a regular expression that represents the word delimiter.</dd><dd class="dd pd ddexpand">The function uses only specified characters as delimiters. For example, if you specify Delimiter ('-'), the function uses only the hyphen character as a delimiter.To use the hyphen and the default delimiters, specify Delimiter ('[- \t\f\r\n]+').</dd><dd class="dd pd ddexpand">Default: <code class="ph codeph">'[ \t\f\r\n]+'</code></dd><dt class="dt pt dlterm">OutputTotalWords</dt><dd class="dd pd">[Optional] Specify whether to output a column that contains the total number of words in the input document.</dd><dd class="dd pd ddexpand">Default: 'false'</dd><dt class="dt pt dlterm">Punctuation</dt><dd class="dd pd">[Optional] Specify a regular expression that represents the punctuation characters to remove from the input text. With StemTokens ('true'), the recommended value is <code class="ph codeph">'[\\\[.,?\!:;~()\\\]]+'</code>.</dd><dd class="dd pd ddexpand">Default: <code class="ph codeph">'[.,!?]'</code></dd><dt class="dt pt dlterm">Accumulate</dt><dd class="dd pd">[Optional] Specify the names of the input columns to copy to the output table.</dd><dd class="dd pd ddexpand">No <var class="keyword varname">accumulate_column</var> can be the same as <var class="keyword varname">token_column</var> or <var class="keyword varname">total_column</var>.</dd><dd class="dd pd ddexpand">Default: All input columns</dd><dt class="dt pt dlterm">TokenColName</dt><dd class="dd pd">[Optional] Specify the name of the output column that contains the tokens.</dd><dd class="dd pd ddexpand">Default: 'token'</dd><dt class="dt pt dlterm">FrequencyColName</dt><dd class="dd pd">[Optional] Specify the name of the output column that contains the frequency of each token.</dd><dd class="dd pd ddexpand">The function ignores this syntax element if the OutputByWord syntax element has the value 'false'.</dd><dd class="dd pd ddexpand">Default: 'frequency'</dd><dt class="dt pt dlterm">TotalColName</dt><dd class="dd pd">[Optional] Specify the name of the output column that contains the total number of words in the input document.</dd><dd class="dd pd ddexpand">Default: 'total_count'</dd><dt class="dt pt dlterm">RemoveStopWords</dt><dd class="dd pd">[Optional] Specify whether to remove stop words from the input text before parsing.</dd><dd class="dd pd ddexpand">Default: 'false'</dd><dt class="dt pt dlterm">PositionColName</dt><dd class="dd pd">[Optional] Specify the name of the output column that contains the position of a word within a document.</dd><dd class="dd pd ddexpand">Default: 'location'</dd><dt class="dt pt dlterm">ListPositions</dt><dd class="dd pd">[Optional] Specify whether to output the position of a word in list form.</dd><dd class="dd pd ddexpand">The function ignores this syntax element if the OutputByWord syntax element has the value 'false'.</dd><dd class="dd pd ddexpand">Default: 'false' (The function outputs a row for each occurrence of the word.)</dd><dt class="dt pt dlterm">OutputByWord</dt><dd class="dd pd">[Optional] Specify whether to output each token of each input document in its own row in the output table. If you specify 'false', then the function outputs each tokenized input document in one row of the output table.</dd><dd class="dd pd ddexpand">Default: 'true'</dd><dt class="dt pt dlterm">StemExceptions</dt><dd class="dd pd">[Optional] Specify the location of the file that contains the stemming exceptions. A stemming exception is a word followed by its stemmed form. The word and its stemmed form are separated by white space. Each stemming exception is on its own line in the file. For example:<pre class="pre codeblock" xml:space="preserve"><code>bias bias 
news news 
goods goods 
lying lie 
ugly ugli 
sky sky 
early earli</code></pre></dd><dd class="dd pd ddexpand">The words 'lying', 'ugly', and 'early' are to become 'lie', 'ugli', and 'earli', respectively. The other words are not to change.</dd><dd class="dd pd ddexpand">Default: No stemming exceptions</dd><dt class="dt pt dlterm">StopWordsList</dt><dd class="dd pd">[Optional] Specify the location of the file that contains the stop words (words to ignore when parsing text). Each stop word is on its own line in the file. For example:<pre class="pre codeblock" xml:space="preserve"><code>a 
an 
the 
and 
this 
with 
but 
will</code></pre></dd><dd class="dd pd ddexpand">Default: No stop words</dd></dl></div></div></div></div>
