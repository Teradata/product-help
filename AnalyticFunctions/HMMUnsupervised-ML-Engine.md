<html><head></head><body><div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="paj1506983920374" id="paj1506983920374"><h1 class="title topictitle1" id="ariaid-title1">HMMUnsupervised (ML Engine)</h1><div class="body conbody">
<p class="p">The HMMUnsupervised function runs on the <span><b>SQL-GR</b></span> framework. The function can produce multiple HMM models simultaneously, where each model is learned from a set of sequences and where each sequence represents a vertex.</p></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="ide1506983961751" xml:lang="en-us" lang="en-us" id="ide1506983961751">
<h2 class="title topictitle2" id="ariaid-title2">HMMUnsupervised Syntax</h2><div class="body refbody"><div class="section" id="ide1506983961751__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Version <span>1.10</span></h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM HMMUnsupervised (
  ON { <var class="keyword varname">table_name</var> | <var class="keyword varname">view_name</var> | (<var class="keyword varname">query</var>) } AS Vertices
    PARTITION BY [ <var class="keyword varname">model_key</var> [,...]] <var class="keyword varname">sequence_key_attributes</var> 
    ORDER BY [ <var class="keyword varname">model_key</var>, ] <var class="keyword varname">time_ordered_sequence_attributes</var> ASC
  [ OUT TABLE InitStateTable (<var class="keyword varname">init_state_prob</var>) ]
  [ OUT TABLE StateTransitionTable (<var class="keyword varname">state_transition_prob</var>) ]
  [ OUT TABLE EmissionTable (<var class="keyword varname">emit_prob</var>)]
  USING 
  [ ModelColumn ('<var class="keyword varname">model_column</var>') ]
  SeqColumn ('<var class="keyword varname">sequence_column</var>')
  ObservationColumn ('<var class="keyword varname">observed_column</var>')
  HiddenStateNum (<var class="keyword varname">hidden_states</var>)
  [ MaxIterNum (<var class="keyword varname">max_iterations</var>) ]
  [ Epsilon (<var class="keyword varname">epsilon</var>) ]
  [ SkipColumn ('<var class="keyword varname">skip_column</var>') ]
  [ InitMethods ( { 'random' | 'flat' | 'input' }, '<var class="keyword varname">seed</var>') ]
  [ InitParams ('<var class="keyword varname">init_state_probability_vector</var>',
                '<var class="keyword varname">state_transition_probability_matrix</var>',
                '<var class="keyword varname">observation_emission_probability_matrix</var>')
  ]
) AS <var class="keyword varname">alias</var>;</code></pre></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="crh1506984007221" xml:lang="en-us" lang="en-us" id="crh1506984007221">
<h2 class="title topictitle2" id="ariaid-title3">HMMUnsupervised Syntax Elements</h2><div class="body refbody"><div class="section" id="crh1506984007221__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">InitStateTable</dt><dd class="dd pd">[Optional] Specify the name for the initial state probability table that the function outputs.</dd><dd class="dd pd ddexpand">Default: Pi in the current schema</dd><dt class="dt pt dlterm">StateTransitionTable</dt><dd class="dd pd">[Optional] Specify the name for the state transition probability table that the function outputs.</dd><dd class="dd pd ddexpand">Default: A in the current schema</dd><dt class="dt pt dlterm">EmissionTable</dt><dd class="dd pd">[Optional] Specify the name for the emission probability table that the function outputs.</dd><dd class="dd pd ddexpand">Default: B in the current schema</dd><dt class="dt pt dlterm">ModelColumn</dt><dd class="dd pd">[Required if PARTITION BY clause specifies <var class="keyword varname">model_key</var>, disallowed otherwise.] Specify the name of the Vertices column that contains the model attributes. The <var class="keyword varname">model_column</var> must match a <var class="keyword varname">model_key</var> in the PARTITION BY clause. The values in the columns can be either integers or strings.</dd><dt class="dt pt dlterm">SeqColumn</dt><dd class="dd pd">Specify the name of the Vertices column that contains the sequence attribute. The <var class="keyword varname">sequence_column</var> must be a sequence attribute in the PARTITION BY clause and contain more than two observation symbols.</dd><dt class="dt pt dlterm">ObservationColumn</dt><dd class="dd pd">Specify the name of the Vertices column that contains the observed symbols. The function scans the input table to find all possible observed symbols.</dd><dd class="dd pd ddexpand">Observed symbols are case-sensitive.</dd><dt class="dt pt dlterm">HiddenStateNum</dt><dd class="dd pd">Specify the number of hidden states.</dd><dd class="dd pd ddexpand">The number of hidden states can influence model quality and performance, so choose the number appropriately.</dd><dt class="dt pt dlterm">MaxIterNum</dt><dd class="dd pd">[Optional] Specify the number of iterations that the training process runs before the function completes.</dd><dd class="dd pd ddexpand">Default: 10</dd><dt class="dt pt dlterm">Epsilon</dt><dd class="dd pd">
<p class="p">[Optional] Specify the threshold value that determines the convergence of HMM training. If the parameter value difference is less than the threshold, the training process converges.</p>
<p class="p">Default behavior: Only MaxIterNum determines when the training process converges.</p></dd><dt class="dt pt dlterm">SkipColumn</dt><dd class="dd pd">[Optional] Specify the name of the Vertices column whose value determines whether the function skips the row. Each value in this column must be an INTEGER or VARCHAR that represents the value true or false (INTEGER 1 or 0 or VARCHAR 'true', 't', 'yes', 'y', '1', 'false', 'f', 'no', 'n', or '0'). If the value represents true, the function skips the row; otherwise it does not.</dd><dd class="dd pd ddexpand">Default behavior: The function does not skip any rows.</dd><dt class="dt pt dlterm">InitMethods</dt><dd class="dd pd">[Optional] Specify the method for creating the initial parameters for the initial state probabilities, state transition probabilities, and observation emission probabilities:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="crh1506984007221__table_whw_xry_fdb" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:50%" span="1"></col><col style="width:50%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d100202e234" rowspan="1" colspan="1">Option</th><th class="entry cellrowborder" style="vertical-align:top;" id="d100202e236" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e234" rowspan="1" colspan="1"><code class="ph codeph">'random'</code> (Default)</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e236" rowspan="1" colspan="1">Initial parameters are based on uniform distribution.
<p class="p">The <var class="keyword varname">seed</var> is meaningful only with <code class="ph codeph">'random'</code>. Specify the random seed the algorithm uses for repeatable results (for more information, see <a href="qym1549987102806.md">Nondeterministic Results and UniqueID Syntax Element</a>).</p></td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e234" rowspan="1" colspan="1"><code class="ph codeph">'flat'</code></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e236" rowspan="1" colspan="1">Probabilities are equal. Each cell in matrix or vector contains same probability.</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e234" rowspan="1" colspan="1"><code class="ph codeph">'input'</code></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e236" rowspan="1" colspan="1">Function takes initial parameters from InitParams syntax element.</td></tr></tbody></table></div></dd><dt class="dt pt dlterm">InitParams</dt><dd class="dd pd">[Required with InitMethods ('input')] When InitMethods specifies 'input', this syntax element specifies the initial parameters for the models:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="crh1506984007221__table_zpv_jsy_fdb" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:50%" span="1"></col><col style="width:50%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d100202e288" rowspan="1" colspan="1">InitParams Item</th><th class="entry cellrowborder" style="vertical-align:top;" id="d100202e290" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e288" rowspan="1" colspan="1"><var class="keyword varname">init_state_probability_vector</var></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e290" rowspan="1" colspan="1">Vector that contains initial state probabilities for model.</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e288" rowspan="1" colspan="1"><var class="keyword varname">state_transition_probability_matrix</var></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e290" rowspan="1" colspan="1">Matrix that contains state transition probabilities for model.</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e288" rowspan="1" colspan="1"><var class="keyword varname">observation_emission_probability_matrix</var></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e290" rowspan="1" colspan="1">Matrix that contains observation emission probabilities for model.</td></tr></tbody></table></div><div class="p">For example, if the NumberHiddenStates syntax element specifies three hidden states and two observed symbols ('yes' and 'no'), these are the InitParams values:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="crh1506984007221__table_ktt_yty_fdb" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:50%" span="1"></col><col style="width:50%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d100202e319" rowspan="1" colspan="1">InitParams Item</th><th class="entry cellrowborder" style="vertical-align:top;" id="d100202e321" rowspan="1" colspan="1">Value</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e319" rowspan="1" colspan="1"><var class="keyword varname">init_state_probability_vector</var></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e321" rowspan="1" colspan="1"><code class="ph codeph">'0.3333333333 0.3333333333 0.3333333333'</code></td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e319" rowspan="1" colspan="1"><var class="keyword varname">state_transition_probability_matrix</var></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e321" rowspan="1" colspan="1"><code class="ph codeph">'0.3333333333 0.3333333333 0.3333333333;</code>
<p class="p"><code class="ph codeph"> 0.3333333333 0.3333333333 0.3333333333;</code></p>
<p class="p"><code class="ph codeph"> 0.3333333333 0.3333333333 0.3333333333'</code></p></td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e319" rowspan="1" colspan="1"><var class="keyword varname">observation_emission_probability_matrix</var></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d100202e321" rowspan="1" colspan="1"><code class="ph codeph">'no:0.25 yes:0.75; no:0.35 yes:0.65; no:0.45 yes:0.55'</code></td></tr></tbody></table></div></div>
<p class="p">The sum of the probabilities in each row for the initial state probabilities, state transition probabilities, or observation emission probabilities parameters must round to 1.0. The number of states and the number of observed symbols must be consistent with the NumberHiddenStates syntax element and the observed symbols in the input table; otherwise, the function displays error messages.</p></dd></dl></div></div></div></div></body></html>
