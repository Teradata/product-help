<div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="fqy1507664712684" id="fqy1507664712684"><h1 class="title topictitle1" id="ariaid-title1">Canopy (ML Engine)</h1><div class="body conbody">
<p class="p">Canopy clustering is a simple, fast, accurate method for grouping objects into preliminary clusters.  It is often performed in preparation for more rigorous clustering techniques, such as <var class="keyword varname">k</var>-means clustering.</p>
<p class="p">The canopy clustering algorithm uses a fast approximate distance metric and two distance thresholds, T<span><sub>1</sub></span> (loose distance) and T<span><sub>2</sub></span> (tight distance), with T<span><sub>1</sub></span> greater than T<span><sub>2</sub></span>. A point is assigned to a canopy if the distance from the point to the canopy center is less than T<span><sub>2</sub></span>, and can be assigned to a canopy if the distance from the point to the canopy center is less than T<span><sub>1</sub></span>. A point can be assigned to more than one canopy.</p>
<p class="p">For distance measurement, the Canopy function uses Euclidean distance.</p>
<p class="p">If there are more than 10,000 canopy centers, the function fails. Run the function again, increasing the value of T<span><sub>2</sub></span> (specified by the TightDistance syntax element).</p>
<p class="p">The canopy clustering algorithm is nondeterministic. For repeatable results, use the UniqueID argument. For more information, see <a href="qym1549987102806.md">Nondeterministic Results and UniqueID Syntax Element</a>.</p></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="vtv1507664783941" xml:lang="en-us" lang="en-us" id="vtv1507664783941">
<h2 class="title topictitle2" id="ariaid-title2">Canopy Syntax</h2><div class="body refbody"><div class="section" id="vtv1507664783941__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Version <span>?</span></h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM Canopy (
  <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> AS InputTable
  USING
  <span>[ IDColumn (<var class="keyword varname">id_column</var>) ]</span>
  LooseDistance (<var class="keyword varname">maximum</var>)
  TightDistance (<var class="keyword varname">minimum</var>)
) AS <var class="keyword varname">alias</var>;</code></pre></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="xro1507664904827" xml:lang="en-us" lang="en-us" id="xro1507664904827">
<h2 class="title topictitle2" id="ariaid-title3">Canopy Syntax Elements</h2><div class="body refbody"><div class="section" id="xro1507664904827__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">IDColumn</dt><dd class="dd pd">[Optional] Specify the name of the InputTable column that contains the row identifier.</dd><dd class="dd pd ddexpand">Default: First InputTable column</dd><dt class="dt pt dlterm">LooseDistance</dt><dd class="dd pd">Specify the maximum distance that any point can be from a canopy center to be considered part of that canopy (T<span><sub>1</sub></span>).</dd><dt class="dt pt dlterm">TightDistance</dt><dd class="dd pd">Specify the minimum distance that separates two canopy centers (T<span><sub>2</sub></span>).</dd></dl></div></div></div></div>
