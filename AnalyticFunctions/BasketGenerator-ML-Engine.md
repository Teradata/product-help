<html><head></head><body><div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="rfc1507745241683" id="rfc1507745241683"><h1 class="title topictitle1" id="ariaid-title1">BasketGenerator (ML Engine)</h1><div class="body conbody">
<p class="p">The BasketGenerator function creates <dfn class="term">baskets</dfn> (sets) of items. The input is typically a set of purchase transaction records or web page view logs. Each basket is a unique combination or permutation of items.</p>
<p class="p">You can use the baskets as part of a collaborative filtering algorithm,
			which is useful for analyzing purchase behavior of users in a store or on a web site.
			You can also use this function on activity data (for example, "users who viewed this
			page also viewed this page").</p></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="wge1507745129933" xml:lang="en-us" lang="en-us" id="wge1507745129933">
<h2 class="title topictitle2" id="ariaid-title2">BasketGenerator Syntax</h2><div class="body refbody"><div class="section" id="wge1507745129933__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Version 1.6</h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM BasketGenerator (
  <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> PARTITION BY <var class="keyword varname">partition_column</var> [,...]
  USING
  TargetColumns ('<var class="keyword varname">target_column</var>' [,...])
  [ BasketSize (<var class="keyword varname">basket_size</var>) ]
  <code class="ph codeph">[ Accumulate ({ '<var class="keyword varname">accumulate_column</var>' | <var class="keyword varname">accumulate_column_range</var> }[,...]) ]</code>
  [ OutputCombinations (<span><b>{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</b></span>) ]
  [ MaxPartitionSize (<var class="keyword varname">max_partition_size</var>) ]
  [ MaxOutputCombinations (<var class="keyword varname">max_output_combinations</var>) ]
) AS <var class="keyword varname">alias</var>;</code></pre></div></div><div class="related-links"><div class="linklistheader"><p></p><b>Related Information</b></div>
<ul class="linklist linklist relinfo"><div class="linklistmember"><a href="ndv1557782188375.md">Column Specification Syntax Elements</a></div></ul></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="jwh1507745140970" xml:lang="en-us" lang="en-us" id="jwh1507745140970">
<h2 class="title topictitle2" id="ariaid-title3">BasketGenerator Syntax Elements</h2><div class="body refbody"><div class="section" id="jwh1507745140970__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">TargetColumns</dt><dd class="dd pd">Specify the names of the input columns that contain the items to collect into baskets. If you specify multiple columns, the function treats every unique combination of column values as one item.
<p class="p">For example, you could specify only the column that contains the stock keeping unit (SKU) that identifies an item that was sold. Alternatively, you could specify the SKU column and the columns that contain the month manufactured, color and size.</p></dd><dt class="dt pt dlterm">BasketSize</dt><dd class="dd pd">[Optional] Specify the number of items to include in a basket (an INTEGER value).</dd><dd class="dd pd ddexpand">Default: 2</dd><dt class="dt pt dlterm">Accumulate</dt><dd class="dd pd">[Optional] Specify the names of the input columns to copy to the output table. Each <var class="keyword varname">accumulate_column</var> must be a <var class="keyword varname">partition_column</var>; otherwise, the function is nondeterministic (for more information, see <a href="qym1549987102806.md">Nondeterministic Results and UniqueID Syntax Element</a>). However, not every <var class="keyword varname">partition_column</var> must be an <var class="keyword varname">accumulate_column</var>.</dd><dt class="dt pt dlterm">OutputCombinations</dt><dd class="dd pd">[Optional] Specify whether the function returns a basket for each unique combination of items. If you specify 'false', the function returns a basket for each unique permutation of items.</dd><dd class="dd pd ddexpand">In a <dfn class="term">combination</dfn>, item order is irrelevant. For example, the baskets "tomatoes and basil" and "basil and tomatoes" are equivalent.</dd><dd class="dd pd ddexpand">In a <dfn class="term">permutation</dfn>, item order is relevant. For example, the baskets "tomatoes and basil" and "basil and tomatoes" are not equivalent.</dd><dd class="dd pd ddexpand">The function returns combinations and permutations in lexicographical order.</dd><dd class="dd pd ddexpand">If <var class="keyword varname">n</var> is the number of distinct items that can appear in a basket and <var class="keyword varname">r</var> is <var class="keyword varname">basket_size</var>, then:
<ul class="ul" id="jwh1507745140970__ul_rwz_yrk_ycb">
<li class="li">The maximum number of combinations is:
<p class="p"><var class="keyword varname">n</var><span><sup>C<span><sub>r</sub></span></sup></span> or <var class="keyword varname">n</var>!/(<var class="keyword varname">r</var>!(<var class="keyword varname">n</var>-<var class="keyword varname">r</var>)!)</p></li>
<li class="li">The maximum number of permutations is:
<p class="p"><var class="keyword varname">n</var><span><sup>P<span><sub>r</sub></span></sup></span> or <var class="keyword varname">n</var>!/(<var class="keyword varname">n</var>-<var class="keyword varname">r</var>)!)</p></li></ul></dd><dd class="dd pd ddexpand">If the number of combinations or permutations exceeds one million, the function outputs no rows.</dd><dd class="dd pd ddexpand">Default: 'true'</dd><dt class="dt pt dlterm">MaxPartitionSize</dt><dd class="dd pd">[Optional] Specify the maximum number of items in a partition (an INTEGER value). If the number of items in a partition exceeds <var class="keyword varname">max_partition_size</var>, the function ignores that partition.</dd><dd class="dd pd ddexpand">Default: 100</dd><dt class="dt pt dlterm">MaxOutputCombinations</dt><dd class="dd pd">Specify the maximum number of combinations or permutations allowed in a transaction (an INTEGER value). The function ignores transactions with combinations or permutations greater than <var class="keyword varname">max_output_combinations</var>.</dd><dd class="dd pd ddexpand">Default: 1000000</dd></dl></div></div></div></div></body></html>
