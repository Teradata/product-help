<div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="lec1507842442019" id="lec1507842442019"><h1 class="title topictitle1" id="ariaid-title1">ApacheLogParser (ML Engine)</h1><div class="body conbody">
<p class="p">The ApacheLogParser function parses Apache log file content from a given server access log and outputs specified columns of information, which can include search engines and search terms.</p><div class="p">The function parses Apache log files with these constraints:
<ul class="ul" id="lec1507842442019__ul_llq_rbg_5cb">
<li class="li">Log files are loaded into a table</li>
<li class="li">One line of the Apache log file is loaded to one row in the table</li>
<li class="li">If you specify a custom log format, the input must conform to that format.</li>
<li class="li">If you do not specify a custom format string with the Log_Format syntax element, the function parses the logs with the NCSA extended/combined format, which is defined as:<pre class="pre codeblock" xml:space="preserve"><code>  "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-agent}i\""</code></pre></li></ul></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="lty1507842525953" xml:lang="en-us" lang="en-us" id="lty1507842525953">
<h2 class="title topictitle2" id="ariaid-title2">ApacheLogParser Syntax</h2><div class="body refbody"><div class="section" id="lty1507842525953__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Version 2.5</h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM ApacheLogParser (
  <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span>
  USING
  TargetColumn ('<var class="keyword varname">target_column</var>')
  [ LogFormat ('<var class="keyword varname">format_string</var>') ]
  [ ExcludeFiles ('<var class="keyword varname">.file_suffix</var>' [,...]) ]
  [ SearchInfoFlag (<span><b>{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</b></span>) ]
) AS <var class="keyword varname">alias</var>;</code></pre></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="cmt1507843085457" xml:lang="en-us" lang="en-us" id="cmt1507843085457">
<h2 class="title topictitle2" id="ariaid-title3">ApacheLogParser Syntax Elements</h2><div class="body refbody"><div class="section" id="cmt1507843085457__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">TargetColumn</dt><dd class="dd pd">Specify the name of the input column that contains the information to parse.</dd><dt class="dt pt dlterm">LogFormat</dt><dd class="dd pd">[Optional] String that specifies the format used to create the server access logs, which you can find in the Apache server configuration file. For each log item in the format string, the function builds an output table column built from the input table columns.</dd><dd class="dd pd ddexpand">Default: NCSA extended/combined format:<pre class="pre codeblock" xml:space="preserve"><code>"%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-agent}i\""</code></pre></dd><dt class="dt pt dlterm">ExcludeFiles</dt><dd class="dd pd">[Optional] Specify the types of files to exclude, by suffix. If an input row contains a file of an excluded type, the function does not create an output file row for that input row.</dd><dd class="dd pd ddexpand">Default: '.png', '.xml', '.js'</dd><dt class="dt pt dlterm">SearchInfoFlag</dt><dd class="dd pd">[Optional] Specify whether to return search information. If you specify 'true', the function extracts the search engine and search terms (if they exist) into two output columns. The supported search engines are Google, Bing, and Yahoo. The function provides more complete parsing capabilities for Google.</dd><dd class="dd pd ddexpand">Default: 'false'</dd></dl></div></div></div></div>
