<div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="gcv1507756303341" id="gcv1507756303341"><h1 class="title topictitle1" id="ariaid-title1">Modularity (ML Engine)</h1><div class="body conbody">
<p class="p">The Modularity function uses a clustering algorithm to detect communities
			in networks (graphs).The function needs no prior knowledge or estimation of starting
			cluster centers and assumes no particular data distribution of the input data set.</p><div class="fig fignone" id="gcv1507756303341__fig_pmp_dgk_pw"><div class="caption"></div><br clear="none"></br><img class="image" id="gcv1507756303341__image_jjy_dgk_pw" src="tco1466005863673.svg" alt="How Machine Learning Engine function Modularity works"></img><br clear="none"></br></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="lqx1507756501308" xml:lang="en-us" lang="en-us" id="lqx1507756501308">
<h2 class="title topictitle2" id="ariaid-title2">Modularity Syntax</h2><div class="body refbody"><div class="section" id="lqx1507756501308__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Version <span>1.8</span></h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM Modularity (
  <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> AS Vertices PARTITION BY <var class="keyword varname">vertex_key_column</var> [,...] 
  <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> AS Edges PARTITION BY <var class="keyword varname">source_vertex_key_column</var> [,...] 
  [ <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> AS Sources PARTITION BY <var class="keyword varname">vertex_key_column</var> [,...] ]
  [ OUT TABLE CommunityEdgeTable (<var class="keyword varname">community_edge_table</var>) ]
  USING
  TargetKey ({ '<var class="keyword varname">target_key_column</var>' | <var class="keyword varname">target_key_column_range</var> }[,...])
  [ EdgeWeight (<var class="keyword varname">edge_weight</var>) ]
  [ CommunityAssociation ('<var class="keyword varname">community_id</var>') ]
  [ Resolution (<var class="keyword varname">resolution</var> [,...]) ]
  [ Seed (<var class="keyword varname">seed</var>) ]
  <code class="ph codeph">[ Accumulate ({ '<var class="keyword varname">accumulate_column</var>' | <var class="keyword varname">accumulate_column_range</var> }[,...]) ]</code>
) AS <var class="keyword varname">alias</var>;</code></pre></div></div><div class="related-links"><div class="linklistheader"><p></p><b>Related Information</b></div>
<ul class="linklist linklist relinfo"><div class="linklistmember"><a href="ndv1557782188375.md">Column Specification Syntax Elements</a></div></ul></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="cud1507756639473" xml:lang="en-us" lang="en-us" id="cud1507756639473">
<h2 class="title topictitle2" id="ariaid-title3">Modularity Syntax Elements</h2><div class="body refbody"><div class="section" id="cud1507756639473__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">CommunityEdgeTable</dt><dd class="dd pd">[Optional] Specify the name of the table that the function creates to output the weights of the edges between the communities at different resolution levels. If you omit this syntax element, the function does not create this table.</dd><dd class="dd pd ddexpand"><div class="note tip" id="cud1507756639473__note_N10028_N10026_N1001B_N10018_N10014_N10010_N10001"><span><b>Tip</b></span><div class="notebody">Teradata recommends using this element only if this information is required. Creating this table can greatly increase function run time.</div></div></dd><dt class="dt pt dlterm">TargetKey</dt><dd class="dd pd">Specify the key of the target vertex of an edge. The key consists of the names of one or more Edges table columns.</dd><dt class="dt pt dlterm">EdgeWeight</dt><dd class="dd pd">[Optional] Specify the name of the Edges table column that contains edge weights. Each <var class="keyword varname">edge_weight</var> is a positive value.</dd><dd class="dd pd ddexpand">Default behavior: The weight of each edge is 1 (that is, the graph is unweighted).
<p class="p">This syntax element determines how the function treats duplicate edges (that is, edges with the same source and destination, which might have different weights). For a weighted graph, the function treats duplicate edges as a single edge whose weight is the sum of the weights of the duplicate edges. For an unweighted graph, the function uses only one of the duplicate edges.</p></dd><dt class="dt pt dlterm">CommunityAssociation</dt><dd class="dd pd">[Optional] Specify the name of the column that represents the community association of the vertices. Use this syntax element if you know some vertex communities.</dd><dt class="dt pt dlterm">Resolution</dt><dd class="dd pd">[Optional] Specify hierarchical-level information for the communities. For details, see <a href="fmd1559146970819.md">Resolution</a>. If you specify a list of <var class="keyword varname">resolution</var> values, the function incrementally finds the communities for each value and for the default value.</dd><dd class="dd pd ddexpand">Each <var class="keyword varname">resolution</var> must be a distinct DOUBLE PRECISION value in the range [0.0, 1000000.0]. The value 0.0 puts each node in its own community of size 1. You can specify a maximum of 500 <var class="keyword varname">resolution</var> values.</dd><dd class="dd pd ddexpand">Default: 1.0</dd><dt class="dt pt dlterm">Seed</dt><dd class="dd pd">[Optional] Specify the random seed the algorithm uses for repeatable results. The <var class="keyword varname">seed</var> must be a LONG value greater than or equal to 1. The algorithm multiplies <var class="keyword varname">seed</var> by the hash code of <var class="keyword varname">vertex_key</var> to create a unique seed for each vertex.<div class="note note" id="cud1507756639473__note_N1009F_N1008C_N10085_N10018_N10014_N10010_N10001"><span><b>Note</b></span><div class="notebody"> For repeatable results, use both the Seed and UniqueID syntax elements. For more information, see <a href="qym1549987102806.md">Nondeterministic Results and UniqueID Syntax Element</a>.</div></div></dd><dd class="dd pd ddexpand">The function also uses <var class="keyword varname">seed</var> for these purposes:
<ul class="ul" id="cud1507756639473__ul_xmg_dyt_gy">
<li class="li">To break ties between different vertices during community formation</li>
<li class="li">To determine when to stop community formation
<p class="p">If <var class="keyword varname">seed</var> is 1 (default value), community formation continues until the change in modularity score drops below a threshold value. The threshold value is set in the function code; you cannot change it.</p>
<p class="p">If <var class="keyword varname">seed</var> is set to any other value, community formation continues until the change in modularity score between iterations is 0. This deeper analysis of the graph can improve community formation, but can also increase execution time.</p></li></ul></dd><dd class="dd pd ddexpand">Default: 1</dd><dt class="dt pt dlterm">Accumulate</dt><dd class="dd pd">[Optional] Specify the names of the Vertices columns to copy to the community Vertices table.</dd><dd class="dd pd ddexpand">Default behavior: The function copies the <var class="keyword varname">vertex_key</var> columns to the output Vertices table for each vertex, changing the column names to <var class="keyword varname">id</var>, <var class="keyword varname">id</var>_1, <var class="keyword varname">id</var>_2, and so on.</dd></dl></div></div></div></div>
