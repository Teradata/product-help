<html><head></head><body><div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="cgs1507737028097" id="cgs1507737028097"><h1 class="title topictitle1" id="ariaid-title1">MinHash (ML Engine)</h1><div class="body conbody">
<p class="p">The MinHash function uses transaction history to cluster similar items or users together. For example, the function can cluster items that are frequently bought together or users that bought the same items.</p></div><div class="related-links"><div class="linklistheader"><p></p><b>Related Information</b></div>
<ul class="linklist linklist relinfo"><div class="linklistmember"><a href="qym1549987102806.md">Nondeterministic Results and UniqueID Syntax Element</a></div></ul></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="gij1507737066568" xml:lang="en-us" lang="en-us" id="gij1507737066568">
<h2 class="title topictitle2" id="ariaid-title2">MinHash Syntax</h2><div class="body refbody"><div class="section" id="gij1507737066568__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Version <span>2.10</span></h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM MinHash (
  <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> AS InputTable
  [ <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> AS SeedTable ]
  OUT TABLE OutputTable (<var class="keyword varname">output_table</var>)
  [ OUT TABLE OutputSeedsTable (<var class="keyword varname">seed_table_to_save</var>) ]
  USING
  UserIDColumn ('<var class="keyword varname">user_id_column</var>')
  ItemIDColumn ('<var class="keyword varname">item_id_column</var>')
  HashNum (<var class="keyword varname">number_of_hash_functions</var>)
  KeyGroups (<var class="keyword varname">number_of_key_groups</var>)
  [ InputFormat ({ 'bigint' | 'integer' | 'string' | 'hex' }) ]
  [ MinClusterSize (<var class="keyword varname">minimum_cluster_size</var>) ]
  [ MaxClusterSize (<var class="keyword varname">maximum_cluster_size</var>) ]
  [ Delimiter ('<var class="keyword varname">delimiter</var>') ]
) AS <var class="keyword varname">alias</var>;</code></pre></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="tkd1507737070611" xml:lang="en-us" lang="en-us" id="tkd1507737070611">
<h2 class="title topictitle2" id="ariaid-title3">MinHash Syntax Elements</h2><div class="body refbody"><div class="section" id="tkd1507737070611__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">OutputTable</dt><dd class="dd pd">Specify the name of the output table.</dd><dt class="dt pt dlterm">OutputSeedsTable</dt><dd class="dd pd">[Optional. Disallowed with SeedTable table.] Specify the name of the table in which to save the random seeds that the function creates if you omit the SeedTable table. If you omit both SeedTable and OutputSeedsTable, the function discards the random seeds at the end of execution.</dd><dd class="dd pd ddexpand">Typically, you specify this syntax element in the first MinHash call, which creates <var class="keyword varname">seed_table_to_save</var>, and then specify <var class="keyword varname">seed_table_to_save</var> as the SeedTable in subsequent MinHash calls.</dd><dt class="dt pt dlterm">UserIDColumn</dt><dd class="dd pd">Specify the name of the InputTable column that contains the IDs to cluster. Typically these values are customer identifiers.</dd><dt class="dt pt dlterm">ItemIDColumn</dt><dd class="dd pd">Specify the name of the input column that contains the values to use for hashing.</dd><dt class="dt pt dlterm">HashNum</dt><dd class="dd pd">Specify the number of hash functions to create. The <var class="keyword varname">number_of_hash_functions</var> determines the number and size of clusters created.</dd><dt class="dt pt dlterm">KeyGroups</dt><dd class="dd pd">Specify the number of key groups to create. The <var class="keyword varname">number_of_key_groups</var> must be a divisor of <var class="keyword varname">number_of_hash_functions</var>. A large <var class="keyword varname">number_of_key_groups</var> decreases the probability that multiple users are assigned to the same cluster identifier.</dd><dt class="dt pt dlterm">InputFormat</dt><dd class="dd pd">[Optional] Specify the format of the values to hash (the values in <var class="keyword varname">item_id_column</var>).</dd><dd class="dd pd ddexpand">Default: 'integer'</dd><dt class="dt pt dlterm">MinClusterSize</dt><dd class="dd pd">[Optional] Specify the minimum cluster size.</dd><dd class="dd pd ddexpand">Default: 3</dd><dt class="dt pt dlterm">MaxClusterSize</dt><dd class="dd pd">[Optional] Specify the maximum cluster size.</dd><dd class="dd pd ddexpand">Default: 5</dd><dt class="dt pt dlterm">Delimiter</dt><dd class="dd pd">[Optional] Specify the delimiter used between hashed values (typically customer identifiers) in the output.</dd><dd class="dd pd ddexpand">Default: ' ' (space)</dd></dl></div></div></div></div></body></html>
