<div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="vqm1507162150338" id="vqm1507162150338"><h1 class="title topictitle1" id="ariaid-title1">KMeans (ML Engine)</h1><div class="body conbody">
<p class="p">The KMeans function takes a data set and outputs the centroids of its clusters and, optionally, the clusters themselves. The <var class="keyword varname">k</var>-means algorithm groups a set of observations into <var class="keyword varname">k</var> clusters with each observation assigned to the cluster with the nearest centroid, or mean. The algorithm minimizes an objective function; in the KMeans function, the objective function is the total Euclidean distance of all data points from the center of the cluster to which they are assigned.</p><div class="p">This is the algorithm:
<ol class="ol" id="vqm1507162150338__ol_bm2_t1j_mbb">
<li class="li">Specify or randomly select <var class="keyword varname">k</var> initial cluster centroids.</li>
<li class="li">Assign each data point to the cluster that has the closest centroid.</li>
<li class="li">Recalculate the positions of the <var class="keyword varname">k</var> centroids.</li>
<li class="li">Repeat steps 2 and 3 until the centroids no longer move.</li></ol></div>
<p class="p">Although the procedure always terminates, the <var class="keyword varname">k</var>-means algorithm does not necessarily find the optimal configuration, corresponding to the global objective function minimum. The algorithm is significantly sensitive to the initial randomly selected cluster centers. To reduce the effect of these limitations, the <var class="keyword varname">k</var>-means algorithm can be run multiple times.</p></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="alz1507162260661" xml:lang="en-us" lang="en-us" id="alz1507162260661">
<h2 class="title topictitle2" id="ariaid-title2">KMeans Syntax</h2><div class="body refbody"><div class="section" id="alz1507162260661__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Version <span>1.16</span></h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM KMeans (
  <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> AS InputTable
  [ <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> AS CentroidsTable ]
  OUT TABLE OutputTable (<var class="keyword varname">output_table</var>)
  [ OUT TABLE ClusterAssignmentTable (<var class="keyword varname">cluster_assignement_table</var>) ]
  USING
  [ UnpackColumns (<span><b>{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</b></span>) ]
  [ InitialSeeds ('<var class="keyword varname">starting_cluster</var>' [,...]) ]
  [ NumClusters (<var class="keyword varname">number_of_means</var>) [ Seed (<var class="keyword varname">seed</var>) ] ]
  [ StopThreshold (<var class="keyword varname">threshold</var>) ]
  [ MaxIterNum (<var class="keyword varname">max_iterations</var>) ]
) AS <var class="keyword varname">alias</var>;</code></pre>
<p class="p">You must specify only one of NumClusters, InitialSeeds, or CentroidsTable. If you specify more than one, the function gives top priority to InitialSeeds, then to NumClusters, and then to CentroidsTable.</p></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="dyb1507162368051" xml:lang="en-us" lang="en-us" id="dyb1507162368051">
<h2 class="title topictitle2" id="ariaid-title3">KMeans Syntax Elements</h2><div class="body refbody"><div class="section" id="dyb1507162368051__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">OutputTable</dt><dd class="dd pd">Specify the name of the table of cluster centroids.</dd><dt class="dt pt dlterm">ClusterAssignmentTable</dt><dd class="dd pd">Specify the name of the table of the clusters.</dd><dt class="dt pt dlterm">UnpackColumns</dt><dd class="dd pd">[Optional] Specify whether the means for each centroid appear unpacked (that is, in separate columns) in the OutputTable.</dd><dd class="dd pd ddexpand">Default: 'false' (The function concatenates the means for the centroids and outputs the result in a single VARCHAR column.)</dd><dt class="dt pt dlterm">InitialSeeds</dt><dd class="dd pd">[Optional] Specify the initial seed means as strings of underscore-delimited DOUBLE PRECISION values. For example, this clause initializes eight clusters in eight-dimensional space:<pre class="pre codeblock" xml:space="preserve"><code>InitialSeeds ('50_50_50_50_50_50_50_50',
'150_150_150_150_150_150_150_150',
'250_250_250_250_250_250_250_250',
'350_350_350_350_350_350_350_350',
'450_450_450_450_450_450_450_450',
'550_550_550_550_550_550_550_550',
'650_650_650_650_650_650_650_650',
'750_750_750_750_750_750_750_750')</code></pre></dd><dd class="dd pd ddexpand">The dimensionality of the means must match the dimensionality of the data (that is, each mean must have <var class="keyword varname">n</var> numbers in it, where <var class="keyword varname">n</var> is the number of input columns minus one).</dd><dd class="dd pd ddexpand">Default behavior: The algorithm chooses the initial seed means randomly.</dd><dd class="dd pd ddexpand">With InitialSeeds, the function uses a deterministic algorithm and the function supports up to 1596 dimensions.</dd><dt class="dt pt dlterm">NumClusters</dt><dd class="dd pd">[Optional] Specify the number of clusters to create from the data.</dd><dd class="dd pd ddexpand">With NumClusters, the function uses a nondeterministic algorithm and the function supports up to 1543 dimensions (for more information, see <a href="qym1549987102806.md">Nondeterministic Results and UniqueID Syntax Element</a>).</dd><dt class="dt pt dlterm">Seed</dt><dd class="dd pd">[Optional] Specify the random seed the algorithm uses for repeatable results. The algorithm uses the seed to randomly sample the input table rows as initial clusters. The <var class="keyword varname">seed</var> must be a nonnegative LONG value.<div class="note note" id="dyb1507162368051__note_N10091_N10088_N10081_N10018_N10014_N10010_N10001"><span><b>Note</b></span><div class="notebody"> For repeatable results, use both the Seed and UniqueID syntax elements. For more information, see <a href="qym1549987102806.md">Nondeterministic Results and UniqueID Syntax Element</a>.</div></div></dd><dt class="dt pt dlterm">StopThreshold</dt><dd class="dd pd">[Optional] Specify the convergence threshold. When the centroids move by less than this amount, the algorithm has converged.</dd><dd class="dd pd ddexpand">Default: 0.0395</dd><dt class="dt pt dlterm">MaxIterNum</dt><dd class="dd pd">[Optional] Specify the maximum number of iterations that the algorithm runs before quitting if the convergence threshold has not been met.</dd><dd class="dd pd ddexpand">Default: 10</dd></dl></div></div></div></div>
