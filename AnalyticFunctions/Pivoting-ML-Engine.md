<div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="afk1507830462798" id="afk1507830462798"><h1 class="title topictitle1" id="ariaid-title1">Pivoting (ML Engine)</h1><div class="body conbody">
<p class="p">The Pivoting function pivots data that is stored in rows into columns. It outputs a table whose columns are based on the individual values from an input table column. The output table schema depends on the function syntax elements. The function handles missing or NULL values automatically.</p>
<p class="p">The reverse of this function is <a href="mgx1558453229425.md#yna1507821764200">Unpivoting (ML Engine)</a>.</p></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="ytw1507830537293" xml:lang="en-us" lang="en-us" id="ytw1507830537293">
<h2 class="title topictitle2" id="ariaid-title2">Pivoting Syntax</h2><div class="body refbody"><div class="section" id="ytw1507830537293__section_N1000E_N1000C_N10001">
<h3 class="title sectiontitle">Version <span>1.9</span></h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM Pivoting (
  <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> PARTITION BY <var class="keyword varname">partition_column</var> [,...]
  [ ORDER BY <var class="keyword varname">order_column</var> ]
  USING
  PartitionColumns ({ '<var class="keyword varname">partition_column</var>' | <var class="keyword varname">partition_column_range</var> }[,...])
  { NumberOfRows (<var class="keyword varname">number_of_rows</var>) |
    PivotColumn ('<var class="keyword varname">pivot_column</var>')
    [ PivotKeys ('<var class="keyword varname">pivot_key</var>' [,...]) ]
    [ NumericPivotKey (<span><b>{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</b></span>) ]
  }
  TargetColumns ({ '<var class="keyword varname">target_column</var>' | '<var class="keyword varname">target_column_range</var>' }[,...])
) AS <var class="keyword varname">alias</var>;</code></pre></div></div><div class="related-links"><div class="linklistheader"><p></p><b>Related Information</b></div>
<ul class="linklist linklist relinfo"><div class="linklistmember"><a href="ndv1557782188375.md">Column Specification Syntax Elements</a></div></ul></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="nbu1507830542133" xml:lang="en-us" lang="en-us" id="nbu1507830542133">
<h2 class="title topictitle2" id="ariaid-title3">Pivoting Syntax Elements</h2><div class="body refbody"><div class="section" id="nbu1507830542133__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">PartitionColumns</dt><dd class="dd pd">Specify the same columns as the PARTITION BY clause (in any order).</dd><dt class="dt pt dlterm">NumberOfRows</dt><dd class="dd pd">[Required if you omit PivotColumn.] Use NumberOfRows when no column contains pivot keys, but you can specify a maximum number of rows in any partition. The function pivots the input rows into this number of columns in the output table.
<p class="p">If a partition has fewer than <var class="keyword varname">number_of_rows</var> rows, the function adds NULL values; if a partition has more than <var class="keyword varname">number_of_rows</var> rows, the function omits the extra rows.</p>
<p class="p">If you use NumberOfRows, you must use the ORDER BY clause to order the input data; otherwise, the contents of the output table columns may vary from run to run.</p></dd><dt class="dt pt dlterm">PivotColumn</dt><dd class="dd pd">[Required if you omit NumberOfRows.] Specify the name of the input column that contains the pivot keys.
<p class="p">If <var class="keyword varname">pivot_column</var> contains numeric values, the function casts them to VARCHAR; function performance improves slightly if you specify NumericPivotKey ('true').</p></dd><dt class="dt pt dlterm">PivotKeys</dt><dd class="dd pd">[Required if you specify PivotColumn.] Specify the values in <var class="keyword varname">pivot_column</var> to use as pivot keys. The function ignores rows that contain other values in <var class="keyword varname">pivot_column</var>.</dd><dt class="dt pt dlterm">NumericPivotKey</dt><dd class="dd pd">[Optional] Use this syntax element only with the PivotColumn syntax element. If <var class="keyword varname">pivot_column</var> is numeric, NumericPivotKey ('true') improves function performance slightly.</dd><dd class="dd pd ddexpand">Default: 'false'</dd><dt class="dt pt dlterm">TargetColumns</dt><dd class="dd pd">[Optional] Specify the names of the target columns (input columns that contain the values to pivot).</dd></dl></div></div></div></div>
