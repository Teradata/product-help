<div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="rop1507219165371" id="rop1507219165371"><h1 class="title topictitle1" id="ariaid-title1">TextClassifierTrainer (ML Engine)</h1><div class="body conbody">
<p class="p">The TextClassifierTrainer function trains a machine-learning classifier for text classification and installs the model file on <span><b>ML Engine</b></span>. The model file can then be input to the function <a href="lhi1558542137898.md#mdp1507235149305">TextClassifier (ML Engine)</a>.</p>
<p class="p">TextClassifierTrainer uses files that are preinstalled on <span><b>ML Engine</b></span>. For details, see <a href="tzu1557778477026.md">Preinstalled Files That Functions Use</a>.</p></div><div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="tih1507219529782" xml:lang="en-us" lang="en-us" id="tih1507219529782">
<h2 class="title topictitle2" id="ariaid-title2">TextClassifierTrainer Syntax</h2><div class="body refbody"><div class="section" id="tih1507219529782__section_N100C1_N10022_N10001">
<h3 class="title sectiontitle">Version ?</h3><pre class="pre codeblock" xml:space="preserve"><code>SELECT * FROM TextClassifierTrainer (
  <span>ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> AS InputTable
  USING
  OutputModelFile ('<var class="keyword varname">output_model_file</var>')
  [ ConvertToLowerCase (<span><b>{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</b></span>) ]
  TextColumn ('<var class="keyword varname">text_column</var>')
  CategoryColumn ('<var class="keyword varname">category_column</var>')
  ModelType ({ 'KNN' | 'MaxEnt' })
  [ KNNModelParameters ('compress:<var class="keyword varname">c_value</var>', 'kvalues:<var class="keyword varname">k_value</var> [,...]',
    'power:<var class="keyword varname">p_value</var>') ]
  [ NLPParameters ('<var class="keyword varname">name</var>:<var class="keyword varname">value</var>' [,...]) ]
  [ FeatureSelectionLimits ('DF:[{ <var class="keyword varname">min</var>:<var class="keyword varname">max</var> | <var class="keyword varname">min</var>: | :<var class="keyword varname">max</var>}]') ]
) AS <var class="keyword varname">alias</var>;</code></pre></div></div></div><div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="zkp1507219633827" xml:lang="en-us" lang="en-us" id="zkp1507219633827">
<h2 class="title topictitle2" id="ariaid-title3">TextClassifierTrainer Syntax Elements</h2><div class="body refbody"><div class="section" id="zkp1507219633827__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">OutputModelFile</dt><dd class="dd pd">Specify the name for the model file to create.</dd><dt class="dt pt dlterm">ConvertToLowerCase</dt><dd class="dd pd">[Optional] Specify whether to convert input text to lowercase.</dd><dd class="dd pd ddexpand">Default: 'true'</dd><dt class="dt pt dlterm">TextColumn</dt><dd class="dd pd">Specify the name of the InputTable column that contains the text of the training documents.</dd><dt class="dt pt dlterm">CategoryColumn</dt><dd class="dd pd">Specify the name of the InputTable column that contains the category of the training documents.</dd><dt class="dt pt dlterm">ModelType</dt><dd class="dd pd">Specify the classifier type of the model, KNN algorithm or maximum entropy model.</dd><dt class="dt pt dlterm">KNNModelParameters</dt><dd class="dd pd">[Optional] Applies only if the classifier type of the model is KNN. Specify parameters for the classifier:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="zkp1507219633827__table_N10087_N10083_N1007B_N10018_N10014_N10010_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:50%" span="1"></col><col style="width:50%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d19949e194" rowspan="1" colspan="1">Parameter</th><th class="entry cellrowborder" style="vertical-align:top;" id="d19949e196" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e194" rowspan="1" colspan="1">compress</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e196" rowspan="1" colspan="1"><var class="keyword varname">c_value</var> must be in the range (0, 1). The <var class="keyword varname">n</var> training documents are clustered into <var class="keyword varname">value</var>*<var class="keyword varname">n</var> groups.
<p class="p">For example, if there are 100 training documents, then KNNModelParameters('compress:0.6') clusters them into 60 groups), and the model uses the center of each group as the feature vector.</p></td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e194" rowspan="1" colspan="1">kvalues</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e196" rowspan="1" colspan="1"> </td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e194" rowspan="1" colspan="1">power</td><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e196" rowspan="1" colspan="1"> </td></tr></tbody></table></div></dd><dt class="dt pt dlterm">NLPParameters</dt><dd class="dd pd">[Optional] Specify natural language processing (NLP) parameters for preprocessing the text data and produce tokens:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="zkp1507219633827__table_tlr_kgz_fdb" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup span="1"><col style="width:50%" span="1"></col><col style="width:50%" span="1"></col></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d19949e236" rowspan="1" colspan="1"><var class="keyword varname">name</var>:<var class="keyword varname">value</var></th><th class="entry cellrowborder" style="vertical-align:top;" id="d19949e242" rowspan="1" colspan="1">Description</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e236" rowspan="1" colspan="1"><code class="ph codeph">tokenDictFile:<var class="keyword varname">token_file</var></code></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e242" rowspan="1" colspan="1"><var class="keyword varname">token_file</var> is name of <span><b>ML Engine</b></span> file in which each line contains a phrase, followed by a space, followed by the token for the phrase (and nothing else).</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e236" rowspan="1" colspan="1"><code class="ph codeph">stopwordsFile:<var class="keyword varname">stopword_file</var></code></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e242" rowspan="1" colspan="1"><var class="keyword varname">stopword_file</var> is name of <span><b>ML Engine</b></span> file in which each line contains exactly one stop word (a word to ignore during tokenization, such as <span>a</span>, <span>an</span>, or <span>the</span>).</td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e236" rowspan="1" colspan="1"><code class="ph codeph">useStem:{ 'true' | 'false' }</code></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e242" rowspan="1" colspan="1">Specifies whether function stems tokens.
<p class="p">Default: 'false'</p></td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e236" rowspan="1" colspan="1"><code class="ph codeph">stemIgnoreFile:<var class="keyword varname">stem_ignore_file</var></code></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e242" rowspan="1" colspan="1"><var class="keyword varname">stem_ignore_file</var> is name of <span><b>ML Engine</b></span> file in which each line contains exactly one word to ignore during stemming.
<p class="p">Specifying this parameter with <code class="ph codeph">useStem:'false'</code> causes an exception.</p></td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e236" rowspan="1" colspan="1"><code class="ph codeph">useBgram:{ 'true' | 'false' }</code></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e242" rowspan="1" colspan="1">Specifies whether function uses Bigram, which considers proximity of adjacent tokens when analyzing them.
<p class="p">Default: 'false'</p></td></tr><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e236" rowspan="1" colspan="1"><code class="ph codeph">language:{ 'en' | 'zh_CN' | 'zh_TW' }</code></td><td class="entry cellrowborder" style="vertical-align:top;" headers="d19949e242" rowspan="1" colspan="1">Specifies input text language—English (Default), Simplified Chinese, or Traditional Chinese, respectively.
<p class="p">For <code class="ph codeph">zh_CN</code> and <code class="ph codeph">zh_TW</code>, function ignores <code class="ph codeph">useStem</code> and <code class="ph codeph">stemIgnoreFile</code>.</p>
<p class="p">Default: 'en'</p></td></tr></tbody></table></div></dd><dd class="dd pd ddexpand">If ConvertToLowerCase is 'false', the function treats stop words as case-sensitive.</dd><dd class="dd pd ddexpand">Example:<pre class="pre codeblock" xml:space="preserve"><code>NLPParameters ('tokenDictFile:token_dict.txt', 
'stopwordsFile:fileName', 
'useStem:true', 
'stemIgnoreFile:fileName', 
'useBgram:true', 
'language:zh_CN')</code></pre></dd><dt class="dt pt dlterm">FeatureSelectionLimits</dt><dd class="dd pd">[Optional] Specify the feature selection method, DF (document frequency). The values <var class="keyword varname">min</var> and <var class="keyword varname">max</var> must be in the range (0, 1). The function selects only the tokens that appear in at least <var class="keyword varname">min</var>*<var class="keyword varname">n</var> documents and at most <var class="keyword varname">max</var>*<var class="keyword varname">n</var> documents, where <var class="keyword varname">n</var> is the number of training documents. For example, FeatureSelection ('DF:[0.1:0.9]') causes the function to select only the tokens that appear in at least 10% but no more than 90% of the training documents. If <var class="keyword varname">min</var> exceeds <var class="keyword varname">max</var>, the function uses <var class="keyword varname">min</var> as <var class="keyword varname">max</var> and <var class="keyword varname">max</var> as <var class="keyword varname">min</var>.</dd></dl></div></div></div></div>
